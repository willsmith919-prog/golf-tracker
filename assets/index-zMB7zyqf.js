(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function N1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Xd={exports:{}},Ll={};var Oy;function E1(){if(Oy)return Ll;Oy=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(l,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:l,key:f,ref:o!==void 0?o:null,props:u}}return Ll.Fragment=t,Ll.jsx=s,Ll.jsxs=s,Ll}var Iy;function T1(){return Iy||(Iy=1,Xd.exports=E1()),Xd.exports}var d=T1(),Wd={exports:{}},ue={};var Dy;function C1(){if(Dy)return ue;Dy=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function C(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,I={};function U(N,H,K){this.props=N,this.context=H,this.refs=I,this.updater=K||A}U.prototype.isReactComponent={},U.prototype.setState=function(N,H){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,H,"setState")},U.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function q(){}q.prototype=U.prototype;function Q(N,H,K){this.props=N,this.context=H,this.refs=I,this.updater=K||A}var ee=Q.prototype=new q;ee.constructor=Q,L(ee,U.prototype),ee.isPureReactComponent=!0;var Oe=Array.isArray;function V(){}var M={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function we(N,H,K){var X=K.ref;return{$$typeof:i,type:N,key:H,ref:X!==void 0?X:null,props:K}}function mt(N,H){return we(N.type,H,N.props)}function Ve(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function me(N){var H={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(K){return H[K]})}var ct=/\/+/g;function ut(N,H){return typeof N=="object"&&N!==null&&N.key!=null?me(""+N.key):H.toString(36)}function G(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(V,V):(N.status="pending",N.then(function(H){N.status==="pending"&&(N.status="fulfilled",N.value=H)},function(H){N.status==="pending"&&(N.status="rejected",N.reason=H)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function w(N,H,K,X,re){var oe=typeof N;(oe==="undefined"||oe==="boolean")&&(N=null);var he=!1;if(N===null)he=!0;else switch(oe){case"bigint":case"string":case"number":he=!0;break;case"object":switch(N.$$typeof){case i:case t:he=!0;break;case x:return he=N._init,w(he(N._payload),H,K,X,re)}}if(he)return re=re(N),he=X===""?"."+ut(N,0):X,Oe(re)?(K="",he!=null&&(K=he.replace(ct,"$&/")+"/"),w(re,H,K,"",function(Ks){return Ks})):re!=null&&(Ve(re)&&(re=mt(re,K+(re.key==null||N&&N.key===re.key?"":(""+re.key).replace(ct,"$&/")+"/")+he)),H.push(re)),1;he=0;var nt=X===""?".":X+":";if(Oe(N))for(var Xe=0;Xe<N.length;Xe++)X=N[Xe],oe=nt+ut(X,Xe),he+=w(X,H,K,oe,re);else if(Xe=C(N),typeof Xe=="function")for(N=Xe.call(N),Xe=0;!(X=N.next()).done;)X=X.value,oe=nt+ut(X,Xe++),he+=w(X,H,K,oe,re);else if(oe==="object"){if(typeof N.then=="function")return w(G(N),H,K,X,re);throw H=String(N),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return he}function P(N,H,K){if(N==null)return N;var X=[],re=0;return w(N,X,"","",function(oe){return H.call(K,oe,re++)}),X}function J(N){if(N._status===-1){var H=N._result;H=H(),H.then(function(K){(N._status===0||N._status===-1)&&(N._status=1,N._result=K)},function(K){(N._status===0||N._status===-1)&&(N._status=2,N._result=K)}),N._status===-1&&(N._status=0,N._result=H)}if(N._status===1)return N._result.default;throw N._result}var Se=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},ce={map:P,forEach:function(N,H,K){P(N,function(){H.apply(this,arguments)},K)},count:function(N){var H=0;return P(N,function(){H++}),H},toArray:function(N){return P(N,function(H){return H})||[]},only:function(N){if(!Ve(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return ue.Activity=v,ue.Children=ce,ue.Component=U,ue.Fragment=s,ue.Profiler=o,ue.PureComponent=Q,ue.StrictMode=l,ue.Suspense=y,ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ue.__COMPILER_RUNTIME={__proto__:null,c:function(N){return M.H.useMemoCache(N)}},ue.cache=function(N){return function(){return N.apply(null,arguments)}},ue.cacheSignal=function(){return null},ue.cloneElement=function(N,H,K){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var X=L({},N.props),re=N.key;if(H!=null)for(oe in H.key!==void 0&&(re=""+H.key),H)!te.call(H,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&H.ref===void 0||(X[oe]=H[oe]);var oe=arguments.length-2;if(oe===1)X.children=K;else if(1<oe){for(var he=Array(oe),nt=0;nt<oe;nt++)he[nt]=arguments[nt+2];X.children=he}return we(N.type,re,X)},ue.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},ue.createElement=function(N,H,K){var X,re={},oe=null;if(H!=null)for(X in H.key!==void 0&&(oe=""+H.key),H)te.call(H,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(re[X]=H[X]);var he=arguments.length-2;if(he===1)re.children=K;else if(1<he){for(var nt=Array(he),Xe=0;Xe<he;Xe++)nt[Xe]=arguments[Xe+2];re.children=nt}if(N&&N.defaultProps)for(X in he=N.defaultProps,he)re[X]===void 0&&(re[X]=he[X]);return we(N,oe,re)},ue.createRef=function(){return{current:null}},ue.forwardRef=function(N){return{$$typeof:m,render:N}},ue.isValidElement=Ve,ue.lazy=function(N){return{$$typeof:x,_payload:{_status:-1,_result:N},_init:J}},ue.memo=function(N,H){return{$$typeof:g,type:N,compare:H===void 0?null:H}},ue.startTransition=function(N){var H=M.T,K={};M.T=K;try{var X=N(),re=M.S;re!==null&&re(K,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(V,Se)}catch(oe){Se(oe)}finally{H!==null&&K.types!==null&&(H.types=K.types),M.T=H}},ue.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ue.use=function(N){return M.H.use(N)},ue.useActionState=function(N,H,K){return M.H.useActionState(N,H,K)},ue.useCallback=function(N,H){return M.H.useCallback(N,H)},ue.useContext=function(N){return M.H.useContext(N)},ue.useDebugValue=function(){},ue.useDeferredValue=function(N,H){return M.H.useDeferredValue(N,H)},ue.useEffect=function(N,H){return M.H.useEffect(N,H)},ue.useEffectEvent=function(N){return M.H.useEffectEvent(N)},ue.useId=function(){return M.H.useId()},ue.useImperativeHandle=function(N,H,K){return M.H.useImperativeHandle(N,H,K)},ue.useInsertionEffect=function(N,H){return M.H.useInsertionEffect(N,H)},ue.useLayoutEffect=function(N,H){return M.H.useLayoutEffect(N,H)},ue.useMemo=function(N,H){return M.H.useMemo(N,H)},ue.useOptimistic=function(N,H){return M.H.useOptimistic(N,H)},ue.useReducer=function(N,H,K){return M.H.useReducer(N,H,K)},ue.useRef=function(N){return M.H.useRef(N)},ue.useState=function(N){return M.H.useState(N)},ue.useSyncExternalStore=function(N,H,K){return M.H.useSyncExternalStore(N,H,K)},ue.useTransition=function(){return M.H.useTransition()},ue.version="19.2.4",ue}var My;function Hh(){return My||(My=1,Wd.exports=C1()),Wd.exports}var $=Hh();const w1=N1($);var Zd={exports:{}},Ul={},$d={exports:{}},Jd={};var ky;function A1(){return ky||(ky=1,(function(i){function t(w,P){var J=w.length;w.push(P);e:for(;0<J;){var Se=J-1>>>1,ce=w[Se];if(0<o(ce,P))w[Se]=P,w[J]=ce,J=Se;else break e}}function s(w){return w.length===0?null:w[0]}function l(w){if(w.length===0)return null;var P=w[0],J=w.pop();if(J!==P){w[0]=J;e:for(var Se=0,ce=w.length,N=ce>>>1;Se<N;){var H=2*(Se+1)-1,K=w[H],X=H+1,re=w[X];if(0>o(K,J))X<ce&&0>o(re,K)?(w[Se]=re,w[X]=J,Se=X):(w[Se]=K,w[H]=J,Se=H);else if(X<ce&&0>o(re,J))w[Se]=re,w[X]=J,Se=X;else break e}}return P}function o(w,P){var J=w.sortIndex-P.sortIndex;return J!==0?J:w.id-P.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var y=[],g=[],x=1,v=null,b=3,C=!1,A=!1,L=!1,I=!1,U=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ee(w){for(var P=s(g);P!==null;){if(P.callback===null)l(g);else if(P.startTime<=w)l(g),P.sortIndex=P.expirationTime,t(y,P);else break;P=s(g)}}function Oe(w){if(L=!1,ee(w),!A)if(s(y)!==null)A=!0,V||(V=!0,me());else{var P=s(g);P!==null&&G(Oe,P.startTime-w)}}var V=!1,M=-1,te=5,we=-1;function mt(){return I?!0:!(i.unstable_now()-we<te)}function Ve(){if(I=!1,V){var w=i.unstable_now();we=w;var P=!0;try{e:{A=!1,L&&(L=!1,q(M),M=-1),C=!0;var J=b;try{t:{for(ee(w),v=s(y);v!==null&&!(v.expirationTime>w&&mt());){var Se=v.callback;if(typeof Se=="function"){v.callback=null,b=v.priorityLevel;var ce=Se(v.expirationTime<=w);if(w=i.unstable_now(),typeof ce=="function"){v.callback=ce,ee(w),P=!0;break t}v===s(y)&&l(y),ee(w)}else l(y);v=s(y)}if(v!==null)P=!0;else{var N=s(g);N!==null&&G(Oe,N.startTime-w),P=!1}}break e}finally{v=null,b=J,C=!1}P=void 0}}finally{P?me():V=!1}}}var me;if(typeof Q=="function")me=function(){Q(Ve)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,ut=ct.port2;ct.port1.onmessage=Ve,me=function(){ut.postMessage(null)}}else me=function(){U(Ve,0)};function G(w,P){M=U(function(){w(i.unstable_now())},P)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(w){w.callback=null},i.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<w?Math.floor(1e3/w):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(w){switch(b){case 1:case 2:case 3:var P=3;break;default:P=b}var J=b;b=P;try{return w()}finally{b=J}},i.unstable_requestPaint=function(){I=!0},i.unstable_runWithPriority=function(w,P){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var J=b;b=w;try{return P()}finally{b=J}},i.unstable_scheduleCallback=function(w,P,J){var Se=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Se+J:Se):J=Se,w){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=J+ce,w={id:x++,callback:P,priorityLevel:w,startTime:J,expirationTime:ce,sortIndex:-1},J>Se?(w.sortIndex=J,t(g,w),s(y)===null&&w===s(g)&&(L?(q(M),M=-1):L=!0,G(Oe,J-Se))):(w.sortIndex=ce,t(y,w),A||C||(A=!0,V||(V=!0,me()))),w},i.unstable_shouldYield=mt,i.unstable_wrapCallback=function(w){var P=b;return function(){var J=b;b=P;try{return w.apply(this,arguments)}finally{b=J}}}})(Jd)),Jd}var Ly;function j1(){return Ly||(Ly=1,$d.exports=A1()),$d.exports}var Fd={exports:{}},At={};var Uy;function R1(){if(Uy)return At;Uy=1;var i=Hh();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,g,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:y,containerInfo:g,implementation:x}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,At.createPortal=function(y,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(y,g,null,x)},At.flushSync=function(y){var g=f.T,x=l.p;try{if(f.T=null,l.p=2,y)return y()}finally{f.T=g,l.p=x,l.d.f()}},At.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,l.d.C(y,g))},At.prefetchDNS=function(y){typeof y=="string"&&l.d.D(y)},At.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var x=g.as,v=m(x,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?l.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:C}):x==="script"&&l.d.X(y,{crossOrigin:v,integrity:b,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},At.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=m(g.as,g.crossOrigin);l.d.M(y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&l.d.M(y)},At.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,v=m(x,g.crossOrigin);l.d.L(y,x,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},At.preloadModule=function(y,g){if(typeof y=="string")if(g){var x=m(g.as,g.crossOrigin);l.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else l.d.m(y)},At.requestFormReset=function(y){l.d.r(y)},At.unstable_batchedUpdates=function(y,g){return y(g)},At.useFormState=function(y,g,x){return f.H.useFormState(y,g,x)},At.useFormStatus=function(){return f.H.useHostTransitionStatus()},At.version="19.2.4",At}var zy;function O1(){if(zy)return Fd.exports;zy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Fd.exports=R1(),Fd.exports}var Hy;function I1(){if(Hy)return Ul;Hy=1;var i=j1(),t=Hh(),s=O1();function l(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(u(e)!==e)throw Error(l(188))}function g(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(l(188));return n!==e?null:e}for(var a=e,r=n;;){var c=a.return;if(c===null)break;var h=c.alternate;if(h===null){if(r=c.return,r!==null){a=r;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===a)return y(c),e;if(h===r)return y(c),n;h=h.sibling}throw Error(l(188))}if(a.return!==r.return)a=c,r=h;else{for(var p=!1,_=c.child;_;){if(_===a){p=!0,a=c,r=h;break}if(_===r){p=!0,r=c,a=h;break}_=_.sibling}if(!p){for(_=h.child;_;){if(_===a){p=!0,a=h,r=c;break}if(_===r){p=!0,r=h,a=c;break}_=_.sibling}if(!p)throw Error(l(189))}}if(a.alternate!==r)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),we=Symbol.for("react.activity"),mt=Symbol.for("react.memo_cache_sentinel"),Ve=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=Ve&&e[Ve]||e["@@iterator"],typeof e=="function"?e:null)}var ct=Symbol.for("react.client.reference");function ut(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ct?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case U:return"Profiler";case I:return"StrictMode";case Oe:return"Suspense";case V:return"SuspenseList";case we:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case Q:return e.displayName||"Context";case q:return(e._context.displayName||"Context")+".Consumer";case ee:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:ut(e.type)||"Memo";case te:n=e._payload,e=e._init;try{return ut(e(n))}catch{}}return null}var G=Array.isArray,w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Se=[],ce=-1;function N(e){return{current:e}}function H(e){0>ce||(e.current=Se[ce],Se[ce]=null,ce--)}function K(e,n){ce++,Se[ce]=e.current,e.current=n}var X=N(null),re=N(null),oe=N(null),he=N(null);function nt(e,n){switch(K(oe,n),K(re,e),K(X,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?ey(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=ey(n),e=ty(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(X),K(X,e)}function Xe(){H(X),H(re),H(oe)}function Ks(e){e.memoizedState!==null&&K(he,e);var n=X.current,a=ty(n,e.type);n!==a&&(K(re,e),K(X,a))}function Ti(e){re.current===e&&(H(X),H(re)),he.current===e&&(H(he),Il._currentValue=J)}var Ci,Ba;function Nn(e){if(Ci===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Ci=n&&n[1]||"",Ba=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ci+e+Ba}var wi=!1;function Pa(e,n){if(!e||wi)return"";wi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(n){var B=function(){throw Error()};if(Object.defineProperty(B.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(B,[])}catch(D){var O=D}Reflect.construct(e,[],B)}else{try{B.call()}catch(D){O=D}e.call(B.prototype)}}else{try{throw Error()}catch(D){O=D}(B=e())&&typeof B.catch=="function"&&B.catch(function(){})}}catch(D){if(D&&O&&typeof D.stack=="string")return[D.stack,O.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=r.DetermineComponentFrameRoot(),p=h[0],_=h[1];if(p&&_){var S=p.split(`
`),R=_.split(`
`);for(c=r=0;r<S.length&&!S[r].includes("DetermineComponentFrameRoot");)r++;for(;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;if(r===S.length||c===R.length)for(r=S.length-1,c=R.length-1;1<=r&&0<=c&&S[r]!==R[c];)c--;for(;1<=r&&0<=c;r--,c--)if(S[r]!==R[c]){if(r!==1||c!==1)do if(r--,c--,0>c||S[r]!==R[c]){var k=`
`+S[r].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=r&&0<=c);break}}}finally{wi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Nn(a):""}function Ai(e,n){switch(e.tag){case 26:case 27:case 5:return Nn(e.type);case 16:return Nn("Lazy");case 13:return e.child!==n&&n!==null?Nn("Suspense Fallback"):Nn("Suspense");case 19:return Nn("SuspenseList");case 0:case 15:return Pa(e.type,!1);case 11:return Pa(e.type.render,!1);case 1:return Pa(e.type,!0);case 31:return Nn("Activity");default:return""}}function Ft(e){try{var n="",a=null;do n+=Ai(e,a),a=e,e=e.return;while(e);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var In=Object.prototype.hasOwnProperty,qa=i.unstable_scheduleCallback,Ga=i.unstable_cancelCallback,Dc=i.unstable_shouldYield,Mc=i.unstable_requestPaint,jt=i.unstable_now,xr=i.unstable_getCurrentPriorityLevel,Ut=i.unstable_ImmediatePriority,ji=i.unstable_UserBlockingPriority,Xs=i.unstable_NormalPriority,Va=i.unstable_LowPriority,Sr=i.unstable_IdlePriority,Ri=i.log,kc=i.unstable_setDisableYieldValue,Oi=null,wt=null;function mn(e){if(typeof Ri=="function"&&kc(e),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Oi,e)}catch{}}var Rt=Math.clz32?Math.clz32:Qa,Nr=Math.log,Ya=Math.LN2;function Qa(e){return e>>>=0,e===0?32:31-(Nr(e)/Ya|0)|0}var pt=256,Be=262144,Ae=4194304;function Re(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ie(e,n,a){var r=e.pendingLanes;if(r===0)return 0;var c=0,h=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var _=r&134217727;return _!==0?(r=_&~h,r!==0?c=Re(r):(p&=_,p!==0?c=Re(p):a||(a=_&~e,a!==0&&(c=Re(a))))):(_=r&~h,_!==0?c=Re(_):p!==0?c=Re(p):a||(a=r&~e,a!==0&&(c=Re(a)))),c===0?0:n!==0&&n!==c&&(n&h)===0&&(h=c&-c,a=n&-n,h>=a||h===32&&(a&4194048)!==0)?n:c}function st(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ot(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(){var e=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),e}function Tr(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function En(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Lc(e,n,a,r,c,h){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,S=e.expirationTimes,R=e.hiddenUpdates;for(a=p&~a;0<a;){var k=31-Rt(a),B=1<<k;_[k]=0,S[k]=-1;var O=R[k];if(O!==null)for(R[k]=null,k=0;k<O.length;k++){var D=O[k];D!==null&&(D.lane&=-536870913)}a&=~B}r!==0&&Lf(e,r,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(p&~n))}function Lf(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var r=31-Rt(n);e.entangledLanes|=n,e.entanglements[r]=e.entanglements[r]|1073741824|a&261930}function Uf(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var r=31-Rt(a),c=1<<r;c&n|e[r]&n&&(e[r]|=n),a&=~c}}function zf(e,n){var a=n&-n;return a=(a&42)!==0?1:Uc(a),(a&(e.suspendedLanes|n))!==0?0:a}function Uc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function zc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Hf(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:Ey(e.type))}function Bf(e,n){var a=P.p;try{return P.p=e,n()}finally{P.p=a}}var ls=Math.random().toString(36).slice(2),bt="__reactFiber$"+ls,zt="__reactProps$"+ls,Ii="__reactContainer$"+ls,Hc="__reactEvents$"+ls,hb="__reactListeners$"+ls,fb="__reactHandles$"+ls,Pf="__reactResources$"+ls,Ka="__reactMarker$"+ls;function Bc(e){delete e[bt],delete e[zt],delete e[Hc],delete e[hb],delete e[fb]}function Di(e){var n=e[bt];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Ii]||a[bt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=oy(e);e!==null;){if(a=e[bt])return a;e=oy(e)}return n}e=a,a=e.parentNode}return null}function Mi(e){if(e=e[bt]||e[Ii]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Xa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(l(33))}function ki(e){var n=e[Pf];return n||(n=e[Pf]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function gt(e){e[Ka]=!0}var qf=new Set,Gf={};function Ws(e,n){Li(e,n),Li(e+"Capture",n)}function Li(e,n){for(Gf[e]=n,e=0;e<n.length;e++)qf.add(n[e])}var mb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vf={},Yf={};function pb(e){return In.call(Yf,e)?!0:In.call(Vf,e)?!1:mb.test(e)?Yf[e]=!0:(Vf[e]=!0,!1)}function Cr(e,n,a){if(pb(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var r=n.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function wr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Dn(e,n,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+r)}}function en(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qf(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function gb(e,n,a){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,h=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(p){a=""+p,h.call(this,p)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Pc(e){if(!e._valueTracker){var n=Qf(e)?"checked":"value";e._valueTracker=gb(e,n,""+e[n])}}function Kf(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),r="";return e&&(r=Qf(e)?e.checked?"true":"false":e.value),e=r,e!==a?(n.setValue(e),!0):!1}function Ar(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var yb=/[\n"\\]/g;function tn(e){return e.replace(yb,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function qc(e,n,a,r,c,h,p,_){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),n!=null?p==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+en(n)):e.value!==""+en(n)&&(e.value=""+en(n)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),n!=null?Gc(e,p,en(n)):a!=null?Gc(e,p,en(a)):r!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+en(_):e.removeAttribute("name")}function Xf(e,n,a,r,c,h,p,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){Pc(e);return}a=a!=null?""+en(a):"",n=n!=null?""+en(n):a,_||n===e.value||(e.value=n),e.defaultValue=n}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=_?e.checked:!!r,e.defaultChecked=!!r,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Pc(e)}function Gc(e,n,a){n==="number"&&Ar(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ui(e,n,a,r){if(e=e.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=n.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&r&&(e[a].defaultSelected=!0)}else{for(a=""+en(a),n=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Wf(e,n,a){if(n!=null&&(n=""+en(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+en(a):""}function Zf(e,n,a,r){if(n==null){if(r!=null){if(a!=null)throw Error(l(92));if(G(r)){if(1<r.length)throw Error(l(93));r=r[0]}a=r}a==null&&(a=""),n=a}a=en(n),e.defaultValue=a,r=e.textContent,r===a&&r!==""&&r!==null&&(e.value=r),Pc(e)}function zi(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var _b=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $f(e,n,a){var r=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":r?e.setProperty(n,a):typeof a!="number"||a===0||_b.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Jf(e,n,a){if(n!=null&&typeof n!="object")throw Error(l(62));if(e=e.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||n!=null&&n.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in n)r=n[c],n.hasOwnProperty(c)&&a[c]!==r&&$f(e,c,r)}else for(var h in n)n.hasOwnProperty(h)&&$f(e,h,n[h])}function Vc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jr(e){return bb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mn(){}var Yc=null;function Qc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hi=null,Bi=null;function Ff(e){var n=Mi(e);if(n&&(e=n.stateNode)){var a=e[zt]||null;e:switch(e=n.stateNode,n.type){case"input":if(qc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+tn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var r=a[n];if(r!==e&&r.form===e.form){var c=r[zt]||null;if(!c)throw Error(l(90));qc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)r=a[n],r.form===e.form&&Kf(r)}break e;case"textarea":Wf(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Ui(e,!!a.multiple,n,!1)}}}var Kc=!1;function em(e,n,a){if(Kc)return e(n,a);Kc=!0;try{var r=e(n);return r}finally{if(Kc=!1,(Hi!==null||Bi!==null)&&(yo(),Hi&&(n=Hi,e=Bi,Bi=Hi=null,Ff(n),e)))for(n=0;n<e.length;n++)Ff(e[n])}}function Wa(e,n){var a=e.stateNode;if(a===null)return null;var r=a[zt]||null;if(r===null)return null;a=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,n,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xc=!1;if(kn)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){Xc=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{Xc=!1}var rs=null,Wc=null,Rr=null;function tm(){if(Rr)return Rr;var e,n=Wc,a=n.length,r,c="value"in rs?rs.value:rs.textContent,h=c.length;for(e=0;e<a&&n[e]===c[e];e++);var p=a-e;for(r=1;r<=p&&n[a-r]===c[h-r];r++);return Rr=c.slice(e,1<r?1-r:void 0)}function Or(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ir(){return!0}function nm(){return!1}function Ht(e){function n(a,r,c,h,p){this._reactName=a,this._targetInst=c,this.type=r,this.nativeEvent=h,this.target=p,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ir:nm,this.isPropagationStopped=nm,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),n}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dr=Ht(Zs),$a=v({},Zs,{view:0,detail:0}),xb=Ht($a),Zc,$c,Ja,Mr=v({},$a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ja&&(Ja&&e.type==="mousemove"?(Zc=e.screenX-Ja.screenX,$c=e.screenY-Ja.screenY):$c=Zc=0,Ja=e),Zc)},movementY:function(e){return"movementY"in e?e.movementY:$c}}),sm=Ht(Mr),Sb=v({},Mr,{dataTransfer:0}),Nb=Ht(Sb),Eb=v({},$a,{relatedTarget:0}),Jc=Ht(Eb),Tb=v({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Cb=Ht(Tb),wb=v({},Zs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ab=Ht(wb),jb=v({},Zs,{data:0}),im=Ht(jb),Rb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ob={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ib={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Db(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Ib[e])?!!n[e]:!1}function Fc(){return Db}var Mb=v({},$a,{key:function(e){if(e.key){var n=Rb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Or(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ob[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fc,charCode:function(e){return e.type==="keypress"?Or(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Or(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kb=Ht(Mb),Lb=v({},Mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),am=Ht(Lb),Ub=v({},$a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fc}),zb=Ht(Ub),Hb=v({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bb=Ht(Hb),Pb=v({},Mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qb=Ht(Pb),Gb=v({},Zs,{newState:0,oldState:0}),Vb=Ht(Gb),Yb=[9,13,27,32],eu=kn&&"CompositionEvent"in window,Fa=null;kn&&"documentMode"in document&&(Fa=document.documentMode);var Qb=kn&&"TextEvent"in window&&!Fa,lm=kn&&(!eu||Fa&&8<Fa&&11>=Fa),rm=" ",om=!1;function cm(e,n){switch(e){case"keyup":return Yb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function um(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pi=!1;function Kb(e,n){switch(e){case"compositionend":return um(n);case"keypress":return n.which!==32?null:(om=!0,rm);case"textInput":return e=n.data,e===rm&&om?null:e;default:return null}}function Xb(e,n){if(Pi)return e==="compositionend"||!eu&&cm(e,n)?(e=tm(),Rr=Wc=rs=null,Pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return lm&&n.locale!=="ko"?null:n.data;default:return null}}var Wb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Wb[e.type]:n==="textarea"}function hm(e,n,a,r){Hi?Bi?Bi.push(r):Bi=[r]:Hi=r,n=Eo(n,"onChange"),0<n.length&&(a=new Dr("onChange","change",null,a,r),e.push({event:a,listeners:n}))}var el=null,tl=null;function Zb(e){Xg(e,0)}function kr(e){var n=Xa(e);if(Kf(n))return e}function fm(e,n){if(e==="change")return n}var mm=!1;if(kn){var tu;if(kn){var nu="oninput"in document;if(!nu){var pm=document.createElement("div");pm.setAttribute("oninput","return;"),nu=typeof pm.oninput=="function"}tu=nu}else tu=!1;mm=tu&&(!document.documentMode||9<document.documentMode)}function gm(){el&&(el.detachEvent("onpropertychange",ym),tl=el=null)}function ym(e){if(e.propertyName==="value"&&kr(tl)){var n=[];hm(n,tl,e,Qc(e)),em(Zb,n)}}function $b(e,n,a){e==="focusin"?(gm(),el=n,tl=a,el.attachEvent("onpropertychange",ym)):e==="focusout"&&gm()}function Jb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kr(tl)}function Fb(e,n){if(e==="click")return kr(n)}function ex(e,n){if(e==="input"||e==="change")return kr(n)}function tx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Qt=typeof Object.is=="function"?Object.is:tx;function nl(e,n){if(Qt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),r=Object.keys(n);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var c=a[r];if(!In.call(n,c)||!Qt(e[c],n[c]))return!1}return!0}function _m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vm(e,n){var a=_m(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=n&&r>=n)return{node:a,offset:n-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_m(a)}}function bm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?bm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function xm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ar(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Ar(e.document)}return n}function su(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var nx=kn&&"documentMode"in document&&11>=document.documentMode,qi=null,iu=null,sl=null,au=!1;function Sm(e,n,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;au||qi==null||qi!==Ar(r)||(r=qi,"selectionStart"in r&&su(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sl&&nl(sl,r)||(sl=r,r=Eo(iu,"onSelect"),0<r.length&&(n=new Dr("onSelect","select",null,n,a),e.push({event:n,listeners:r}),n.target=qi)))}function $s(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Gi={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},lu={},Nm={};kn&&(Nm=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function Js(e){if(lu[e])return lu[e];if(!Gi[e])return e;var n=Gi[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Nm)return lu[e]=n[a];return e}var Em=Js("animationend"),Tm=Js("animationiteration"),Cm=Js("animationstart"),sx=Js("transitionrun"),ix=Js("transitionstart"),ax=Js("transitioncancel"),wm=Js("transitionend"),Am=new Map,ru="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ru.push("scrollEnd");function pn(e,n){Am.set(e,n),Ws(n,[e])}var Lr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},nn=[],Vi=0,ou=0;function Ur(){for(var e=Vi,n=ou=Vi=0;n<e;){var a=nn[n];nn[n++]=null;var r=nn[n];nn[n++]=null;var c=nn[n];nn[n++]=null;var h=nn[n];if(nn[n++]=null,r!==null&&c!==null){var p=r.pending;p===null?c.next=c:(c.next=p.next,p.next=c),r.pending=c}h!==0&&jm(a,c,h)}}function zr(e,n,a,r){nn[Vi++]=e,nn[Vi++]=n,nn[Vi++]=a,nn[Vi++]=r,ou|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function cu(e,n,a,r){return zr(e,n,a,r),Hr(e)}function Fs(e,n){return zr(e,null,null,n),Hr(e)}function jm(e,n,a){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a);for(var c=!1,h=e.return;h!==null;)h.childLanes|=a,r=h.alternate,r!==null&&(r.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,c&&n!==null&&(c=31-Rt(a),e=h.hiddenUpdates,r=e[c],r===null?e[c]=[n]:r.push(n),n.lane=a|536870912),h):null}function Hr(e){if(50<Tl)throw Tl=0,_d=null,Error(l(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Yi={};function lx(e,n,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,n,a,r){return new lx(e,n,a,r)}function uu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ln(e,n){var a=e.alternate;return a===null?(a=Kt(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Rm(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Br(e,n,a,r,c,h){var p=0;if(r=e,typeof e=="function")uu(e)&&(p=1);else if(typeof e=="string")p=d1(e,a,X.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case we:return e=Kt(31,a,n,c),e.elementType=we,e.lanes=h,e;case L:return ei(a.children,c,h,n);case I:p=8,c|=24;break;case U:return e=Kt(12,a,n,c|2),e.elementType=U,e.lanes=h,e;case Oe:return e=Kt(13,a,n,c),e.elementType=Oe,e.lanes=h,e;case V:return e=Kt(19,a,n,c),e.elementType=V,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:p=10;break e;case q:p=9;break e;case ee:p=11;break e;case M:p=14;break e;case te:p=16,r=null;break e}p=29,a=Error(l(130,e===null?"null":typeof e,"")),r=null}return n=Kt(p,a,n,c),n.elementType=e,n.type=r,n.lanes=h,n}function ei(e,n,a,r){return e=Kt(7,e,r,n),e.lanes=a,e}function du(e,n,a){return e=Kt(6,e,null,n),e.lanes=a,e}function Om(e){var n=Kt(18,null,null,0);return n.stateNode=e,n}function hu(e,n,a){return n=Kt(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Im=new WeakMap;function sn(e,n){if(typeof e=="object"&&e!==null){var a=Im.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Ft(n)},Im.set(e,n),n)}return{value:e,source:n,stack:Ft(n)}}var Qi=[],Ki=0,Pr=null,il=0,an=[],ln=0,os=null,Tn=1,Cn="";function Un(e,n){Qi[Ki++]=il,Qi[Ki++]=Pr,Pr=e,il=n}function Dm(e,n,a){an[ln++]=Tn,an[ln++]=Cn,an[ln++]=os,os=e;var r=Tn;e=Cn;var c=32-Rt(r)-1;r&=~(1<<c),a+=1;var h=32-Rt(n)+c;if(30<h){var p=c-c%5;h=(r&(1<<p)-1).toString(32),r>>=p,c-=p,Tn=1<<32-Rt(n)+c|a<<c|r,Cn=h+e}else Tn=1<<h|a<<c|r,Cn=e}function fu(e){e.return!==null&&(Un(e,1),Dm(e,1,0))}function mu(e){for(;e===Pr;)Pr=Qi[--Ki],Qi[Ki]=null,il=Qi[--Ki],Qi[Ki]=null;for(;e===os;)os=an[--ln],an[ln]=null,Cn=an[--ln],an[ln]=null,Tn=an[--ln],an[ln]=null}function Mm(e,n){an[ln++]=Tn,an[ln++]=Cn,an[ln++]=os,Tn=n.id,Cn=n.overflow,os=e}var xt=null,Ye=null,Ne=!1,cs=null,rn=!1,pu=Error(l(519));function us(e){var n=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw al(sn(n,e)),pu}function km(e){var n=e.stateNode,a=e.type,r=e.memoizedProps;switch(n[bt]=e,n[zt]=r,a){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(a=0;a<wl.length;a++)_e(wl[a],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":_e("invalid",n),Xf(n,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":_e("invalid",n);break;case"textarea":_e("invalid",n),Zf(n,r.value,r.defaultValue,r.children)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||r.suppressHydrationWarning===!0||Jg(n.textContent,a)?(r.popover!=null&&(_e("beforetoggle",n),_e("toggle",n)),r.onScroll!=null&&_e("scroll",n),r.onScrollEnd!=null&&_e("scrollend",n),r.onClick!=null&&(n.onclick=Mn),n=!0):n=!1,n||us(e,!0)}function Lm(e){for(xt=e.return;xt;)switch(xt.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:xt=xt.return}}function Xi(e){if(e!==xt)return!1;if(!Ne)return Lm(e),Ne=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Dd(e.type,e.memoizedProps)),a=!a),a&&Ye&&us(e),Lm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ye=ry(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ye=ry(e)}else n===27?(n=Ye,Es(e.type)?(e=zd,zd=null,Ye=e):Ye=n):Ye=xt?cn(e.stateNode.nextSibling):null;return!0}function ti(){Ye=xt=null,Ne=!1}function gu(){var e=cs;return e!==null&&(Gt===null?Gt=e:Gt.push.apply(Gt,e),cs=null),e}function al(e){cs===null?cs=[e]:cs.push(e)}var yu=N(null),ni=null,zn=null;function ds(e,n,a){K(yu,n._currentValue),n._currentValue=a}function Hn(e){e._currentValue=yu.current,H(yu)}function _u(e,n,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===a)break;e=e.return}}function vu(e,n,a,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var p=c.child;h=h.firstContext;e:for(;h!==null;){var _=h;h=c;for(var S=0;S<n.length;S++)if(_.context===n[S]){h.lanes|=a,_=h.alternate,_!==null&&(_.lanes|=a),_u(h.return,a,e),r||(p=null);break e}h=_.next}}else if(c.tag===18){if(p=c.return,p===null)throw Error(l(341));p.lanes|=a,h=p.alternate,h!==null&&(h.lanes|=a),_u(p,a,e),p=null}else p=c.child;if(p!==null)p.return=c;else for(p=c;p!==null;){if(p===e){p=null;break}if(c=p.sibling,c!==null){c.return=p.return,p=c;break}p=p.return}c=p}}function Wi(e,n,a,r){e=null;for(var c=n,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var p=c.alternate;if(p===null)throw Error(l(387));if(p=p.memoizedProps,p!==null){var _=c.type;Qt(c.pendingProps.value,p.value)||(e!==null?e.push(_):e=[_])}}else if(c===he.current){if(p=c.alternate,p===null)throw Error(l(387));p.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Il):e=[Il])}c=c.return}e!==null&&vu(n,e,a,r),n.flags|=262144}function qr(e){for(e=e.firstContext;e!==null;){if(!Qt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function si(e){ni=e,zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function St(e){return Um(ni,e)}function Gr(e,n){return ni===null&&si(e),Um(e,n)}function Um(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},zn===null){if(e===null)throw Error(l(308));zn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else zn=zn.next=n;return a}var rx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,r){e.push(r)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},ox=i.unstable_scheduleCallback,cx=i.unstable_NormalPriority,it={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bu(){return{controller:new rx,data:new Map,refCount:0}}function ll(e){e.refCount--,e.refCount===0&&ox(cx,function(){e.controller.abort()})}var rl=null,xu=0,Zi=0,$i=null;function ux(e,n){if(rl===null){var a=rl=[];xu=0,Zi=Ed(),$i={status:"pending",value:void 0,then:function(r){a.push(r)}}}return xu++,n.then(zm,zm),n}function zm(){if(--xu===0&&rl!==null){$i!==null&&($i.status="fulfilled");var e=rl;rl=null,Zi=0,$i=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function dx(e,n){var a=[],r={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){r.status="fulfilled",r.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(r.status="rejected",r.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),r}var Hm=w.S;w.S=function(e,n){Sg=jt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&ux(e,n),Hm!==null&&Hm(e,n)};var ii=N(null);function Su(){var e=ii.current;return e!==null?e:Pe.pooledCache}function Vr(e,n){n===null?K(ii,ii.current):K(ii,n.pool)}function Bm(){var e=Su();return e===null?null:{parent:it._currentValue,pool:e}}var Ji=Error(l(460)),Nu=Error(l(474)),Yr=Error(l(542)),Qr={then:function(){}};function Pm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function qm(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Mn,Mn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Vm(e),e;default:if(typeof n.status=="string")n.then(Mn,Mn);else{if(e=Pe,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=n,e.status="pending",e.then(function(r){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=r}},function(r){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=r}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Vm(e),e}throw li=n,Ji}}function ai(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(li=a,Ji):a}}var li=null;function Gm(){if(li===null)throw Error(l(459));var e=li;return li=null,e}function Vm(e){if(e===Ji||e===Yr)throw Error(l(483))}var Fi=null,ol=0;function Kr(e){var n=ol;return ol+=1,Fi===null&&(Fi=[]),qm(Fi,e,n)}function cl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Xr(e,n){throw n.$$typeof===b?Error(l(525)):(e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Ym(e){function n(T,E){if(e){var j=T.deletions;j===null?(T.deletions=[E],T.flags|=16):j.push(E)}}function a(T,E){if(!e)return null;for(;E!==null;)n(T,E),E=E.sibling;return null}function r(T){for(var E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function c(T,E){return T=Ln(T,E),T.index=0,T.sibling=null,T}function h(T,E,j){return T.index=j,e?(j=T.alternate,j!==null?(j=j.index,j<E?(T.flags|=67108866,E):j):(T.flags|=67108866,E)):(T.flags|=1048576,E)}function p(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function _(T,E,j,z){return E===null||E.tag!==6?(E=du(j,T.mode,z),E.return=T,E):(E=c(E,j),E.return=T,E)}function S(T,E,j,z){var F=j.type;return F===L?k(T,E,j.props.children,z,j.key):E!==null&&(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===te&&ai(F)===E.type)?(E=c(E,j.props),cl(E,j),E.return=T,E):(E=Br(j.type,j.key,j.props,null,T.mode,z),cl(E,j),E.return=T,E)}function R(T,E,j,z){return E===null||E.tag!==4||E.stateNode.containerInfo!==j.containerInfo||E.stateNode.implementation!==j.implementation?(E=hu(j,T.mode,z),E.return=T,E):(E=c(E,j.children||[]),E.return=T,E)}function k(T,E,j,z,F){return E===null||E.tag!==7?(E=ei(j,T.mode,z,F),E.return=T,E):(E=c(E,j),E.return=T,E)}function B(T,E,j){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=du(""+E,T.mode,j),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case C:return j=Br(E.type,E.key,E.props,null,T.mode,j),cl(j,E),j.return=T,j;case A:return E=hu(E,T.mode,j),E.return=T,E;case te:return E=ai(E),B(T,E,j)}if(G(E)||me(E))return E=ei(E,T.mode,j,null),E.return=T,E;if(typeof E.then=="function")return B(T,Kr(E),j);if(E.$$typeof===Q)return B(T,Gr(T,E),j);Xr(T,E)}return null}function O(T,E,j,z){var F=E!==null?E.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return F!==null?null:_(T,E,""+j,z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case C:return j.key===F?S(T,E,j,z):null;case A:return j.key===F?R(T,E,j,z):null;case te:return j=ai(j),O(T,E,j,z)}if(G(j)||me(j))return F!==null?null:k(T,E,j,z,null);if(typeof j.then=="function")return O(T,E,Kr(j),z);if(j.$$typeof===Q)return O(T,E,Gr(T,j),z);Xr(T,j)}return null}function D(T,E,j,z,F){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return T=T.get(j)||null,_(E,T,""+z,F);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return T=T.get(z.key===null?j:z.key)||null,S(E,T,z,F);case A:return T=T.get(z.key===null?j:z.key)||null,R(E,T,z,F);case te:return z=ai(z),D(T,E,j,z,F)}if(G(z)||me(z))return T=T.get(j)||null,k(E,T,z,F,null);if(typeof z.then=="function")return D(T,E,j,Kr(z),F);if(z.$$typeof===Q)return D(T,E,j,Gr(E,z),F);Xr(E,z)}return null}function W(T,E,j,z){for(var F=null,Ee=null,Z=E,fe=E=0,xe=null;Z!==null&&fe<j.length;fe++){Z.index>fe?(xe=Z,Z=null):xe=Z.sibling;var Te=O(T,Z,j[fe],z);if(Te===null){Z===null&&(Z=xe);break}e&&Z&&Te.alternate===null&&n(T,Z),E=h(Te,E,fe),Ee===null?F=Te:Ee.sibling=Te,Ee=Te,Z=xe}if(fe===j.length)return a(T,Z),Ne&&Un(T,fe),F;if(Z===null){for(;fe<j.length;fe++)Z=B(T,j[fe],z),Z!==null&&(E=h(Z,E,fe),Ee===null?F=Z:Ee.sibling=Z,Ee=Z);return Ne&&Un(T,fe),F}for(Z=r(Z);fe<j.length;fe++)xe=D(Z,T,fe,j[fe],z),xe!==null&&(e&&xe.alternate!==null&&Z.delete(xe.key===null?fe:xe.key),E=h(xe,E,fe),Ee===null?F=xe:Ee.sibling=xe,Ee=xe);return e&&Z.forEach(function(js){return n(T,js)}),Ne&&Un(T,fe),F}function ne(T,E,j,z){if(j==null)throw Error(l(151));for(var F=null,Ee=null,Z=E,fe=E=0,xe=null,Te=j.next();Z!==null&&!Te.done;fe++,Te=j.next()){Z.index>fe?(xe=Z,Z=null):xe=Z.sibling;var js=O(T,Z,Te.value,z);if(js===null){Z===null&&(Z=xe);break}e&&Z&&js.alternate===null&&n(T,Z),E=h(js,E,fe),Ee===null?F=js:Ee.sibling=js,Ee=js,Z=xe}if(Te.done)return a(T,Z),Ne&&Un(T,fe),F;if(Z===null){for(;!Te.done;fe++,Te=j.next())Te=B(T,Te.value,z),Te!==null&&(E=h(Te,E,fe),Ee===null?F=Te:Ee.sibling=Te,Ee=Te);return Ne&&Un(T,fe),F}for(Z=r(Z);!Te.done;fe++,Te=j.next())Te=D(Z,T,fe,Te.value,z),Te!==null&&(e&&Te.alternate!==null&&Z.delete(Te.key===null?fe:Te.key),E=h(Te,E,fe),Ee===null?F=Te:Ee.sibling=Te,Ee=Te);return e&&Z.forEach(function(S1){return n(T,S1)}),Ne&&Un(T,fe),F}function Ue(T,E,j,z){if(typeof j=="object"&&j!==null&&j.type===L&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case C:e:{for(var F=j.key;E!==null;){if(E.key===F){if(F=j.type,F===L){if(E.tag===7){a(T,E.sibling),z=c(E,j.props.children),z.return=T,T=z;break e}}else if(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===te&&ai(F)===E.type){a(T,E.sibling),z=c(E,j.props),cl(z,j),z.return=T,T=z;break e}a(T,E);break}else n(T,E);E=E.sibling}j.type===L?(z=ei(j.props.children,T.mode,z,j.key),z.return=T,T=z):(z=Br(j.type,j.key,j.props,null,T.mode,z),cl(z,j),z.return=T,T=z)}return p(T);case A:e:{for(F=j.key;E!==null;){if(E.key===F)if(E.tag===4&&E.stateNode.containerInfo===j.containerInfo&&E.stateNode.implementation===j.implementation){a(T,E.sibling),z=c(E,j.children||[]),z.return=T,T=z;break e}else{a(T,E);break}else n(T,E);E=E.sibling}z=hu(j,T.mode,z),z.return=T,T=z}return p(T);case te:return j=ai(j),Ue(T,E,j,z)}if(G(j))return W(T,E,j,z);if(me(j)){if(F=me(j),typeof F!="function")throw Error(l(150));return j=F.call(j),ne(T,E,j,z)}if(typeof j.then=="function")return Ue(T,E,Kr(j),z);if(j.$$typeof===Q)return Ue(T,E,Gr(T,j),z);Xr(T,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,E!==null&&E.tag===6?(a(T,E.sibling),z=c(E,j),z.return=T,T=z):(a(T,E),z=du(j,T.mode,z),z.return=T,T=z),p(T)):a(T,E)}return function(T,E,j,z){try{ol=0;var F=Ue(T,E,j,z);return Fi=null,F}catch(Z){if(Z===Ji||Z===Yr)throw Z;var Ee=Kt(29,Z,null,T.mode);return Ee.lanes=z,Ee.return=T,Ee}}}var ri=Ym(!0),Qm=Ym(!1),hs=!1;function Eu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function fs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ms(e,n,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(je&2)!==0){var c=r.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),r.pending=n,n=Hr(e),jm(e,null,a),n}return zr(e,r,n,a),Hr(e)}function ul(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var r=n.lanes;r&=e.pendingLanes,a|=r,n.lanes=a,Uf(e,a)}}function Cu(e,n){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var c=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?c=h=p:h=h.next=p,a=a.next}while(a!==null);h===null?c=h=n:h=h.next=n}else c=h=n;a={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:r.shared,callbacks:r.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var wu=!1;function dl(){if(wu){var e=$i;if(e!==null)throw e}}function hl(e,n,a,r){wu=!1;var c=e.updateQueue;hs=!1;var h=c.firstBaseUpdate,p=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var S=_,R=S.next;S.next=null,p===null?h=R:p.next=R,p=S;var k=e.alternate;k!==null&&(k=k.updateQueue,_=k.lastBaseUpdate,_!==p&&(_===null?k.firstBaseUpdate=R:_.next=R,k.lastBaseUpdate=S))}if(h!==null){var B=c.baseState;p=0,k=R=S=null,_=h;do{var O=_.lane&-536870913,D=O!==_.lane;if(D?(be&O)===O:(r&O)===O){O!==0&&O===Zi&&(wu=!0),k!==null&&(k=k.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var W=e,ne=_;O=n;var Ue=a;switch(ne.tag){case 1:if(W=ne.payload,typeof W=="function"){B=W.call(Ue,B,O);break e}B=W;break e;case 3:W.flags=W.flags&-65537|128;case 0:if(W=ne.payload,O=typeof W=="function"?W.call(Ue,B,O):W,O==null)break e;B=v({},B,O);break e;case 2:hs=!0}}O=_.callback,O!==null&&(e.flags|=64,D&&(e.flags|=8192),D=c.callbacks,D===null?c.callbacks=[O]:D.push(O))}else D={lane:O,tag:_.tag,payload:_.payload,callback:_.callback,next:null},k===null?(R=k=D,S=B):k=k.next=D,p|=O;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;D=_,_=D.next,D.next=null,c.lastBaseUpdate=D,c.shared.pending=null}}while(!0);k===null&&(S=B),c.baseState=S,c.firstBaseUpdate=R,c.lastBaseUpdate=k,h===null&&(c.shared.lanes=0),vs|=p,e.lanes=p,e.memoizedState=B}}function Km(e,n){if(typeof e!="function")throw Error(l(191,e));e.call(n)}function Xm(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Km(a[e],n)}var ea=N(null),Wr=N(0);function Wm(e,n){e=Xn,K(Wr,e),K(ea,n),Xn=e|n.baseLanes}function Au(){K(Wr,Xn),K(ea,ea.current)}function ju(){Xn=Wr.current,H(ea),H(Wr)}var Xt=N(null),on=null;function ps(e){var n=e.alternate;K(Fe,Fe.current&1),K(Xt,e),on===null&&(n===null||ea.current!==null||n.memoizedState!==null)&&(on=e)}function Ru(e){K(Fe,Fe.current),K(Xt,e),on===null&&(on=e)}function Zm(e){e.tag===22?(K(Fe,Fe.current),K(Xt,e),on===null&&(on=e)):gs()}function gs(){K(Fe,Fe.current),K(Xt,Xt.current)}function Wt(e){H(Xt),on===e&&(on=null),H(Fe)}var Fe=N(0);function Zr(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ld(a)||Ud(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Bn=0,de=null,ke=null,at=null,$r=!1,ta=!1,oi=!1,Jr=0,fl=0,na=null,hx=0;function We(){throw Error(l(321))}function Ou(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Qt(e[a],n[a]))return!1;return!0}function Iu(e,n,a,r,c,h){return Bn=h,de=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,w.H=e===null||e.memoizedState===null?Dp:Ku,oi=!1,h=a(r,c),oi=!1,ta&&(h=Jm(n,a,r,c)),$m(e),h}function $m(e){w.H=gl;var n=ke!==null&&ke.next!==null;if(Bn=0,at=ke=de=null,$r=!1,fl=0,na=null,n)throw Error(l(300));e===null||lt||(e=e.dependencies,e!==null&&qr(e)&&(lt=!0))}function Jm(e,n,a,r){de=e;var c=0;do{if(ta&&(na=null),fl=0,ta=!1,25<=c)throw Error(l(301));if(c+=1,at=ke=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}w.H=Mp,h=n(a,r)}while(ta);return h}function fx(){var e=w.H,n=e.useState()[0];return n=typeof n.then=="function"?ml(n):n,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(de.flags|=1024),n}function Du(){var e=Jr!==0;return Jr=0,e}function Mu(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function ku(e){if($r){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}$r=!1}Bn=0,at=ke=de=null,ta=!1,fl=Jr=0,na=null}function It(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?de.memoizedState=at=e:at=at.next=e,at}function et(){if(ke===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var n=at===null?de.memoizedState:at.next;if(n!==null)at=n,ke=e;else{if(e===null)throw de.alternate===null?Error(l(467)):Error(l(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},at===null?de.memoizedState=at=e:at=at.next=e}return at}function Fr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(e){var n=fl;return fl+=1,na===null&&(na=[]),e=qm(na,e,n),n=de,(at===null?n.memoizedState:at.next)===null&&(n=n.alternate,w.H=n===null||n.memoizedState===null?Dp:Ku),e}function eo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ml(e);if(e.$$typeof===Q)return St(e)}throw Error(l(438,String(e)))}function Lu(e){var n=null,a=de.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var r=de.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(n={data:r.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Fr(),de.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),r=0;r<e;r++)a[r]=mt;return n.index++,a}function Pn(e,n){return typeof n=="function"?n(e):n}function to(e){var n=et();return Uu(n,ke,e)}function Uu(e,n,a){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=a;var c=e.baseQueue,h=r.pending;if(h!==null){if(c!==null){var p=c.next;c.next=h.next,h.next=p}n.baseQueue=c=h,r.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{n=c.next;var _=p=null,S=null,R=n,k=!1;do{var B=R.lane&-536870913;if(B!==R.lane?(be&B)===B:(Bn&B)===B){var O=R.revertLane;if(O===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),B===Zi&&(k=!0);else if((Bn&O)===O){R=R.next,O===Zi&&(k=!0);continue}else B={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(_=S=B,p=h):S=S.next=B,de.lanes|=O,vs|=O;B=R.action,oi&&a(h,B),h=R.hasEagerState?R.eagerState:a(h,B)}else O={lane:B,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(_=S=O,p=h):S=S.next=O,de.lanes|=B,vs|=B;R=R.next}while(R!==null&&R!==n);if(S===null?p=h:S.next=_,!Qt(h,e.memoizedState)&&(lt=!0,k&&(a=$i,a!==null)))throw a;e.memoizedState=h,e.baseState=p,e.baseQueue=S,r.lastRenderedState=h}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function zu(e){var n=et(),a=n.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var r=a.dispatch,c=a.pending,h=n.memoizedState;if(c!==null){a.pending=null;var p=c=c.next;do h=e(h,p.action),p=p.next;while(p!==c);Qt(h,n.memoizedState)||(lt=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),a.lastRenderedState=h}return[h,r]}function Fm(e,n,a){var r=de,c=et(),h=Ne;if(h){if(a===void 0)throw Error(l(407));a=a()}else a=n();var p=!Qt((ke||c).memoizedState,a);if(p&&(c.memoizedState=a,lt=!0),c=c.queue,Pu(np.bind(null,r,c,e),[e]),c.getSnapshot!==n||p||at!==null&&at.memoizedState.tag&1){if(r.flags|=2048,sa(9,{destroy:void 0},tp.bind(null,r,c,a,n),null),Pe===null)throw Error(l(349));h||(Bn&127)!==0||ep(r,n,a)}return a}function ep(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=de.updateQueue,n===null?(n=Fr(),de.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function tp(e,n,a,r){n.value=a,n.getSnapshot=r,sp(n)&&ip(e)}function np(e,n,a){return a(function(){sp(n)&&ip(e)})}function sp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Qt(e,a)}catch{return!0}}function ip(e){var n=Fs(e,2);n!==null&&Vt(n,e,2)}function Hu(e){var n=It();if(typeof e=="function"){var a=e;if(e=a(),oi){mn(!0);try{a()}finally{mn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:e},n}function ap(e,n,a,r){return e.baseState=a,Uu(e,ke,typeof r=="function"?r:Pn)}function mx(e,n,a,r,c){if(io(e))throw Error(l(485));if(e=n.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){h.listeners.push(p)}};w.T!==null?a(!0):h.isTransition=!1,r(h),a=n.pending,a===null?(h.next=n.pending=h,lp(n,h)):(h.next=a.next,n.pending=a.next=h)}}function lp(e,n){var a=n.action,r=n.payload,c=e.state;if(n.isTransition){var h=w.T,p={};w.T=p;try{var _=a(c,r),S=w.S;S!==null&&S(p,_),rp(e,n,_)}catch(R){Bu(e,n,R)}finally{h!==null&&p.types!==null&&(h.types=p.types),w.T=h}}else try{h=a(c,r),rp(e,n,h)}catch(R){Bu(e,n,R)}}function rp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){op(e,n,r)},function(r){return Bu(e,n,r)}):op(e,n,a)}function op(e,n,a){n.status="fulfilled",n.value=a,cp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,lp(e,a)))}function Bu(e,n,a){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do n.status="rejected",n.reason=a,cp(n),n=n.next;while(n!==r)}e.action=null}function cp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function up(e,n){return n}function dp(e,n){if(Ne){var a=Pe.formState;if(a!==null){e:{var r=de;if(Ne){if(Ye){t:{for(var c=Ye,h=rn;c.nodeType!==8;){if(!h){c=null;break t}if(c=cn(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){Ye=cn(c.nextSibling),r=c.data==="F!";break e}}us(r)}r=!1}r&&(n=a[0])}}return a=It(),a.memoizedState=a.baseState=n,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:up,lastRenderedState:n},a.queue=r,a=Rp.bind(null,de,r),r.dispatch=a,r=Hu(!1),h=Qu.bind(null,de,!1,r.queue),r=It(),c={state:n,dispatch:null,action:e,pending:null},r.queue=c,a=mx.bind(null,de,c,h,a),c.dispatch=a,r.memoizedState=e,[n,a,!1]}function hp(e){var n=et();return fp(n,ke,e)}function fp(e,n,a){if(n=Uu(e,n,up)[0],e=to(Pn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var r=ml(n)}catch(p){throw p===Ji?Yr:p}else r=n;n=et();var c=n.queue,h=c.dispatch;return a!==n.memoizedState&&(de.flags|=2048,sa(9,{destroy:void 0},px.bind(null,c,a),null)),[r,h,e]}function px(e,n){e.action=n}function mp(e){var n=et(),a=ke;if(a!==null)return fp(n,a,e);et(),n=n.memoizedState,a=et();var r=a.queue.dispatch;return a.memoizedState=e,[n,r,!1]}function sa(e,n,a,r){return e={tag:e,create:a,deps:r,inst:n,next:null},n=de.updateQueue,n===null&&(n=Fr(),de.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,n.lastEffect=e),e}function pp(){return et().memoizedState}function no(e,n,a,r){var c=It();de.flags|=e,c.memoizedState=sa(1|n,{destroy:void 0},a,r===void 0?null:r)}function so(e,n,a,r){var c=et();r=r===void 0?null:r;var h=c.memoizedState.inst;ke!==null&&r!==null&&Ou(r,ke.memoizedState.deps)?c.memoizedState=sa(n,h,a,r):(de.flags|=e,c.memoizedState=sa(1|n,h,a,r))}function gp(e,n){no(8390656,8,e,n)}function Pu(e,n){so(2048,8,e,n)}function gx(e){de.flags|=4;var n=de.updateQueue;if(n===null)n=Fr(),de.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function yp(e){var n=et().memoizedState;return gx({ref:n,nextImpl:e}),function(){if((je&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}function _p(e,n){return so(4,2,e,n)}function vp(e,n){return so(4,4,e,n)}function bp(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function xp(e,n,a){a=a!=null?a.concat([e]):null,so(4,4,bp.bind(null,n,e),a)}function qu(){}function Sp(e,n){var a=et();n=n===void 0?null:n;var r=a.memoizedState;return n!==null&&Ou(n,r[1])?r[0]:(a.memoizedState=[e,n],e)}function Np(e,n){var a=et();n=n===void 0?null:n;var r=a.memoizedState;if(n!==null&&Ou(n,r[1]))return r[0];if(r=e(),oi){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[r,n],r}function Gu(e,n,a){return a===void 0||(Bn&1073741824)!==0&&(be&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Eg(),de.lanes|=e,vs|=e,a)}function Ep(e,n,a,r){return Qt(a,n)?a:ea.current!==null?(e=Gu(e,a,r),Qt(e,n)||(lt=!0),e):(Bn&42)===0||(Bn&1073741824)!==0&&(be&261930)===0?(lt=!0,e.memoizedState=a):(e=Eg(),de.lanes|=e,vs|=e,n)}function Tp(e,n,a,r,c){var h=P.p;P.p=h!==0&&8>h?h:8;var p=w.T,_={};w.T=_,Qu(e,!1,n,a);try{var S=c(),R=w.S;if(R!==null&&R(_,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var k=dx(S,r);pl(e,n,k,Jt(e))}else pl(e,n,r,Jt(e))}catch(B){pl(e,n,{then:function(){},status:"rejected",reason:B},Jt())}finally{P.p=h,p!==null&&_.types!==null&&(p.types=_.types),w.T=p}}function yx(){}function Vu(e,n,a,r){if(e.tag!==5)throw Error(l(476));var c=Cp(e).queue;Tp(e,c,n,J,a===null?yx:function(){return wp(e),a(r)})}function Cp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:J},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function wp(e){var n=Cp(e);n.next===null&&(n=e.alternate.memoizedState),pl(e,n.next.queue,{},Jt())}function Yu(){return St(Il)}function Ap(){return et().memoizedState}function jp(){return et().memoizedState}function _x(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Jt();e=fs(a);var r=ms(n,e,a);r!==null&&(Vt(r,n,a),ul(r,n,a)),n={cache:bu()},e.payload=n;return}n=n.return}}function vx(e,n,a){var r=Jt();a={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},io(e)?Op(n,a):(a=cu(e,n,a,r),a!==null&&(Vt(a,e,r),Ip(a,n,r)))}function Rp(e,n,a){var r=Jt();pl(e,n,a,r)}function pl(e,n,a,r){var c={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(io(e))Op(n,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var p=n.lastRenderedState,_=h(p,a);if(c.hasEagerState=!0,c.eagerState=_,Qt(_,p))return zr(e,n,c,0),Pe===null&&Ur(),!1}catch{}if(a=cu(e,n,c,r),a!==null)return Vt(a,e,r),Ip(a,n,r),!0}return!1}function Qu(e,n,a,r){if(r={lane:2,revertLane:Ed(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},io(e)){if(n)throw Error(l(479))}else n=cu(e,a,r,2),n!==null&&Vt(n,e,2)}function io(e){var n=e.alternate;return e===de||n!==null&&n===de}function Op(e,n){ta=$r=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Ip(e,n,a){if((a&4194048)!==0){var r=n.lanes;r&=e.pendingLanes,a|=r,n.lanes=a,Uf(e,a)}}var gl={readContext:St,use:eo,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};gl.useEffectEvent=We;var Dp={readContext:St,use:eo,useCallback:function(e,n){return It().memoizedState=[e,n===void 0?null:n],e},useContext:St,useEffect:gp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,no(4194308,4,bp.bind(null,n,e),a)},useLayoutEffect:function(e,n){return no(4194308,4,e,n)},useInsertionEffect:function(e,n){no(4,2,e,n)},useMemo:function(e,n){var a=It();n=n===void 0?null:n;var r=e();if(oi){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[r,n],r},useReducer:function(e,n,a){var r=It();if(a!==void 0){var c=a(n);if(oi){mn(!0);try{a(n)}finally{mn(!1)}}}else c=n;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=vx.bind(null,de,e),[r.memoizedState,e]},useRef:function(e){var n=It();return e={current:e},n.memoizedState=e},useState:function(e){e=Hu(e);var n=e.queue,a=Rp.bind(null,de,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:qu,useDeferredValue:function(e,n){var a=It();return Gu(a,e,n)},useTransition:function(){var e=Hu(!1);return e=Tp.bind(null,de,e.queue,!0,!1),It().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var r=de,c=It();if(Ne){if(a===void 0)throw Error(l(407));a=a()}else{if(a=n(),Pe===null)throw Error(l(349));(be&127)!==0||ep(r,n,a)}c.memoizedState=a;var h={value:a,getSnapshot:n};return c.queue=h,gp(np.bind(null,r,h,e),[e]),r.flags|=2048,sa(9,{destroy:void 0},tp.bind(null,r,h,a,n),null),a},useId:function(){var e=It(),n=Pe.identifierPrefix;if(Ne){var a=Cn,r=Tn;a=(r&~(1<<32-Rt(r)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Jr++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=hx++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Yu,useFormState:dp,useActionState:dp,useOptimistic:function(e){var n=It();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Qu.bind(null,de,!0,a),a.dispatch=n,[e,n]},useMemoCache:Lu,useCacheRefresh:function(){return It().memoizedState=_x.bind(null,de)},useEffectEvent:function(e){var n=It(),a={impl:e};return n.memoizedState=a,function(){if((je&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},Ku={readContext:St,use:eo,useCallback:Sp,useContext:St,useEffect:Pu,useImperativeHandle:xp,useInsertionEffect:_p,useLayoutEffect:vp,useMemo:Np,useReducer:to,useRef:pp,useState:function(){return to(Pn)},useDebugValue:qu,useDeferredValue:function(e,n){var a=et();return Ep(a,ke.memoizedState,e,n)},useTransition:function(){var e=to(Pn)[0],n=et().memoizedState;return[typeof e=="boolean"?e:ml(e),n]},useSyncExternalStore:Fm,useId:Ap,useHostTransitionStatus:Yu,useFormState:hp,useActionState:hp,useOptimistic:function(e,n){var a=et();return ap(a,ke,e,n)},useMemoCache:Lu,useCacheRefresh:jp};Ku.useEffectEvent=yp;var Mp={readContext:St,use:eo,useCallback:Sp,useContext:St,useEffect:Pu,useImperativeHandle:xp,useInsertionEffect:_p,useLayoutEffect:vp,useMemo:Np,useReducer:zu,useRef:pp,useState:function(){return zu(Pn)},useDebugValue:qu,useDeferredValue:function(e,n){var a=et();return ke===null?Gu(a,e,n):Ep(a,ke.memoizedState,e,n)},useTransition:function(){var e=zu(Pn)[0],n=et().memoizedState;return[typeof e=="boolean"?e:ml(e),n]},useSyncExternalStore:Fm,useId:Ap,useHostTransitionStatus:Yu,useFormState:mp,useActionState:mp,useOptimistic:function(e,n){var a=et();return ke!==null?ap(a,ke,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Lu,useCacheRefresh:jp};Mp.useEffectEvent=yp;function Xu(e,n,a,r){n=e.memoizedState,a=a(r,n),a=a==null?n:v({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Wu={enqueueSetState:function(e,n,a){e=e._reactInternals;var r=Jt(),c=fs(r);c.payload=n,a!=null&&(c.callback=a),n=ms(e,c,r),n!==null&&(Vt(n,e,r),ul(n,e,r))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var r=Jt(),c=fs(r);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=ms(e,c,r),n!==null&&(Vt(n,e,r),ul(n,e,r))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Jt(),r=fs(a);r.tag=2,n!=null&&(r.callback=n),n=ms(e,r,a),n!==null&&(Vt(n,e,a),ul(n,e,a))}};function kp(e,n,a,r,c,h,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,h,p):n.prototype&&n.prototype.isPureReactComponent?!nl(a,r)||!nl(c,h):!0}function Lp(e,n,a,r){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,r),n.state!==e&&Wu.enqueueReplaceState(n,n.state,null)}function ci(e,n){var a=n;if("ref"in n){a={};for(var r in n)r!=="ref"&&(a[r]=n[r])}if(e=e.defaultProps){a===n&&(a=v({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function Up(e){Lr(e)}function zp(e){console.error(e)}function Hp(e){Lr(e)}function ao(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(r){setTimeout(function(){throw r})}}function Bp(e,n,a){try{var r=e.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Zu(e,n,a){return a=fs(a),a.tag=3,a.payload={element:null},a.callback=function(){ao(e,n)},a}function Pp(e){return e=fs(e),e.tag=3,e}function qp(e,n,a,r){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var h=r.value;e.payload=function(){return c(h)},e.callback=function(){Bp(n,a,r)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Bp(n,a,r),typeof c!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})})}function bx(e,n,a,r,c){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(n=a.alternate,n!==null&&Wi(n,a,c,!0),a=Xt.current,a!==null){switch(a.tag){case 31:case 13:return on===null?_o():a.alternate===null&&Ze===0&&(Ze=3),a.flags&=-257,a.flags|=65536,a.lanes=c,r===Qr?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([r]):n.add(r),xd(e,r,c)),!1;case 22:return a.flags|=65536,r===Qr?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([r]):a.add(r)),xd(e,r,c)),!1}throw Error(l(435,a.tag))}return xd(e,r,c),_o(),!1}if(Ne)return n=Xt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,r!==pu&&(e=Error(l(422),{cause:r}),al(sn(e,a)))):(r!==pu&&(n=Error(l(423),{cause:r}),al(sn(n,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=sn(r,a),c=Zu(e.stateNode,r,c),Cu(e,c),Ze!==4&&(Ze=2)),!1;var h=Error(l(520),{cause:r});if(h=sn(h,a),El===null?El=[h]:El.push(h),Ze!==4&&(Ze=2),n===null)return!0;r=sn(r,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Zu(a.stateNode,r,e),Cu(a,e),!1;case 1:if(n=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(bs===null||!bs.has(h))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Pp(c),qp(c,e,a,r),Cu(a,c),!1}a=a.return}while(a!==null);return!1}var $u=Error(l(461)),lt=!1;function Nt(e,n,a,r){n.child=e===null?Qm(n,null,a,r):ri(n,e.child,a,r)}function Gp(e,n,a,r,c){a=a.render;var h=n.ref;if("ref"in r){var p={};for(var _ in r)_!=="ref"&&(p[_]=r[_])}else p=r;return si(n),r=Iu(e,n,a,p,h,c),_=Du(),e!==null&&!lt?(Mu(e,n,c),qn(e,n,c)):(Ne&&_&&fu(n),n.flags|=1,Nt(e,n,r,c),n.child)}function Vp(e,n,a,r,c){if(e===null){var h=a.type;return typeof h=="function"&&!uu(h)&&h.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=h,Yp(e,n,h,r,c)):(e=Br(a.type,null,r,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!ad(e,c)){var p=h.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(p,r)&&e.ref===n.ref)return qn(e,n,c)}return n.flags|=1,e=Ln(h,r),e.ref=n.ref,e.return=n,n.child=e}function Yp(e,n,a,r,c){if(e!==null){var h=e.memoizedProps;if(nl(h,r)&&e.ref===n.ref)if(lt=!1,n.pendingProps=r=h,ad(e,c))(e.flags&131072)!==0&&(lt=!0);else return n.lanes=e.lanes,qn(e,n,c)}return Ju(e,n,a,r,c)}function Qp(e,n,a,r){var c=r.children,h=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,e!==null){for(r=n.child=e.child,c=0;r!==null;)c=c|r.lanes|r.childLanes,r=r.sibling;r=c&~h}else r=0,n.child=null;return Kp(e,n,h,a,r)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vr(n,h!==null?h.cachePool:null),h!==null?Wm(n,h):Au(),Zm(n);else return r=n.lanes=536870912,Kp(e,n,h!==null?h.baseLanes|a:a,a,r)}else h!==null?(Vr(n,h.cachePool),Wm(n,h),gs(),n.memoizedState=null):(e!==null&&Vr(n,null),Au(),gs());return Nt(e,n,c,a),n.child}function yl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Kp(e,n,a,r,c){var h=Su();return h=h===null?null:{parent:it._currentValue,pool:h},n.memoizedState={baseLanes:a,cachePool:h},e!==null&&Vr(n,null),Au(),Zm(n),e!==null&&Wi(e,n,r,!0),n.childLanes=c,null}function lo(e,n){return n=oo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Xp(e,n,a){return ri(n,e.child,null,a),e=lo(n,n.pendingProps),e.flags|=2,Wt(n),n.memoizedState=null,e}function xx(e,n,a){var r=n.pendingProps,c=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ne){if(r.mode==="hidden")return e=lo(n,r),n.lanes=536870912,yl(null,e);if(Ru(n),(e=Ye)?(e=ly(e,rn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:os!==null?{id:Tn,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},a=Om(e),a.return=n,n.child=a,xt=n,Ye=null)):e=null,e===null)throw us(n);return n.lanes=536870912,null}return lo(n,r)}var h=e.memoizedState;if(h!==null){var p=h.dehydrated;if(Ru(n),c)if(n.flags&256)n.flags&=-257,n=Xp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(l(558));else if(lt||Wi(e,n,a,!1),c=(a&e.childLanes)!==0,lt||c){if(r=Pe,r!==null&&(p=zf(r,a),p!==0&&p!==h.retryLane))throw h.retryLane=p,Fs(e,p),Vt(r,e,p),$u;_o(),n=Xp(e,n,a)}else e=h.treeContext,Ye=cn(p.nextSibling),xt=n,Ne=!0,cs=null,rn=!1,e!==null&&Mm(n,e),n=lo(n,r),n.flags|=4096;return n}return e=Ln(e.child,{mode:r.mode,children:r.children}),e.ref=n.ref,n.child=e,e.return=n,e}function ro(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Ju(e,n,a,r,c){return si(n),a=Iu(e,n,a,r,void 0,c),r=Du(),e!==null&&!lt?(Mu(e,n,c),qn(e,n,c)):(Ne&&r&&fu(n),n.flags|=1,Nt(e,n,a,c),n.child)}function Wp(e,n,a,r,c,h){return si(n),n.updateQueue=null,a=Jm(n,r,a,c),$m(e),r=Du(),e!==null&&!lt?(Mu(e,n,h),qn(e,n,h)):(Ne&&r&&fu(n),n.flags|=1,Nt(e,n,a,h),n.child)}function Zp(e,n,a,r,c){if(si(n),n.stateNode===null){var h=Yi,p=a.contextType;typeof p=="object"&&p!==null&&(h=St(p)),h=new a(r,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Wu,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=r,h.state=n.memoizedState,h.refs={},Eu(n),p=a.contextType,h.context=typeof p=="object"&&p!==null?St(p):Yi,h.state=n.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Xu(n,a,p,r),h.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(p=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),p!==h.state&&Wu.enqueueReplaceState(h,h.state,null),hl(n,r,h,c),dl(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),r=!0}else if(e===null){h=n.stateNode;var _=n.memoizedProps,S=ci(a,_);h.props=S;var R=h.context,k=a.contextType;p=Yi,typeof k=="object"&&k!==null&&(p=St(k));var B=a.getDerivedStateFromProps;k=typeof B=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,k||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||R!==p)&&Lp(n,h,r,p),hs=!1;var O=n.memoizedState;h.state=O,hl(n,r,h,c),dl(),R=n.memoizedState,_||O!==R||hs?(typeof B=="function"&&(Xu(n,a,B,r),R=n.memoizedState),(S=hs||kp(n,a,S,r,O,R,p))?(k||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=R),h.props=r,h.state=R,h.context=p,r=S):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{h=n.stateNode,Tu(e,n),p=n.memoizedProps,k=ci(a,p),h.props=k,B=n.pendingProps,O=h.context,R=a.contextType,S=Yi,typeof R=="object"&&R!==null&&(S=St(R)),_=a.getDerivedStateFromProps,(R=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==B||O!==S)&&Lp(n,h,r,S),hs=!1,O=n.memoizedState,h.state=O,hl(n,r,h,c),dl();var D=n.memoizedState;p!==B||O!==D||hs||e!==null&&e.dependencies!==null&&qr(e.dependencies)?(typeof _=="function"&&(Xu(n,a,_,r),D=n.memoizedState),(k=hs||kp(n,a,k,r,O,D,S)||e!==null&&e.dependencies!==null&&qr(e.dependencies))?(R||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,D,S),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,D,S)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=D),h.props=r,h.state=D,h.context=S,r=k):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),r=!1)}return h=r,ro(e,n),r=(n.flags&128)!==0,h||r?(h=n.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&r?(n.child=ri(n,e.child,null,c),n.child=ri(n,null,a,c)):Nt(e,n,a,c),n.memoizedState=h.state,e=n.child):e=qn(e,n,c),e}function $p(e,n,a,r){return ti(),n.flags|=256,Nt(e,n,a,r),n.child}var Fu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ed(e){return{baseLanes:e,cachePool:Bm()}}function td(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=$t),e}function Jp(e,n,a){var r=n.pendingProps,c=!1,h=(n.flags&128)!==0,p;if((p=h)||(p=e!==null&&e.memoizedState===null?!1:(Fe.current&2)!==0),p&&(c=!0,n.flags&=-129),p=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ne){if(c?ps(n):gs(),(e=Ye)?(e=ly(e,rn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:os!==null?{id:Tn,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},a=Om(e),a.return=n,n.child=a,xt=n,Ye=null)):e=null,e===null)throw us(n);return Ud(e)?n.lanes=32:n.lanes=536870912,null}var _=r.children;return r=r.fallback,c?(gs(),c=n.mode,_=oo({mode:"hidden",children:_},c),r=ei(r,c,a,null),_.return=n,r.return=n,_.sibling=r,n.child=_,r=n.child,r.memoizedState=ed(a),r.childLanes=td(e,p,a),n.memoizedState=Fu,yl(null,r)):(ps(n),nd(n,_))}var S=e.memoizedState;if(S!==null&&(_=S.dehydrated,_!==null)){if(h)n.flags&256?(ps(n),n.flags&=-257,n=sd(e,n,a)):n.memoizedState!==null?(gs(),n.child=e.child,n.flags|=128,n=null):(gs(),_=r.fallback,c=n.mode,r=oo({mode:"visible",children:r.children},c),_=ei(_,c,a,null),_.flags|=2,r.return=n,_.return=n,r.sibling=_,n.child=r,ri(n,e.child,null,a),r=n.child,r.memoizedState=ed(a),r.childLanes=td(e,p,a),n.memoizedState=Fu,n=yl(null,r));else if(ps(n),Ud(_)){if(p=_.nextSibling&&_.nextSibling.dataset,p)var R=p.dgst;p=R,r=Error(l(419)),r.stack="",r.digest=p,al({value:r,source:null,stack:null}),n=sd(e,n,a)}else if(lt||Wi(e,n,a,!1),p=(a&e.childLanes)!==0,lt||p){if(p=Pe,p!==null&&(r=zf(p,a),r!==0&&r!==S.retryLane))throw S.retryLane=r,Fs(e,r),Vt(p,e,r),$u;Ld(_)||_o(),n=sd(e,n,a)}else Ld(_)?(n.flags|=192,n.child=e.child,n=null):(e=S.treeContext,Ye=cn(_.nextSibling),xt=n,Ne=!0,cs=null,rn=!1,e!==null&&Mm(n,e),n=nd(n,r.children),n.flags|=4096);return n}return c?(gs(),_=r.fallback,c=n.mode,S=e.child,R=S.sibling,r=Ln(S,{mode:"hidden",children:r.children}),r.subtreeFlags=S.subtreeFlags&65011712,R!==null?_=Ln(R,_):(_=ei(_,c,a,null),_.flags|=2),_.return=n,r.return=n,r.sibling=_,n.child=r,yl(null,r),r=n.child,_=e.child.memoizedState,_===null?_=ed(a):(c=_.cachePool,c!==null?(S=it._currentValue,c=c.parent!==S?{parent:S,pool:S}:c):c=Bm(),_={baseLanes:_.baseLanes|a,cachePool:c}),r.memoizedState=_,r.childLanes=td(e,p,a),n.memoizedState=Fu,yl(e.child,r)):(ps(n),a=e.child,e=a.sibling,a=Ln(a,{mode:"visible",children:r.children}),a.return=n,a.sibling=null,e!==null&&(p=n.deletions,p===null?(n.deletions=[e],n.flags|=16):p.push(e)),n.child=a,n.memoizedState=null,a)}function nd(e,n){return n=oo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function oo(e,n){return e=Kt(22,e,null,n),e.lanes=0,e}function sd(e,n,a){return ri(n,e.child,null,a),e=nd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Fp(e,n,a){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n),_u(e.return,n,a)}function id(e,n,a,r,c,h){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:c,treeForkCount:h}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=r,p.tail=a,p.tailMode=c,p.treeForkCount=h)}function eg(e,n,a){var r=n.pendingProps,c=r.revealOrder,h=r.tail;r=r.children;var p=Fe.current,_=(p&2)!==0;if(_?(p=p&1|2,n.flags|=128):p&=1,K(Fe,p),Nt(e,n,r,a),r=Ne?il:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fp(e,a,n);else if(e.tag===19)Fp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=n.child,c=null;a!==null;)e=a.alternate,e!==null&&Zr(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),id(n,!1,c,a,h,r);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&Zr(e)===null){n.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}id(n,!0,a,null,h,r);break;case"together":id(n,!1,null,null,void 0,r);break;default:n.memoizedState=null}return n.child}function qn(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),vs|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Wi(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,a=Ln(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Ln(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function ad(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&qr(e)))}function Sx(e,n,a){switch(n.tag){case 3:nt(n,n.stateNode.containerInfo),ds(n,it,e.memoizedState.cache),ti();break;case 27:case 5:Ks(n);break;case 4:nt(n,n.stateNode.containerInfo);break;case 10:ds(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ru(n),null;break;case 13:var r=n.memoizedState;if(r!==null)return r.dehydrated!==null?(ps(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Jp(e,n,a):(ps(n),e=qn(e,n,a),e!==null?e.sibling:null);ps(n);break;case 19:var c=(e.flags&128)!==0;if(r=(a&n.childLanes)!==0,r||(Wi(e,n,a,!1),r=(a&n.childLanes)!==0),c){if(r)return eg(e,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),K(Fe,Fe.current),r)break;return null;case 22:return n.lanes=0,Qp(e,n,a,n.pendingProps);case 24:ds(n,it,e.memoizedState.cache)}return qn(e,n,a)}function tg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)lt=!0;else{if(!ad(e,a)&&(n.flags&128)===0)return lt=!1,Sx(e,n,a);lt=(e.flags&131072)!==0}else lt=!1,Ne&&(n.flags&1048576)!==0&&Dm(n,il,n.index);switch(n.lanes=0,n.tag){case 16:e:{var r=n.pendingProps;if(e=ai(n.elementType),n.type=e,typeof e=="function")uu(e)?(r=ci(e,r),n.tag=1,n=Zp(null,n,e,r,a)):(n.tag=0,n=Ju(null,n,e,r,a));else{if(e!=null){var c=e.$$typeof;if(c===ee){n.tag=11,n=Gp(null,n,e,r,a);break e}else if(c===M){n.tag=14,n=Vp(null,n,e,r,a);break e}}throw n=ut(e)||e,Error(l(306,n,""))}}return n;case 0:return Ju(e,n,n.type,n.pendingProps,a);case 1:return r=n.type,c=ci(r,n.pendingProps),Zp(e,n,r,c,a);case 3:e:{if(nt(n,n.stateNode.containerInfo),e===null)throw Error(l(387));r=n.pendingProps;var h=n.memoizedState;c=h.element,Tu(e,n),hl(n,r,null,a);var p=n.memoizedState;if(r=p.cache,ds(n,it,r),r!==h.cache&&vu(n,[it],a,!0),dl(),r=p.element,h.isDehydrated)if(h={element:r,isDehydrated:!1,cache:p.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=$p(e,n,r,a);break e}else if(r!==c){c=sn(Error(l(424)),n),al(c),n=$p(e,n,r,a);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ye=cn(e.firstChild),xt=n,Ne=!0,cs=null,rn=!0,a=Qm(n,null,r,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ti(),r===c){n=qn(e,n,a);break e}Nt(e,n,r,a)}n=n.child}return n;case 26:return ro(e,n),e===null?(a=hy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ne||(a=n.type,e=n.pendingProps,r=To(oe.current).createElement(a),r[bt]=n,r[zt]=e,Et(r,a,e),gt(r),n.stateNode=r):n.memoizedState=hy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ks(n),e===null&&Ne&&(r=n.stateNode=cy(n.type,n.pendingProps,oe.current),xt=n,rn=!0,c=Ye,Es(n.type)?(zd=c,Ye=cn(r.firstChild)):Ye=c),Nt(e,n,n.pendingProps.children,a),ro(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ne&&((c=r=Ye)&&(r=Jx(r,n.type,n.pendingProps,rn),r!==null?(n.stateNode=r,xt=n,Ye=cn(r.firstChild),rn=!1,c=!0):c=!1),c||us(n)),Ks(n),c=n.type,h=n.pendingProps,p=e!==null?e.memoizedProps:null,r=h.children,Dd(c,h)?r=null:p!==null&&Dd(c,p)&&(n.flags|=32),n.memoizedState!==null&&(c=Iu(e,n,fx,null,null,a),Il._currentValue=c),ro(e,n),Nt(e,n,r,a),n.child;case 6:return e===null&&Ne&&((e=a=Ye)&&(a=Fx(a,n.pendingProps,rn),a!==null?(n.stateNode=a,xt=n,Ye=null,e=!0):e=!1),e||us(n)),null;case 13:return Jp(e,n,a);case 4:return nt(n,n.stateNode.containerInfo),r=n.pendingProps,e===null?n.child=ri(n,null,r,a):Nt(e,n,r,a),n.child;case 11:return Gp(e,n,n.type,n.pendingProps,a);case 7:return Nt(e,n,n.pendingProps,a),n.child;case 8:return Nt(e,n,n.pendingProps.children,a),n.child;case 12:return Nt(e,n,n.pendingProps.children,a),n.child;case 10:return r=n.pendingProps,ds(n,n.type,r.value),Nt(e,n,r.children,a),n.child;case 9:return c=n.type._context,r=n.pendingProps.children,si(n),c=St(c),r=r(c),n.flags|=1,Nt(e,n,r,a),n.child;case 14:return Vp(e,n,n.type,n.pendingProps,a);case 15:return Yp(e,n,n.type,n.pendingProps,a);case 19:return eg(e,n,a);case 31:return xx(e,n,a);case 22:return Qp(e,n,a,n.pendingProps);case 24:return si(n),r=St(it),e===null?(c=Su(),c===null&&(c=Pe,h=bu(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=a),c=h),n.memoizedState={parent:r,cache:c},Eu(n),ds(n,it,c)):((e.lanes&a)!==0&&(Tu(e,n),hl(n,null,null,a),dl()),c=e.memoizedState,h=n.memoizedState,c.parent!==r?(c={parent:r,cache:r},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),ds(n,it,r)):(r=h.cache,ds(n,it,r),r!==c.cache&&vu(n,[it],a,!0))),Nt(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function Gn(e){e.flags|=4}function ld(e,n,a,r,c){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Ag())e.flags|=8192;else throw li=Qr,Nu}else e.flags&=-16777217}function ng(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!yy(n))if(Ag())e.flags|=8192;else throw li=Qr,Nu}function co(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Er():536870912,e.lanes|=n,ra|=n)}function _l(e,n){if(!Ne)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qe(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(n)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=a,n}function Nx(e,n,a){var r=n.pendingProps;switch(mu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(n),null;case 1:return Qe(n),null;case 3:return a=n.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Hn(it),Xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Xi(n)?Gn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gu())),Qe(n),null;case 26:var c=n.type,h=n.memoizedState;return e===null?(Gn(n),h!==null?(Qe(n),ng(n,h)):(Qe(n),ld(n,c,null,r,a))):h?h!==e.memoizedState?(Gn(n),Qe(n),ng(n,h)):(Qe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==r&&Gn(n),Qe(n),ld(n,c,e,r,a)),null;case 27:if(Ti(n),a=oe.current,c=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==r&&Gn(n);else{if(!r){if(n.stateNode===null)throw Error(l(166));return Qe(n),null}e=X.current,Xi(n)?km(n):(e=cy(c,r,a),n.stateNode=e,Gn(n))}return Qe(n),null;case 5:if(Ti(n),c=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==r&&Gn(n);else{if(!r){if(n.stateNode===null)throw Error(l(166));return Qe(n),null}if(h=X.current,Xi(n))km(n);else{var p=To(oe.current);switch(h){case 1:h=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:h=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":h=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":h=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":h=p.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof r.is=="string"?p.createElement("select",{is:r.is}):p.createElement("select"),r.multiple?h.multiple=!0:r.size&&(h.size=r.size);break;default:h=typeof r.is=="string"?p.createElement(c,{is:r.is}):p.createElement(c)}}h[bt]=n,h[zt]=r;e:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)h.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=h;e:switch(Et(h,c,r),c){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Gn(n)}}return Qe(n),ld(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==r&&Gn(n);else{if(typeof r!="string"&&n.stateNode===null)throw Error(l(166));if(e=oe.current,Xi(n)){if(e=n.stateNode,a=n.memoizedProps,r=null,c=xt,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[bt]=n,e=!!(e.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||Jg(e.nodeValue,a)),e||us(n,!0)}else e=To(e).createTextNode(r),e[bt]=n,n.stateNode=e}return Qe(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(r=Xi(n),a!==null){if(e===null){if(!r)throw Error(l(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[bt]=n}else ti(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Qe(n),e=!1}else a=gu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Wt(n),n):(Wt(n),null);if((n.flags&128)!==0)throw Error(l(558))}return Qe(n),null;case 13:if(r=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Xi(n),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[bt]=n}else ti(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Qe(n),c=!1}else c=gu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Wt(n),n):(Wt(n),null)}return Wt(n),(n.flags&128)!==0?(n.lanes=a,n):(a=r!==null,e=e!==null&&e.memoizedState!==null,a&&(r=n.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==c&&(r.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),co(n,n.updateQueue),Qe(n),null);case 4:return Xe(),e===null&&Ad(n.stateNode.containerInfo),Qe(n),null;case 10:return Hn(n.type),Qe(n),null;case 19:if(H(Fe),r=n.memoizedState,r===null)return Qe(n),null;if(c=(n.flags&128)!==0,h=r.rendering,h===null)if(c)_l(r,!1);else{if(Ze!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=Zr(e),h!==null){for(n.flags|=128,_l(r,!1),e=h.updateQueue,n.updateQueue=e,co(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Rm(a,e),a=a.sibling;return K(Fe,Fe.current&1|2),Ne&&Un(n,r.treeForkCount),n.child}e=e.sibling}r.tail!==null&&jt()>po&&(n.flags|=128,c=!0,_l(r,!1),n.lanes=4194304)}else{if(!c)if(e=Zr(h),e!==null){if(n.flags|=128,c=!0,e=e.updateQueue,n.updateQueue=e,co(n,e),_l(r,!0),r.tail===null&&r.tailMode==="hidden"&&!h.alternate&&!Ne)return Qe(n),null}else 2*jt()-r.renderingStartTime>po&&a!==536870912&&(n.flags|=128,c=!0,_l(r,!1),n.lanes=4194304);r.isBackwards?(h.sibling=n.child,n.child=h):(e=r.last,e!==null?e.sibling=h:n.child=h,r.last=h)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=jt(),e.sibling=null,a=Fe.current,K(Fe,c?a&1|2:a&1),Ne&&Un(n,r.treeForkCount),e):(Qe(n),null);case 22:case 23:return Wt(n),ju(),r=n.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(n.flags|=8192):r&&(n.flags|=8192),r?(a&536870912)!==0&&(n.flags&128)===0&&(Qe(n),n.subtreeFlags&6&&(n.flags|=8192)):Qe(n),a=n.updateQueue,a!==null&&co(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==a&&(n.flags|=2048),e!==null&&H(ii),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Hn(it),Qe(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function Ex(e,n){switch(mu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Hn(it),Xe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ti(n),null;case 31:if(n.memoizedState!==null){if(Wt(n),n.alternate===null)throw Error(l(340));ti()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Wt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));ti()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return H(Fe),null;case 4:return Xe(),null;case 10:return Hn(n.type),null;case 22:case 23:return Wt(n),ju(),e!==null&&H(ii),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Hn(it),null;case 25:return null;default:return null}}function sg(e,n){switch(mu(n),n.tag){case 3:Hn(it),Xe();break;case 26:case 27:case 5:Ti(n);break;case 4:Xe();break;case 31:n.memoizedState!==null&&Wt(n);break;case 13:Wt(n);break;case 19:H(Fe);break;case 10:Hn(n.type);break;case 22:case 23:Wt(n),ju(),e!==null&&H(ii);break;case 24:Hn(it)}}function vl(e,n){try{var a=n.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var c=r.next;a=c;do{if((a.tag&e)===e){r=void 0;var h=a.create,p=a.inst;r=h(),p.destroy=r}a=a.next}while(a!==c)}}catch(_){Me(n,n.return,_)}}function ys(e,n,a){try{var r=n.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var h=c.next;r=h;do{if((r.tag&e)===e){var p=r.inst,_=p.destroy;if(_!==void 0){p.destroy=void 0,c=n;var S=a,R=_;try{R()}catch(k){Me(c,S,k)}}}r=r.next}while(r!==h)}}catch(k){Me(n,n.return,k)}}function ig(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Xm(n,a)}catch(r){Me(e,e.return,r)}}}function ag(e,n,a){a.props=ci(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(r){Me(e,n,r)}}function bl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof a=="function"?e.refCleanup=a(r):a.current=r}}catch(c){Me(e,n,c)}}function wn(e,n){var a=e.ref,r=e.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(c){Me(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Me(e,n,c)}else a.current=null}function lg(e){var n=e.type,a=e.memoizedProps,r=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break e;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(c){Me(e,e.return,c)}}function rd(e,n,a){try{var r=e.stateNode;Qx(r,e.type,a,n),r[zt]=n}catch(c){Me(e,e.return,c)}}function rg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Es(e.type)||e.tag===4}function od(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Es(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cd(e,n,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Mn));else if(r!==4&&(r===27&&Es(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(cd(e,n,a),e=e.sibling;e!==null;)cd(e,n,a),e=e.sibling}function uo(e,n,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(r!==4&&(r===27&&Es(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(uo(e,n,a),e=e.sibling;e!==null;)uo(e,n,a),e=e.sibling}function og(e){var n=e.stateNode,a=e.memoizedProps;try{for(var r=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Et(n,r,a),n[bt]=e,n[zt]=a}catch(h){Me(e,e.return,h)}}var Vn=!1,rt=!1,ud=!1,cg=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Tx(e,n){if(e=e.containerInfo,Od=Io,e=xm(e),su(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var c=r.anchorOffset,h=r.focusNode;r=r.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var p=0,_=-1,S=-1,R=0,k=0,B=e,O=null;t:for(;;){for(var D;B!==a||c!==0&&B.nodeType!==3||(_=p+c),B!==h||r!==0&&B.nodeType!==3||(S=p+r),B.nodeType===3&&(p+=B.nodeValue.length),(D=B.firstChild)!==null;)O=B,B=D;for(;;){if(B===e)break t;if(O===a&&++R===c&&(_=p),O===h&&++k===r&&(S=p),(D=B.nextSibling)!==null)break;B=O,O=B.parentNode}B=D}a=_===-1||S===-1?null:{start:_,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Id={focusedElem:e,selectionRange:a},Io=!1,yt=n;yt!==null;)if(n=yt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,yt=e;else for(;yt!==null;){switch(n=yt,h=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=n,c=h.memoizedProps,h=h.memoizedState,r=a.stateNode;try{var W=ci(a.type,c);e=r.getSnapshotBeforeUpdate(W,h),r.__reactInternalSnapshotBeforeUpdate=e}catch(ne){Me(a,a.return,ne)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)kd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=n.sibling,e!==null){e.return=n.return,yt=e;break}yt=n.return}}function ug(e,n,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Qn(e,a),r&4&&vl(5,a);break;case 1:if(Qn(e,a),r&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(p){Me(a,a.return,p)}else{var c=ci(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Me(a,a.return,p)}}r&64&&ig(a),r&512&&bl(a,a.return);break;case 3:if(Qn(e,a),r&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Xm(e,n)}catch(p){Me(a,a.return,p)}}break;case 27:n===null&&r&4&&og(a);case 26:case 5:Qn(e,a),n===null&&r&4&&lg(a),r&512&&bl(a,a.return);break;case 12:Qn(e,a);break;case 31:Qn(e,a),r&4&&fg(e,a);break;case 13:Qn(e,a),r&4&&mg(e,a),r&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Mx.bind(null,a),e1(e,a))));break;case 22:if(r=a.memoizedState!==null||Vn,!r){n=n!==null&&n.memoizedState!==null||rt,c=Vn;var h=rt;Vn=r,(rt=n)&&!h?Kn(e,a,(a.subtreeFlags&8772)!==0):Qn(e,a),Vn=c,rt=h}break;case 30:break;default:Qn(e,a)}}function dg(e){var n=e.alternate;n!==null&&(e.alternate=null,dg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Bc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ke=null,Bt=!1;function Yn(e,n,a){for(a=a.child;a!==null;)hg(e,n,a),a=a.sibling}function hg(e,n,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Oi,a)}catch{}switch(a.tag){case 26:rt||wn(a,n),Yn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:rt||wn(a,n);var r=Ke,c=Bt;Es(a.type)&&(Ke=a.stateNode,Bt=!1),Yn(e,n,a),jl(a.stateNode),Ke=r,Bt=c;break;case 5:rt||wn(a,n);case 6:if(r=Ke,c=Bt,Ke=null,Yn(e,n,a),Ke=r,Bt=c,Ke!==null)if(Bt)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(a.stateNode)}catch(h){Me(a,n,h)}else try{Ke.removeChild(a.stateNode)}catch(h){Me(a,n,h)}break;case 18:Ke!==null&&(Bt?(e=Ke,iy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),pa(e)):iy(Ke,a.stateNode));break;case 4:r=Ke,c=Bt,Ke=a.stateNode.containerInfo,Bt=!0,Yn(e,n,a),Ke=r,Bt=c;break;case 0:case 11:case 14:case 15:ys(2,a,n),rt||ys(4,a,n),Yn(e,n,a);break;case 1:rt||(wn(a,n),r=a.stateNode,typeof r.componentWillUnmount=="function"&&ag(a,n,r)),Yn(e,n,a);break;case 21:Yn(e,n,a);break;case 22:rt=(r=rt)||a.memoizedState!==null,Yn(e,n,a),rt=r;break;default:Yn(e,n,a)}}function fg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{pa(e)}catch(a){Me(n,n.return,a)}}}function mg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{pa(e)}catch(a){Me(n,n.return,a)}}function Cx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new cg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new cg),n;default:throw Error(l(435,e.tag))}}function ho(e,n){var a=Cx(e);n.forEach(function(r){if(!a.has(r)){a.add(r);var c=kx.bind(null,e,r);r.then(c,c)}})}function Pt(e,n){var a=n.deletions;if(a!==null)for(var r=0;r<a.length;r++){var c=a[r],h=e,p=n,_=p;e:for(;_!==null;){switch(_.tag){case 27:if(Es(_.type)){Ke=_.stateNode,Bt=!1;break e}break;case 5:Ke=_.stateNode,Bt=!1;break e;case 3:case 4:Ke=_.stateNode.containerInfo,Bt=!0;break e}_=_.return}if(Ke===null)throw Error(l(160));hg(h,p,c),Ke=null,Bt=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)pg(n,e),n=n.sibling}var gn=null;function pg(e,n){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pt(n,e),qt(e),r&4&&(ys(3,e,e.return),vl(3,e),ys(5,e,e.return));break;case 1:Pt(n,e),qt(e),r&512&&(rt||a===null||wn(a,a.return)),r&64&&Vn&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var c=gn;if(Pt(n,e),qt(e),r&512&&(rt||a===null||wn(a,a.return)),r&4){var h=a!==null?a.memoizedState:null;if(r=e.memoizedState,a===null)if(r===null)if(e.stateNode===null){e:{r=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(r){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Ka]||h[bt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(r),c.head.insertBefore(h,c.querySelector("head > title"))),Et(h,r,a),h[bt]=e,gt(h),r=h;break e;case"link":var p=py("link","href",c).get(r+(a.href||""));if(p){for(var _=0;_<p.length;_++)if(h=p[_],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(_,1);break t}}h=c.createElement(r),Et(h,r,a),c.head.appendChild(h);break;case"meta":if(p=py("meta","content",c).get(r+(a.content||""))){for(_=0;_<p.length;_++)if(h=p[_],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(_,1);break t}}h=c.createElement(r),Et(h,r,a),c.head.appendChild(h);break;default:throw Error(l(468,r))}h[bt]=e,gt(h),r=h}e.stateNode=r}else gy(c,e.type,e.stateNode);else e.stateNode=my(c,r,e.memoizedProps);else h!==r?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,r===null?gy(c,e.type,e.stateNode):my(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&rd(e,e.memoizedProps,a.memoizedProps)}break;case 27:Pt(n,e),qt(e),r&512&&(rt||a===null||wn(a,a.return)),a!==null&&r&4&&rd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Pt(n,e),qt(e),r&512&&(rt||a===null||wn(a,a.return)),e.flags&32){c=e.stateNode;try{zi(c,"")}catch(W){Me(e,e.return,W)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,rd(e,c,a!==null?a.memoizedProps:c)),r&1024&&(ud=!0);break;case 6:if(Pt(n,e),qt(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,a=e.stateNode;try{a.nodeValue=r}catch(W){Me(e,e.return,W)}}break;case 3:if(Ao=null,c=gn,gn=Co(n.containerInfo),Pt(n,e),gn=c,qt(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{pa(n.containerInfo)}catch(W){Me(e,e.return,W)}ud&&(ud=!1,gg(e));break;case 4:r=gn,gn=Co(e.stateNode.containerInfo),Pt(n,e),qt(e),gn=r;break;case 12:Pt(n,e),qt(e);break;case 31:Pt(n,e),qt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ho(e,r)));break;case 13:Pt(n,e),qt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(mo=jt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ho(e,r)));break;case 22:c=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,R=Vn,k=rt;if(Vn=R||c,rt=k||S,Pt(n,e),rt=k,Vn=R,qt(e),r&8192)e:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||S||Vn||rt||ui(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){S=a=n;try{if(h=S.stateNode,c)p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{_=S.stateNode;var B=S.memoizedProps.style,O=B!=null&&B.hasOwnProperty("display")?B.display:null;_.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(W){Me(S,S.return,W)}}}else if(n.tag===6){if(a===null){S=n;try{S.stateNode.nodeValue=c?"":S.memoizedProps}catch(W){Me(S,S.return,W)}}}else if(n.tag===18){if(a===null){S=n;try{var D=S.stateNode;c?ay(D,!0):ay(S.stateNode,!1)}catch(W){Me(S,S.return,W)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}r&4&&(r=e.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,ho(e,a))));break;case 19:Pt(n,e),qt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ho(e,r)));break;case 30:break;case 21:break;default:Pt(n,e),qt(e)}}function qt(e){var n=e.flags;if(n&2){try{for(var a,r=e.return;r!==null;){if(rg(r)){a=r;break}r=r.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var c=a.stateNode,h=od(e);uo(e,h,c);break;case 5:var p=a.stateNode;a.flags&32&&(zi(p,""),a.flags&=-33);var _=od(e);uo(e,_,p);break;case 3:case 4:var S=a.stateNode.containerInfo,R=od(e);cd(e,R,S);break;default:throw Error(l(161))}}catch(k){Me(e,e.return,k)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function gg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;gg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Qn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ug(e,n.alternate,n),n=n.sibling}function ui(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ys(4,n,n.return),ui(n);break;case 1:wn(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&ag(n,n.return,a),ui(n);break;case 27:jl(n.stateNode);case 26:case 5:wn(n,n.return),ui(n);break;case 22:n.memoizedState===null&&ui(n);break;case 30:ui(n);break;default:ui(n)}e=e.sibling}}function Kn(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var r=n.alternate,c=e,h=n,p=h.flags;switch(h.tag){case 0:case 11:case 15:Kn(c,h,a),vl(4,h);break;case 1:if(Kn(c,h,a),r=h,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(R){Me(r,r.return,R)}if(r=h,c=r.updateQueue,c!==null){var _=r.stateNode;try{var S=c.shared.hiddenCallbacks;if(S!==null)for(c.shared.hiddenCallbacks=null,c=0;c<S.length;c++)Km(S[c],_)}catch(R){Me(r,r.return,R)}}a&&p&64&&ig(h),bl(h,h.return);break;case 27:og(h);case 26:case 5:Kn(c,h,a),a&&r===null&&p&4&&lg(h),bl(h,h.return);break;case 12:Kn(c,h,a);break;case 31:Kn(c,h,a),a&&p&4&&fg(c,h);break;case 13:Kn(c,h,a),a&&p&4&&mg(c,h);break;case 22:h.memoizedState===null&&Kn(c,h,a),bl(h,h.return);break;case 30:break;default:Kn(c,h,a)}n=n.sibling}}function dd(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ll(a))}function hd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ll(e))}function yn(e,n,a,r){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)yg(e,n,a,r),n=n.sibling}function yg(e,n,a,r){var c=n.flags;switch(n.tag){case 0:case 11:case 15:yn(e,n,a,r),c&2048&&vl(9,n);break;case 1:yn(e,n,a,r);break;case 3:yn(e,n,a,r),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ll(e)));break;case 12:if(c&2048){yn(e,n,a,r),e=n.stateNode;try{var h=n.memoizedProps,p=h.id,_=h.onPostCommit;typeof _=="function"&&_(p,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Me(n,n.return,S)}}else yn(e,n,a,r);break;case 31:yn(e,n,a,r);break;case 13:yn(e,n,a,r);break;case 23:break;case 22:h=n.stateNode,p=n.alternate,n.memoizedState!==null?h._visibility&2?yn(e,n,a,r):xl(e,n):h._visibility&2?yn(e,n,a,r):(h._visibility|=2,ia(e,n,a,r,(n.subtreeFlags&10256)!==0||!1)),c&2048&&dd(p,n);break;case 24:yn(e,n,a,r),c&2048&&hd(n.alternate,n);break;default:yn(e,n,a,r)}}function ia(e,n,a,r,c){for(c=c&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=e,p=n,_=a,S=r,R=p.flags;switch(p.tag){case 0:case 11:case 15:ia(h,p,_,S,c),vl(8,p);break;case 23:break;case 22:var k=p.stateNode;p.memoizedState!==null?k._visibility&2?ia(h,p,_,S,c):xl(h,p):(k._visibility|=2,ia(h,p,_,S,c)),c&&R&2048&&dd(p.alternate,p);break;case 24:ia(h,p,_,S,c),c&&R&2048&&hd(p.alternate,p);break;default:ia(h,p,_,S,c)}n=n.sibling}}function xl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,r=n,c=r.flags;switch(r.tag){case 22:xl(a,r),c&2048&&dd(r.alternate,r);break;case 24:xl(a,r),c&2048&&hd(r.alternate,r);break;default:xl(a,r)}n=n.sibling}}var Sl=8192;function aa(e,n,a){if(e.subtreeFlags&Sl)for(e=e.child;e!==null;)_g(e,n,a),e=e.sibling}function _g(e,n,a){switch(e.tag){case 26:aa(e,n,a),e.flags&Sl&&e.memoizedState!==null&&h1(a,gn,e.memoizedState,e.memoizedProps);break;case 5:aa(e,n,a);break;case 3:case 4:var r=gn;gn=Co(e.stateNode.containerInfo),aa(e,n,a),gn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Sl,Sl=16777216,aa(e,n,a),Sl=r):aa(e,n,a));break;default:aa(e,n,a)}}function vg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Nl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var r=n[a];yt=r,xg(r,e)}vg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)bg(e),e=e.sibling}function bg(e){switch(e.tag){case 0:case 11:case 15:Nl(e),e.flags&2048&&ys(9,e,e.return);break;case 3:Nl(e);break;case 12:Nl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,fo(e)):Nl(e);break;default:Nl(e)}}function fo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var r=n[a];yt=r,xg(r,e)}vg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ys(8,n,n.return),fo(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,fo(n));break;default:fo(n)}e=e.sibling}}function xg(e,n){for(;yt!==null;){var a=yt;switch(a.tag){case 0:case 11:case 15:ys(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ll(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,yt=r;else e:for(a=e;yt!==null;){r=yt;var c=r.sibling,h=r.return;if(dg(r),r===a){yt=null;break e}if(c!==null){c.return=h,yt=c;break e}yt=h}}}var wx={getCacheForType:function(e){var n=St(it),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return St(it).controller.signal}},Ax=typeof WeakMap=="function"?WeakMap:Map,je=0,Pe=null,ye=null,be=0,De=0,Zt=null,_s=!1,la=!1,fd=!1,Xn=0,Ze=0,vs=0,di=0,md=0,$t=0,ra=0,El=null,Gt=null,pd=!1,mo=0,Sg=0,po=1/0,go=null,bs=null,dt=0,xs=null,oa=null,Wn=0,gd=0,yd=null,Ng=null,Tl=0,_d=null;function Jt(){return(je&2)!==0&&be!==0?be&-be:w.T!==null?Ed():Hf()}function Eg(){if($t===0)if((be&536870912)===0||Ne){var e=Be;Be<<=1,(Be&3932160)===0&&(Be=262144),$t=e}else $t=536870912;return e=Xt.current,e!==null&&(e.flags|=32),$t}function Vt(e,n,a){(e===Pe&&(De===2||De===9)||e.cancelPendingCommit!==null)&&(ca(e,0),Ss(e,be,$t,!1)),En(e,a),((je&2)===0||e!==Pe)&&(e===Pe&&((je&2)===0&&(di|=a),Ze===4&&Ss(e,be,$t,!1)),An(e))}function Tg(e,n,a){if((je&6)!==0)throw Error(l(327));var r=!a&&(n&127)===0&&(n&e.expiredLanes)===0||st(e,n),c=r?Ox(e,n):bd(e,n,!0),h=r;do{if(c===0){la&&!r&&Ss(e,n,0,!1);break}else{if(a=e.current.alternate,h&&!jx(a)){c=bd(e,n,!1),h=!1;continue}if(c===2){if(h=n,e.errorRecoveryDisabledLanes&h)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){n=p;e:{var _=e;c=El;var S=_.current.memoizedState.isDehydrated;if(S&&(ca(_,p).flags|=256),p=bd(_,p,!1),p!==2){if(fd&&!S){_.errorRecoveryDisabledLanes|=h,di|=h,c=4;break e}h=Gt,Gt=c,h!==null&&(Gt===null?Gt=h:Gt.push.apply(Gt,h))}c=p}if(h=!1,c!==2)continue}}if(c===1){ca(e,0),Ss(e,n,0,!0);break}e:{switch(r=e,h=c,h){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Ss(r,n,$t,!_s);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(c=mo+300-jt(),10<c)){if(Ss(r,n,$t,!_s),Ie(r,0,!0)!==0)break e;Wn=n,r.timeoutHandle=ny(Cg.bind(null,r,a,Gt,go,pd,n,$t,di,ra,_s,h,"Throttled",-0,0),c);break e}Cg(r,a,Gt,go,pd,n,$t,di,ra,_s,h,null,-0,0)}}break}while(!0);An(e)}function Cg(e,n,a,r,c,h,p,_,S,R,k,B,O,D){if(e.timeoutHandle=-1,B=n.subtreeFlags,B&8192||(B&16785408)===16785408){B={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mn},_g(n,h,B);var W=(h&62914560)===h?mo-jt():(h&4194048)===h?Sg-jt():0;if(W=f1(B,W),W!==null){Wn=h,e.cancelPendingCommit=W(Mg.bind(null,e,n,h,a,r,c,p,_,S,k,B,null,O,D)),Ss(e,h,p,!R);return}}Mg(e,n,h,a,r,c,p,_,S)}function jx(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var c=a[r],h=c.getSnapshot;c=c.value;try{if(!Qt(h(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ss(e,n,a,r){n&=~md,n&=~di,e.suspendedLanes|=n,e.pingedLanes&=~n,r&&(e.warmLanes|=n),r=e.expirationTimes;for(var c=n;0<c;){var h=31-Rt(c),p=1<<h;r[h]=-1,c&=~p}a!==0&&Lf(e,a,n)}function yo(){return(je&6)===0?(Cl(0),!1):!0}function vd(){if(ye!==null){if(De===0)var e=ye.return;else e=ye,zn=ni=null,ku(e),Fi=null,ol=0,e=ye;for(;e!==null;)sg(e.alternate,e),e=e.return;ye=null}}function ca(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Wx(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Wn=0,vd(),Pe=e,ye=a=Ln(e.current,null),be=n,De=0,Zt=null,_s=!1,la=st(e,n),fd=!1,ra=$t=md=di=vs=Ze=0,Gt=El=null,pd=!1,(n&8)!==0&&(n|=n&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=n;0<r;){var c=31-Rt(r),h=1<<c;n|=e[c],r&=~h}return Xn=n,Ur(),a}function wg(e,n){de=null,w.H=gl,n===Ji||n===Yr?(n=Gm(),De=3):n===Nu?(n=Gm(),De=4):De=n===$u?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Zt=n,ye===null&&(Ze=1,ao(e,sn(n,e.current)))}function Ag(){var e=Xt.current;return e===null?!0:(be&4194048)===be?on===null:(be&62914560)===be||(be&536870912)!==0?e===on:!1}function jg(){var e=w.H;return w.H=gl,e===null?gl:e}function Rg(){var e=w.A;return w.A=wx,e}function _o(){Ze=4,_s||(be&4194048)!==be&&Xt.current!==null||(la=!0),(vs&134217727)===0&&(di&134217727)===0||Pe===null||Ss(Pe,be,$t,!1)}function bd(e,n,a){var r=je;je|=2;var c=jg(),h=Rg();(Pe!==e||be!==n)&&(go=null,ca(e,n)),n=!1;var p=Ze;e:do try{if(De!==0&&ye!==null){var _=ye,S=Zt;switch(De){case 8:vd(),p=6;break e;case 3:case 2:case 9:case 6:Xt.current===null&&(n=!0);var R=De;if(De=0,Zt=null,ua(e,_,S,R),a&&la){p=0;break e}break;default:R=De,De=0,Zt=null,ua(e,_,S,R)}}Rx(),p=Ze;break}catch(k){wg(e,k)}while(!0);return n&&e.shellSuspendCounter++,zn=ni=null,je=r,w.H=c,w.A=h,ye===null&&(Pe=null,be=0,Ur()),p}function Rx(){for(;ye!==null;)Og(ye)}function Ox(e,n){var a=je;je|=2;var r=jg(),c=Rg();Pe!==e||be!==n?(go=null,po=jt()+500,ca(e,n)):la=st(e,n);e:do try{if(De!==0&&ye!==null){n=ye;var h=Zt;t:switch(De){case 1:De=0,Zt=null,ua(e,n,h,1);break;case 2:case 9:if(Pm(h)){De=0,Zt=null,Ig(n);break}n=function(){De!==2&&De!==9||Pe!==e||(De=7),An(e)},h.then(n,n);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:Pm(h)?(De=0,Zt=null,Ig(n)):(De=0,Zt=null,ua(e,n,h,7));break;case 5:var p=null;switch(ye.tag){case 26:p=ye.memoizedState;case 5:case 27:var _=ye;if(p?yy(p):_.stateNode.complete){De=0,Zt=null;var S=_.sibling;if(S!==null)ye=S;else{var R=_.return;R!==null?(ye=R,vo(R)):ye=null}break t}}De=0,Zt=null,ua(e,n,h,5);break;case 6:De=0,Zt=null,ua(e,n,h,6);break;case 8:vd(),Ze=6;break e;default:throw Error(l(462))}}Ix();break}catch(k){wg(e,k)}while(!0);return zn=ni=null,w.H=r,w.A=c,je=a,ye!==null?0:(Pe=null,be=0,Ur(),Ze)}function Ix(){for(;ye!==null&&!Dc();)Og(ye)}function Og(e){var n=tg(e.alternate,e,Xn);e.memoizedProps=e.pendingProps,n===null?vo(e):ye=n}function Ig(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Wp(a,n,n.pendingProps,n.type,void 0,be);break;case 11:n=Wp(a,n,n.pendingProps,n.type.render,n.ref,be);break;case 5:ku(n);default:sg(a,n),n=ye=Rm(n,Xn),n=tg(a,n,Xn)}e.memoizedProps=e.pendingProps,n===null?vo(e):ye=n}function ua(e,n,a,r){zn=ni=null,ku(n),Fi=null,ol=0;var c=n.return;try{if(bx(e,c,n,a,be)){Ze=1,ao(e,sn(a,e.current)),ye=null;return}}catch(h){if(c!==null)throw ye=c,h;Ze=1,ao(e,sn(a,e.current)),ye=null;return}n.flags&32768?(Ne||r===1?e=!0:la||(be&536870912)!==0?e=!1:(_s=e=!0,(r===2||r===9||r===3||r===6)&&(r=Xt.current,r!==null&&r.tag===13&&(r.flags|=16384))),Dg(n,e)):vo(n)}function vo(e){var n=e;do{if((n.flags&32768)!==0){Dg(n,_s);return}e=n.return;var a=Nx(n.alternate,n,Xn);if(a!==null){ye=a;return}if(n=n.sibling,n!==null){ye=n;return}ye=n=e}while(n!==null);Ze===0&&(Ze=5)}function Dg(e,n){do{var a=Ex(e.alternate,e);if(a!==null){a.flags&=32767,ye=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){ye=e;return}ye=e=a}while(e!==null);Ze=6,ye=null}function Mg(e,n,a,r,c,h,p,_,S){e.cancelPendingCommit=null;do bo();while(dt!==0);if((je&6)!==0)throw Error(l(327));if(n!==null){if(n===e.current)throw Error(l(177));if(h=n.lanes|n.childLanes,h|=ou,Lc(e,a,h,p,_,S),e===Pe&&(ye=Pe=null,be=0),oa=n,xs=e,Wn=a,gd=h,yd=c,Ng=r,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Lx(Xs,function(){return Hg(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||r){r=w.T,w.T=null,c=P.p,P.p=2,p=je,je|=4;try{Tx(e,n,a)}finally{je=p,P.p=c,w.T=r}}dt=1,kg(),Lg(),Ug()}}function kg(){if(dt===1){dt=0;var e=xs,n=oa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=w.T,w.T=null;var r=P.p;P.p=2;var c=je;je|=4;try{pg(n,e);var h=Id,p=xm(e.containerInfo),_=h.focusedElem,S=h.selectionRange;if(p!==_&&_&&_.ownerDocument&&bm(_.ownerDocument.documentElement,_)){if(S!==null&&su(_)){var R=S.start,k=S.end;if(k===void 0&&(k=R),"selectionStart"in _)_.selectionStart=R,_.selectionEnd=Math.min(k,_.value.length);else{var B=_.ownerDocument||document,O=B&&B.defaultView||window;if(O.getSelection){var D=O.getSelection(),W=_.textContent.length,ne=Math.min(S.start,W),Ue=S.end===void 0?ne:Math.min(S.end,W);!D.extend&&ne>Ue&&(p=Ue,Ue=ne,ne=p);var T=vm(_,ne),E=vm(_,Ue);if(T&&E&&(D.rangeCount!==1||D.anchorNode!==T.node||D.anchorOffset!==T.offset||D.focusNode!==E.node||D.focusOffset!==E.offset)){var j=B.createRange();j.setStart(T.node,T.offset),D.removeAllRanges(),ne>Ue?(D.addRange(j),D.extend(E.node,E.offset)):(j.setEnd(E.node,E.offset),D.addRange(j))}}}}for(B=[],D=_;D=D.parentNode;)D.nodeType===1&&B.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<B.length;_++){var z=B[_];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}Io=!!Od,Id=Od=null}finally{je=c,P.p=r,w.T=a}}e.current=n,dt=2}}function Lg(){if(dt===2){dt=0;var e=xs,n=oa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=w.T,w.T=null;var r=P.p;P.p=2;var c=je;je|=4;try{ug(e,n.alternate,n)}finally{je=c,P.p=r,w.T=a}}dt=3}}function Ug(){if(dt===4||dt===3){dt=0,Mc();var e=xs,n=oa,a=Wn,r=Ng;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?dt=5:(dt=0,oa=xs=null,zg(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(bs=null),zc(a),n=n.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Oi,n,void 0,(n.current.flags&128)===128)}catch{}if(r!==null){n=w.T,c=P.p,P.p=2,w.T=null;try{for(var h=e.onRecoverableError,p=0;p<r.length;p++){var _=r[p];h(_.value,{componentStack:_.stack})}}finally{w.T=n,P.p=c}}(Wn&3)!==0&&bo(),An(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===_d?Tl++:(Tl=0,_d=e):Tl=0,Cl(0)}}function zg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ll(n)))}function bo(){return kg(),Lg(),Ug(),Hg()}function Hg(){if(dt!==5)return!1;var e=xs,n=gd;gd=0;var a=zc(Wn),r=w.T,c=P.p;try{P.p=32>a?32:a,w.T=null,a=yd,yd=null;var h=xs,p=Wn;if(dt=0,oa=xs=null,Wn=0,(je&6)!==0)throw Error(l(331));var _=je;if(je|=4,bg(h.current),yg(h,h.current,p,a),je=_,Cl(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Oi,h)}catch{}return!0}finally{P.p=c,w.T=r,zg(e,n)}}function Bg(e,n,a){n=sn(a,n),n=Zu(e.stateNode,n,2),e=ms(e,n,2),e!==null&&(En(e,2),An(e))}function Me(e,n,a){if(e.tag===3)Bg(e,e,a);else for(;n!==null;){if(n.tag===3){Bg(n,e,a);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bs===null||!bs.has(r))){e=sn(a,e),a=Pp(2),r=ms(n,a,2),r!==null&&(qp(a,r,n,e),En(r,2),An(r));break}}n=n.return}}function xd(e,n,a){var r=e.pingCache;if(r===null){r=e.pingCache=new Ax;var c=new Set;r.set(n,c)}else c=r.get(n),c===void 0&&(c=new Set,r.set(n,c));c.has(a)||(fd=!0,c.add(a),e=Dx.bind(null,e,n,a),n.then(e,e))}function Dx(e,n,a){var r=e.pingCache;r!==null&&r.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Pe===e&&(be&a)===a&&(Ze===4||Ze===3&&(be&62914560)===be&&300>jt()-mo?(je&2)===0&&ca(e,0):md|=a,ra===be&&(ra=0)),An(e)}function Pg(e,n){n===0&&(n=Er()),e=Fs(e,n),e!==null&&(En(e,n),An(e))}function Mx(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Pg(e,a)}function kx(e,n){var a=0;switch(e.tag){case 31:case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(n),Pg(e,a)}function Lx(e,n){return qa(e,n)}var xo=null,da=null,Sd=!1,So=!1,Nd=!1,Ns=0;function An(e){e!==da&&e.next===null&&(da===null?xo=da=e:da=da.next=e),So=!0,Sd||(Sd=!0,zx())}function Cl(e,n){if(!Nd&&So){Nd=!0;do for(var a=!1,r=xo;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var h=0;else{var p=r.suspendedLanes,_=r.pingedLanes;h=(1<<31-Rt(42|e)+1)-1,h&=c&~(p&~_),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,Yg(r,h))}else h=be,h=Ie(r,r===Pe?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(h&3)===0||st(r,h)||(a=!0,Yg(r,h));r=r.next}while(a);Nd=!1}}function Ux(){qg()}function qg(){So=Sd=!1;var e=0;Ns!==0&&Xx()&&(e=Ns);for(var n=jt(),a=null,r=xo;r!==null;){var c=r.next,h=Gg(r,n);h===0?(r.next=null,a===null?xo=c:a.next=c,c===null&&(da=a)):(a=r,(e!==0||(h&3)!==0)&&(So=!0)),r=c}dt!==0&&dt!==5||Cl(e),Ns!==0&&(Ns=0)}function Gg(e,n){for(var a=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var p=31-Rt(h),_=1<<p,S=c[p];S===-1?((_&a)===0||(_&r)!==0)&&(c[p]=Ot(_,n)):S<=n&&(e.expiredLanes|=_),h&=~_}if(n=Pe,a=be,a=Ie(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,a===0||e===n&&(De===2||De===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ga(r),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||st(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(r!==null&&Ga(r),zc(a)){case 2:case 8:a=ji;break;case 32:a=Xs;break;case 268435456:a=Sr;break;default:a=Xs}return r=Vg.bind(null,e),a=qa(a,r),e.callbackPriority=n,e.callbackNode=a,n}return r!==null&&r!==null&&Ga(r),e.callbackPriority=2,e.callbackNode=null,2}function Vg(e,n){if(dt!==0&&dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(bo()&&e.callbackNode!==a)return null;var r=be;return r=Ie(e,e===Pe?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Tg(e,r,n),Gg(e,jt()),e.callbackNode!=null&&e.callbackNode===a?Vg.bind(null,e):null)}function Yg(e,n){if(bo())return null;Tg(e,n,!0)}function zx(){Zx(function(){(je&6)!==0?qa(Ut,Ux):qg()})}function Ed(){if(Ns===0){var e=Zi;e===0&&(e=pt,pt<<=1,(pt&261888)===0&&(pt=256)),Ns=e}return Ns}function Qg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:jr(""+e)}function Kg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function Hx(e,n,a,r,c){if(n==="submit"&&a&&a.stateNode===c){var h=Qg((c[zt]||null).action),p=r.submitter;p&&(n=(n=p[zt]||null)?Qg(n.formAction):p.getAttribute("formAction"),n!==null&&(h=n,p=null));var _=new Dr("action","action",null,r,c);e.push({event:_,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ns!==0){var S=p?Kg(c,p):new FormData(c);Vu(a,{pending:!0,data:S,method:c.method,action:h},null,S)}}else typeof h=="function"&&(_.preventDefault(),S=p?Kg(c,p):new FormData(c),Vu(a,{pending:!0,data:S,method:c.method,action:h},h,S))},currentTarget:c}]})}}for(var Td=0;Td<ru.length;Td++){var Cd=ru[Td],Bx=Cd.toLowerCase(),Px=Cd[0].toUpperCase()+Cd.slice(1);pn(Bx,"on"+Px)}pn(Em,"onAnimationEnd"),pn(Tm,"onAnimationIteration"),pn(Cm,"onAnimationStart"),pn("dblclick","onDoubleClick"),pn("focusin","onFocus"),pn("focusout","onBlur"),pn(sx,"onTransitionRun"),pn(ix,"onTransitionStart"),pn(ax,"onTransitionCancel"),pn(wm,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wl));function Xg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],c=r.event;r=r.listeners;e:{var h=void 0;if(n)for(var p=r.length-1;0<=p;p--){var _=r[p],S=_.instance,R=_.currentTarget;if(_=_.listener,S!==h&&c.isPropagationStopped())break e;h=_,c.currentTarget=R;try{h(c)}catch(k){Lr(k)}c.currentTarget=null,h=S}else for(p=0;p<r.length;p++){if(_=r[p],S=_.instance,R=_.currentTarget,_=_.listener,S!==h&&c.isPropagationStopped())break e;h=_,c.currentTarget=R;try{h(c)}catch(k){Lr(k)}c.currentTarget=null,h=S}}}}function _e(e,n){var a=n[Hc];a===void 0&&(a=n[Hc]=new Set);var r=e+"__bubble";a.has(r)||(Wg(n,e,2,!1),a.add(r))}function wd(e,n,a){var r=0;n&&(r|=4),Wg(a,e,r,n)}var No="_reactListening"+Math.random().toString(36).slice(2);function Ad(e){if(!e[No]){e[No]=!0,qf.forEach(function(a){a!=="selectionchange"&&(qx.has(a)||wd(a,!1,e),wd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[No]||(n[No]=!0,wd("selectionchange",!1,n))}}function Wg(e,n,a,r){switch(Ey(n)){case 2:var c=g1;break;case 8:c=y1;break;default:c=Gd}a=c.bind(null,n,a,e),c=void 0,!Xc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(n,a,{capture:!0,passive:c}):e.addEventListener(n,a,!0):c!==void 0?e.addEventListener(n,a,{passive:c}):e.addEventListener(n,a,!1)}function jd(e,n,a,r,c){var h=r;if((n&1)===0&&(n&2)===0&&r!==null)e:for(;;){if(r===null)return;var p=r.tag;if(p===3||p===4){var _=r.stateNode.containerInfo;if(_===c)break;if(p===4)for(p=r.return;p!==null;){var S=p.tag;if((S===3||S===4)&&p.stateNode.containerInfo===c)return;p=p.return}for(;_!==null;){if(p=Di(_),p===null)return;if(S=p.tag,S===5||S===6||S===26||S===27){r=h=p;continue e}_=_.parentNode}}r=r.return}em(function(){var R=h,k=Qc(a),B=[];e:{var O=Am.get(e);if(O!==void 0){var D=Dr,W=e;switch(e){case"keypress":if(Or(a)===0)break e;case"keydown":case"keyup":D=kb;break;case"focusin":W="focus",D=Jc;break;case"focusout":W="blur",D=Jc;break;case"beforeblur":case"afterblur":D=Jc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=sm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=Nb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=zb;break;case Em:case Tm:case Cm:D=Cb;break;case wm:D=Bb;break;case"scroll":case"scrollend":D=xb;break;case"wheel":D=qb;break;case"copy":case"cut":case"paste":D=Ab;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=am;break;case"toggle":case"beforetoggle":D=Vb}var ne=(n&4)!==0,Ue=!ne&&(e==="scroll"||e==="scrollend"),T=ne?O!==null?O+"Capture":null:O;ne=[];for(var E=R,j;E!==null;){var z=E;if(j=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||j===null||T===null||(z=Wa(E,T),z!=null&&ne.push(Al(E,z,j))),Ue)break;E=E.return}0<ne.length&&(O=new D(O,W,null,a,k),B.push({event:O,listeners:ne}))}}if((n&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",O&&a!==Yc&&(W=a.relatedTarget||a.fromElement)&&(Di(W)||W[Ii]))break e;if((D||O)&&(O=k.window===k?k:(O=k.ownerDocument)?O.defaultView||O.parentWindow:window,D?(W=a.relatedTarget||a.toElement,D=R,W=W?Di(W):null,W!==null&&(Ue=u(W),ne=W.tag,W!==Ue||ne!==5&&ne!==27&&ne!==6)&&(W=null)):(D=null,W=R),D!==W)){if(ne=sm,z="onMouseLeave",T="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(ne=am,z="onPointerLeave",T="onPointerEnter",E="pointer"),Ue=D==null?O:Xa(D),j=W==null?O:Xa(W),O=new ne(z,E+"leave",D,a,k),O.target=Ue,O.relatedTarget=j,z=null,Di(k)===R&&(ne=new ne(T,E+"enter",W,a,k),ne.target=j,ne.relatedTarget=Ue,z=ne),Ue=z,D&&W)t:{for(ne=Gx,T=D,E=W,j=0,z=T;z;z=ne(z))j++;z=0;for(var F=E;F;F=ne(F))z++;for(;0<j-z;)T=ne(T),j--;for(;0<z-j;)E=ne(E),z--;for(;j--;){if(T===E||E!==null&&T===E.alternate){ne=T;break t}T=ne(T),E=ne(E)}ne=null}else ne=null;D!==null&&Zg(B,O,D,ne,!1),W!==null&&Ue!==null&&Zg(B,Ue,W,ne,!0)}}e:{if(O=R?Xa(R):window,D=O.nodeName&&O.nodeName.toLowerCase(),D==="select"||D==="input"&&O.type==="file")var Ee=fm;else if(dm(O))if(mm)Ee=ex;else{Ee=Jb;var Z=$b}else D=O.nodeName,!D||D.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?R&&Vc(R.elementType)&&(Ee=fm):Ee=Fb;if(Ee&&(Ee=Ee(e,R))){hm(B,Ee,a,k);break e}Z&&Z(e,O,R),e==="focusout"&&R&&O.type==="number"&&R.memoizedProps.value!=null&&Gc(O,"number",O.value)}switch(Z=R?Xa(R):window,e){case"focusin":(dm(Z)||Z.contentEditable==="true")&&(qi=Z,iu=R,sl=null);break;case"focusout":sl=iu=qi=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,Sm(B,a,k);break;case"selectionchange":if(nx)break;case"keydown":case"keyup":Sm(B,a,k)}var fe;if(eu)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Pi?cm(e,a)&&(xe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(lm&&a.locale!=="ko"&&(Pi||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Pi&&(fe=tm()):(rs=k,Wc="value"in rs?rs.value:rs.textContent,Pi=!0)),Z=Eo(R,xe),0<Z.length&&(xe=new im(xe,e,null,a,k),B.push({event:xe,listeners:Z}),fe?xe.data=fe:(fe=um(a),fe!==null&&(xe.data=fe)))),(fe=Qb?Kb(e,a):Xb(e,a))&&(xe=Eo(R,"onBeforeInput"),0<xe.length&&(Z=new im("onBeforeInput","beforeinput",null,a,k),B.push({event:Z,listeners:xe}),Z.data=fe)),Hx(B,e,R,a,k)}Xg(B,n)})}function Al(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Eo(e,n){for(var a=n+"Capture",r=[];e!==null;){var c=e,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=Wa(e,a),c!=null&&r.unshift(Al(e,c,h)),c=Wa(e,n),c!=null&&r.push(Al(e,c,h))),e.tag===3)return r;e=e.return}return[]}function Gx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Zg(e,n,a,r,c){for(var h=n._reactName,p=[];a!==null&&a!==r;){var _=a,S=_.alternate,R=_.stateNode;if(_=_.tag,S!==null&&S===r)break;_!==5&&_!==26&&_!==27||R===null||(S=R,c?(R=Wa(a,h),R!=null&&p.unshift(Al(a,R,S))):c||(R=Wa(a,h),R!=null&&p.push(Al(a,R,S)))),a=a.return}p.length!==0&&e.push({event:n,listeners:p})}var Vx=/\r\n?/g,Yx=/\u0000|\uFFFD/g;function $g(e){return(typeof e=="string"?e:""+e).replace(Vx,`
`).replace(Yx,"")}function Jg(e,n){return n=$g(n),$g(e)===n}function Le(e,n,a,r,c,h){switch(a){case"children":typeof r=="string"?n==="body"||n==="textarea"&&r===""||zi(e,r):(typeof r=="number"||typeof r=="bigint")&&n!=="body"&&zi(e,""+r);break;case"className":wr(e,"class",r);break;case"tabIndex":wr(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(e,a,r);break;case"style":Jf(e,r,h);break;case"data":if(n!=="object"){wr(e,"data",r);break}case"src":case"href":if(r===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=jr(""+r),e.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(n!=="input"&&Le(e,n,"name",c.name,c,null),Le(e,n,"formEncType",c.formEncType,c,null),Le(e,n,"formMethod",c.formMethod,c,null),Le(e,n,"formTarget",c.formTarget,c,null)):(Le(e,n,"encType",c.encType,c,null),Le(e,n,"method",c.method,c,null),Le(e,n,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=jr(""+r),e.setAttribute(a,r);break;case"onClick":r!=null&&(e.onclick=Mn);break;case"onScroll":r!=null&&_e("scroll",e);break;case"onScrollEnd":r!=null&&_e("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}a=jr(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""+r):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":r===!0?e.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,r):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(a,r):e.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(a):e.setAttribute(a,r);break;case"popover":_e("beforetoggle",e),_e("toggle",e),Cr(e,"popover",r);break;case"xlinkActuate":Dn(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Dn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Dn(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Dn(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Dn(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Dn(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Dn(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Dn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Dn(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Cr(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=vb.get(a)||a,Cr(e,a,r))}}function Rd(e,n,a,r,c,h){switch(a){case"style":Jf(e,r,h);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof r=="string"?zi(e,r):(typeof r=="number"||typeof r=="bigint")&&zi(e,""+r);break;case"onScroll":r!=null&&_e("scroll",e);break;case"onScrollEnd":r!=null&&_e("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gf.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),h=e[zt]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(n,h,c),typeof r=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,r,c);break e}a in e?e[a]=r:r===!0?e.setAttribute(a,""):Cr(e,a,r)}}}function Et(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",e),_e("load",e);var r=!1,c=!1,h;for(h in a)if(a.hasOwnProperty(h)){var p=a[h];if(p!=null)switch(h){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Le(e,n,h,p,a,null)}}c&&Le(e,n,"srcSet",a.srcSet,a,null),r&&Le(e,n,"src",a.src,a,null);return;case"input":_e("invalid",e);var _=h=p=c=null,S=null,R=null;for(r in a)if(a.hasOwnProperty(r)){var k=a[r];if(k!=null)switch(r){case"name":c=k;break;case"type":p=k;break;case"checked":S=k;break;case"defaultChecked":R=k;break;case"value":h=k;break;case"defaultValue":_=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(l(137,n));break;default:Le(e,n,r,k,a,null)}}Xf(e,h,_,S,R,p,c,!1);return;case"select":_e("invalid",e),r=p=h=null;for(c in a)if(a.hasOwnProperty(c)&&(_=a[c],_!=null))switch(c){case"value":h=_;break;case"defaultValue":p=_;break;case"multiple":r=_;default:Le(e,n,c,_,a,null)}n=h,a=p,e.multiple=!!r,n!=null?Ui(e,!!r,n,!1):a!=null&&Ui(e,!!r,a,!0);return;case"textarea":_e("invalid",e),h=c=r=null;for(p in a)if(a.hasOwnProperty(p)&&(_=a[p],_!=null))switch(p){case"value":r=_;break;case"defaultValue":c=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(l(91));break;default:Le(e,n,p,_,a,null)}Zf(e,r,c,h);return;case"option":for(S in a)a.hasOwnProperty(S)&&(r=a[S],r!=null)&&(S==="selected"?e.selected=r&&typeof r!="function"&&typeof r!="symbol":Le(e,n,S,r,a,null));return;case"dialog":_e("beforetoggle",e),_e("toggle",e),_e("cancel",e),_e("close",e);break;case"iframe":case"object":_e("load",e);break;case"video":case"audio":for(r=0;r<wl.length;r++)_e(wl[r],e);break;case"image":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"embed":case"source":case"link":_e("error",e),_e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(r=a[R],r!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Le(e,n,R,r,a,null)}return;default:if(Vc(n)){for(k in a)a.hasOwnProperty(k)&&(r=a[k],r!==void 0&&Rd(e,n,k,r,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(r=a[_],r!=null&&Le(e,n,_,r,a,null))}function Qx(e,n,a,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,p=null,_=null,S=null,R=null,k=null;for(D in a){var B=a[D];if(a.hasOwnProperty(D)&&B!=null)switch(D){case"checked":break;case"value":break;case"defaultValue":S=B;default:r.hasOwnProperty(D)||Le(e,n,D,null,r,B)}}for(var O in r){var D=r[O];if(B=a[O],r.hasOwnProperty(O)&&(D!=null||B!=null))switch(O){case"type":h=D;break;case"name":c=D;break;case"checked":R=D;break;case"defaultChecked":k=D;break;case"value":p=D;break;case"defaultValue":_=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(l(137,n));break;default:D!==B&&Le(e,n,O,D,r,B)}}qc(e,p,_,S,R,k,h,c);return;case"select":D=p=_=O=null;for(h in a)if(S=a[h],a.hasOwnProperty(h)&&S!=null)switch(h){case"value":break;case"multiple":D=S;default:r.hasOwnProperty(h)||Le(e,n,h,null,r,S)}for(c in r)if(h=r[c],S=a[c],r.hasOwnProperty(c)&&(h!=null||S!=null))switch(c){case"value":O=h;break;case"defaultValue":_=h;break;case"multiple":p=h;default:h!==S&&Le(e,n,c,h,r,S)}n=_,a=p,r=D,O!=null?Ui(e,!!a,O,!1):!!r!=!!a&&(n!=null?Ui(e,!!a,n,!0):Ui(e,!!a,a?[]:"",!1));return;case"textarea":D=O=null;for(_ in a)if(c=a[_],a.hasOwnProperty(_)&&c!=null&&!r.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Le(e,n,_,null,r,c)}for(p in r)if(c=r[p],h=a[p],r.hasOwnProperty(p)&&(c!=null||h!=null))switch(p){case"value":O=c;break;case"defaultValue":D=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==h&&Le(e,n,p,c,r,h)}Wf(e,O,D);return;case"option":for(var W in a)O=a[W],a.hasOwnProperty(W)&&O!=null&&!r.hasOwnProperty(W)&&(W==="selected"?e.selected=!1:Le(e,n,W,null,r,O));for(S in r)O=r[S],D=a[S],r.hasOwnProperty(S)&&O!==D&&(O!=null||D!=null)&&(S==="selected"?e.selected=O&&typeof O!="function"&&typeof O!="symbol":Le(e,n,S,O,r,D));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ne in a)O=a[ne],a.hasOwnProperty(ne)&&O!=null&&!r.hasOwnProperty(ne)&&Le(e,n,ne,null,r,O);for(R in r)if(O=r[R],D=a[R],r.hasOwnProperty(R)&&O!==D&&(O!=null||D!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(l(137,n));break;default:Le(e,n,R,O,r,D)}return;default:if(Vc(n)){for(var Ue in a)O=a[Ue],a.hasOwnProperty(Ue)&&O!==void 0&&!r.hasOwnProperty(Ue)&&Rd(e,n,Ue,void 0,r,O);for(k in r)O=r[k],D=a[k],!r.hasOwnProperty(k)||O===D||O===void 0&&D===void 0||Rd(e,n,k,O,r,D);return}}for(var T in a)O=a[T],a.hasOwnProperty(T)&&O!=null&&!r.hasOwnProperty(T)&&Le(e,n,T,null,r,O);for(B in r)O=r[B],D=a[B],!r.hasOwnProperty(B)||O===D||O==null&&D==null||Le(e,n,B,O,r,D)}function Fg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Kx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),r=0;r<a.length;r++){var c=a[r],h=c.transferSize,p=c.initiatorType,_=c.duration;if(h&&_&&Fg(p)){for(p=0,_=c.responseEnd,r+=1;r<a.length;r++){var S=a[r],R=S.startTime;if(R>_)break;var k=S.transferSize,B=S.initiatorType;k&&Fg(B)&&(S=S.responseEnd,p+=k*(S<_?1:(_-R)/(S-R)))}if(--r,n+=8*(h+p)/(c.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Od=null,Id=null;function To(e){return e.nodeType===9?e:e.ownerDocument}function ey(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ty(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Dd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Md=null;function Xx(){var e=window.event;return e&&e.type==="popstate"?e===Md?!1:(Md=e,!0):(Md=null,!1)}var ny=typeof setTimeout=="function"?setTimeout:void 0,Wx=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,Zx=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(e){return sy.resolve(null).then(e).catch($x)}:ny;function $x(e){setTimeout(function(){throw e})}function Es(e){return e==="head"}function iy(e,n){var a=n,r=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(r===0){e.removeChild(c),pa(n);return}r--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")r++;else if(a==="html")jl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,jl(a);for(var h=a.firstChild;h;){var p=h.nextSibling,_=h.nodeName;h[Ka]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=p}}else a==="body"&&jl(e.ownerDocument.body);a=c}while(a);pa(n)}function ay(e,n){var a=e;e=0;do{var r=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),r&&r.nodeType===8)if(a=r.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=r}while(a)}function kd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":kd(a),Bc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Jx(e,n,a,r){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Ka])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=cn(e.nextSibling),e===null)break}return null}function Fx(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=cn(e.nextSibling),e===null))return null;return e}function ly(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=cn(e.nextSibling),e===null))return null;return e}function Ld(e){return e.data==="$?"||e.data==="$~"}function Ud(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function e1(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var r=function(){n(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function cn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var zd=null;function ry(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return cn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function oy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function cy(e,n,a){switch(n=To(a),e){case"html":if(e=n.documentElement,!e)throw Error(l(452));return e;case"head":if(e=n.head,!e)throw Error(l(453));return e;case"body":if(e=n.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function jl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Bc(e)}var un=new Map,uy=new Set;function Co(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zn=P.d;P.d={f:t1,r:n1,D:s1,C:i1,L:a1,m:l1,X:o1,S:r1,M:c1};function t1(){var e=Zn.f(),n=yo();return e||n}function n1(e){var n=Mi(e);n!==null&&n.tag===5&&n.type==="form"?wp(n):Zn.r(e)}var ha=typeof document>"u"?null:document;function dy(e,n,a){var r=ha;if(r&&typeof n=="string"&&n){var c=tn(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),uy.has(c)||(uy.add(c),e={rel:e,crossOrigin:a,href:n},r.querySelector(c)===null&&(n=r.createElement("link"),Et(n,"link",e),gt(n),r.head.appendChild(n)))}}function s1(e){Zn.D(e),dy("dns-prefetch",e,null)}function i1(e,n){Zn.C(e,n),dy("preconnect",e,n)}function a1(e,n,a){Zn.L(e,n,a);var r=ha;if(r&&e&&n){var c='link[rel="preload"][as="'+tn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+tn(a.imageSizes)+'"]')):c+='[href="'+tn(e)+'"]';var h=c;switch(n){case"style":h=fa(e);break;case"script":h=ma(e)}un.has(h)||(e=v({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),un.set(h,e),r.querySelector(c)!==null||n==="style"&&r.querySelector(Rl(h))||n==="script"&&r.querySelector(Ol(h))||(n=r.createElement("link"),Et(n,"link",e),gt(n),r.head.appendChild(n)))}}function l1(e,n){Zn.m(e,n);var a=ha;if(a&&e){var r=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+tn(r)+'"][href="'+tn(e)+'"]',h=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ma(e)}if(!un.has(h)&&(e=v({rel:"modulepreload",href:e},n),un.set(h,e),a.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ol(h)))return}r=a.createElement("link"),Et(r,"link",e),gt(r),a.head.appendChild(r)}}}function r1(e,n,a){Zn.S(e,n,a);var r=ha;if(r&&e){var c=ki(r).hoistableStyles,h=fa(e);n=n||"default";var p=c.get(h);if(!p){var _={loading:0,preload:null};if(p=r.querySelector(Rl(h)))_.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},a),(a=un.get(h))&&Hd(e,a);var S=p=r.createElement("link");gt(S),Et(S,"link",e),S._p=new Promise(function(R,k){S.onload=R,S.onerror=k}),S.addEventListener("load",function(){_.loading|=1}),S.addEventListener("error",function(){_.loading|=2}),_.loading|=4,wo(p,n,r)}p={type:"stylesheet",instance:p,count:1,state:_},c.set(h,p)}}}function o1(e,n){Zn.X(e,n);var a=ha;if(a&&e){var r=ki(a).hoistableScripts,c=ma(e),h=r.get(c);h||(h=a.querySelector(Ol(c)),h||(e=v({src:e,async:!0},n),(n=un.get(c))&&Bd(e,n),h=a.createElement("script"),gt(h),Et(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},r.set(c,h))}}function c1(e,n){Zn.M(e,n);var a=ha;if(a&&e){var r=ki(a).hoistableScripts,c=ma(e),h=r.get(c);h||(h=a.querySelector(Ol(c)),h||(e=v({src:e,async:!0,type:"module"},n),(n=un.get(c))&&Bd(e,n),h=a.createElement("script"),gt(h),Et(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},r.set(c,h))}}function hy(e,n,a,r){var c=(c=oe.current)?Co(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=fa(a.href),a=ki(c).hoistableStyles,r=a.get(n),r||(r={type:"style",instance:null,count:0,state:null},a.set(n,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=fa(a.href);var h=ki(c).hoistableStyles,p=h.get(e);if(p||(c=c.ownerDocument||c,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,p),(h=c.querySelector(Rl(e)))&&!h._p&&(p.instance=h,p.state.loading=5),un.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},un.set(e,a),h||u1(c,e,a,p.state))),n&&r===null)throw Error(l(528,""));return p}if(n&&r!==null)throw Error(l(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ma(a),a=ki(c).hoistableScripts,r=a.get(n),r||(r={type:"script",instance:null,count:0,state:null},a.set(n,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function fa(e){return'href="'+tn(e)+'"'}function Rl(e){return'link[rel="stylesheet"]['+e+"]"}function fy(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function u1(e,n,a,r){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?r.loading=1:(n=e.createElement("link"),r.preload=n,n.addEventListener("load",function(){return r.loading|=1}),n.addEventListener("error",function(){return r.loading|=2}),Et(n,"link",a),gt(n),e.head.appendChild(n))}function ma(e){return'[src="'+tn(e)+'"]'}function Ol(e){return"script[async]"+e}function my(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var r=e.querySelector('style[data-href~="'+tn(a.href)+'"]');if(r)return n.instance=r,gt(r),r;var c=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),gt(r),Et(r,"style",c),wo(r,a.precedence,e),n.instance=r;case"stylesheet":c=fa(a.href);var h=e.querySelector(Rl(c));if(h)return n.state.loading|=4,n.instance=h,gt(h),h;r=fy(a),(c=un.get(c))&&Hd(r,c),h=(e.ownerDocument||e).createElement("link"),gt(h);var p=h;return p._p=new Promise(function(_,S){p.onload=_,p.onerror=S}),Et(h,"link",r),n.state.loading|=4,wo(h,a.precedence,e),n.instance=h;case"script":return h=ma(a.src),(c=e.querySelector(Ol(h)))?(n.instance=c,gt(c),c):(r=a,(c=un.get(h))&&(r=v({},a),Bd(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),gt(c),Et(c,"link",r),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(r=n.instance,n.state.loading|=4,wo(r,a.precedence,e));return n.instance}function wo(e,n,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,h=c,p=0;p<r.length;p++){var _=r[p];if(_.dataset.precedence===n)h=_;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Hd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Bd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Ao=null;function py(e,n,a){if(Ao===null){var r=new Map,c=Ao=new Map;c.set(a,r)}else c=Ao,r=c.get(a),r||(r=new Map,c.set(a,r));if(r.has(e))return r;for(r.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var h=a[c];if(!(h[Ka]||h[bt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var p=h.getAttribute(n)||"";p=e+p;var _=r.get(p);_?_.push(h):r.set(p,[h])}}return r}function gy(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function d1(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function yy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function h1(e,n,a,r){if(a.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=fa(r.href),h=n.querySelector(Rl(c));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=jo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=h,gt(h);return}h=n.ownerDocument||n,r=fy(r),(c=un.get(c))&&Hd(r,c),h=h.createElement("link"),gt(h);var p=h;p._p=new Promise(function(_,S){p.onload=_,p.onerror=S}),Et(h,"link",r),a.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=jo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Pd=0;function f1(e,n){return e.stylesheets&&e.count===0&&Oo(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var r=setTimeout(function(){if(e.stylesheets&&Oo(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+n);0<e.imgBytes&&Pd===0&&(Pd=62500*Kx());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Oo(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Pd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(c)}}:null}function jo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Oo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ro=null;function Oo(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ro=new Map,n.forEach(m1,e),Ro=null,jo.call(e))}function m1(e,n){if(!(n.state.loading&4)){var a=Ro.get(e);if(a)var r=a.get(null);else{a=new Map,Ro.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var p=c[h];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),r=p)}r&&a.set(null,r)}c=n.instance,p=c.getAttribute("data-precedence"),h=a.get(p)||r,h===r&&a.set(null,c),a.set(p,c),this.count++,r=jo.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var Il={$$typeof:Q,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function p1(e,n,a,r,c,h,p,_,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tr(0),this.hiddenUpdates=Tr(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function _y(e,n,a,r,c,h,p,_,S,R,k,B){return e=new p1(e,n,a,p,S,R,k,B,_),n=1,h===!0&&(n|=24),h=Kt(3,null,null,n),e.current=h,h.stateNode=e,n=bu(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:r,isDehydrated:a,cache:n},Eu(h),e}function vy(e){return e?(e=Yi,e):Yi}function by(e,n,a,r,c,h){c=vy(c),r.context===null?r.context=c:r.pendingContext=c,r=fs(n),r.payload={element:a},h=h===void 0?null:h,h!==null&&(r.callback=h),a=ms(e,r,n),a!==null&&(Vt(a,e,n),ul(a,e,n))}function xy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function qd(e,n){xy(e,n),(e=e.alternate)&&xy(e,n)}function Sy(e){if(e.tag===13||e.tag===31){var n=Fs(e,67108864);n!==null&&Vt(n,e,67108864),qd(e,67108864)}}function Ny(e){if(e.tag===13||e.tag===31){var n=Jt();n=Uc(n);var a=Fs(e,n);a!==null&&Vt(a,e,n),qd(e,n)}}var Io=!0;function g1(e,n,a,r){var c=w.T;w.T=null;var h=P.p;try{P.p=2,Gd(e,n,a,r)}finally{P.p=h,w.T=c}}function y1(e,n,a,r){var c=w.T;w.T=null;var h=P.p;try{P.p=8,Gd(e,n,a,r)}finally{P.p=h,w.T=c}}function Gd(e,n,a,r){if(Io){var c=Vd(r);if(c===null)jd(e,n,r,Do,a),Ty(e,r);else if(v1(c,e,n,a,r))r.stopPropagation();else if(Ty(e,r),n&4&&-1<_1.indexOf(e)){for(;c!==null;){var h=Mi(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var p=Re(h.pendingLanes);if(p!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;p;){var S=1<<31-Rt(p);_.entanglements[1]|=S,p&=~S}An(h),(je&6)===0&&(po=jt()+500,Cl(0))}}break;case 31:case 13:_=Fs(h,2),_!==null&&Vt(_,h,2),yo(),qd(h,2)}if(h=Vd(r),h===null&&jd(e,n,r,Do,a),h===c)break;c=h}c!==null&&r.stopPropagation()}else jd(e,n,r,null,a)}}function Vd(e){return e=Qc(e),Yd(e)}var Do=null;function Yd(e){if(Do=null,e=Di(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===31){if(e=m(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Do=e,null}function Ey(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xr()){case Ut:return 2;case ji:return 8;case Xs:case Va:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var Qd=!1,Ts=null,Cs=null,ws=null,Dl=new Map,Ml=new Map,As=[],_1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ty(e,n){switch(e){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":Dl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(n.pointerId)}}function kl(e,n,a,r,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:a,eventSystemFlags:r,nativeEvent:h,targetContainers:[c]},n!==null&&(n=Mi(n),n!==null&&Sy(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function v1(e,n,a,r,c){switch(n){case"focusin":return Ts=kl(Ts,e,n,a,r,c),!0;case"dragenter":return Cs=kl(Cs,e,n,a,r,c),!0;case"mouseover":return ws=kl(ws,e,n,a,r,c),!0;case"pointerover":var h=c.pointerId;return Dl.set(h,kl(Dl.get(h)||null,e,n,a,r,c)),!0;case"gotpointercapture":return h=c.pointerId,Ml.set(h,kl(Ml.get(h)||null,e,n,a,r,c)),!0}return!1}function Cy(e){var n=Di(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,Bf(e.priority,function(){Ny(a)});return}}else if(n===31){if(n=m(a),n!==null){e.blockedOn=n,Bf(e.priority,function(){Ny(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Vd(e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);Yc=r,a.target.dispatchEvent(r),Yc=null}else return n=Mi(a),n!==null&&Sy(n),e.blockedOn=a,!1;n.shift()}return!0}function wy(e,n,a){Mo(e)&&a.delete(n)}function b1(){Qd=!1,Ts!==null&&Mo(Ts)&&(Ts=null),Cs!==null&&Mo(Cs)&&(Cs=null),ws!==null&&Mo(ws)&&(ws=null),Dl.forEach(wy),Ml.forEach(wy)}function ko(e,n){e.blockedOn===n&&(e.blockedOn=null,Qd||(Qd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,b1)))}var Lo=null;function Ay(e){Lo!==e&&(Lo=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Lo===e&&(Lo=null);for(var n=0;n<e.length;n+=3){var a=e[n],r=e[n+1],c=e[n+2];if(typeof r!="function"){if(Yd(r||a)===null)continue;break}var h=Mi(a);h!==null&&(e.splice(n,3),n-=3,Vu(h,{pending:!0,data:c,method:a.method,action:r},r,c))}}))}function pa(e){function n(S){return ko(S,e)}Ts!==null&&ko(Ts,e),Cs!==null&&ko(Cs,e),ws!==null&&ko(ws,e),Dl.forEach(n),Ml.forEach(n);for(var a=0;a<As.length;a++){var r=As[a];r.blockedOn===e&&(r.blockedOn=null)}for(;0<As.length&&(a=As[0],a.blockedOn===null);)Cy(a),a.blockedOn===null&&As.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var c=a[r],h=a[r+1],p=c[zt]||null;if(typeof h=="function")p||Ay(a);else if(p){var _=null;if(h&&h.hasAttribute("formAction")){if(c=h,p=h[zt]||null)_=p.formAction;else if(Yd(c)!==null)continue}else _=p.action;typeof _=="function"?a[r+1]=_:(a.splice(r,3),r-=3),Ay(a)}}}function jy(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(p){return c=p})},focusReset:"manual",scroll:"manual"})}function n(){c!==null&&(c(),c=null),r||setTimeout(a,20)}function a(){if(!r&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),c!==null&&(c(),c=null)}}}function Kd(e){this._internalRoot=e}Uo.prototype.render=Kd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(l(409));var a=n.current,r=Jt();by(a,r,e,n,null,null)},Uo.prototype.unmount=Kd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;by(e.current,2,null,e,null,null),yo(),n[Ii]=null}};function Uo(e){this._internalRoot=e}Uo.prototype.unstable_scheduleHydration=function(e){if(e){var n=Hf();e={blockedOn:null,target:e,priority:n};for(var a=0;a<As.length&&n!==0&&n<As[a].priority;a++);As.splice(a,0,e),a===0&&Cy(e)}};var Ry=t.version;if(Ry!=="19.2.4")throw Error(l(527,Ry,"19.2.4"));P.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=g(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var x1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zo.isDisabled&&zo.supportsFiber)try{Oi=zo.inject(x1),wt=zo}catch{}}return Ul.createRoot=function(e,n){if(!o(e))throw Error(l(299));var a=!1,r="",c=Up,h=zp,p=Hp;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=_y(e,1,!1,null,null,a,r,null,c,h,p,jy),e[Ii]=n.current,Ad(e),new Kd(n)},Ul.hydrateRoot=function(e,n,a){if(!o(e))throw Error(l(299));var r=!1,c="",h=Up,p=zp,_=Hp,S=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),n=_y(e,1,!0,n,a??null,r,c,S,h,p,_,jy),n.context=vy(null),a=n.current,r=Jt(),r=Uc(r),c=fs(r),c.callback=null,ms(a,c,r),a=r,n.current.lanes=a,En(n,a),An(n),e[Ii]=n.current,Ad(e),new Uo(n)},Ul.version="19.2.4",Ul}var By;function D1(){if(By)return Zd.exports;By=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Zd.exports=I1(),Zd.exports}var M1=D1();const k1=()=>{};var Py={};const $_={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const Y=function(i,t){if(!i)throw Ia(t)},Ia=function(i){return new Error("Firebase Database ("+$_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};const J_=function(i){const t=[];let s=0;for(let l=0;l<i.length;l++){let o=i.charCodeAt(l);o<128?t[s++]=o:o<2048?(t[s++]=o>>6|192,t[s++]=o&63|128):(o&64512)===55296&&l+1<i.length&&(i.charCodeAt(l+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++l)&1023),t[s++]=o>>18|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128,t[s++]=o&63|128):(t[s++]=o>>12|224,t[s++]=o>>6&63|128,t[s++]=o&63|128)}return t},L1=function(i){const t=[];let s=0,l=0;for(;s<i.length;){const o=i[s++];if(o<128)t[l++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[s++];t[l++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[s++],f=i[s++],m=i[s++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[l++]=String.fromCharCode(55296+(y>>10)),t[l++]=String.fromCharCode(56320+(y&1023))}else{const u=i[s++],f=i[s++];t[l++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},Bh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,l=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,y=o+2<i.length,g=y?i[o+2]:0,x=u>>2,v=(u&3)<<4|m>>4;let b=(m&15)<<2|g>>6,C=g&63;y||(C=64,f||(b=64)),l.push(s[x],s[v],s[b],s[C])}return l.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(J_(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):L1(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,l=[];for(let o=0;o<i.length;){const u=s[i.charAt(o++)],m=o<i.length?s[i.charAt(o)]:0;++o;const g=o<i.length?s[i.charAt(o)]:64;++o;const v=o<i.length?s[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||v==null)throw new U1;const b=u<<2|m>>4;if(l.push(b),g!==64){const C=m<<4&240|g>>2;if(l.push(C),v!==64){const A=g<<6&192|v;l.push(A)}}}return l},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class U1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F_=function(i){const t=J_(i);return Bh.encodeByteArray(t,!0)},Ko=function(i){return F_(i).replace(/\./g,"")},Xo=function(i){try{return Bh.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function z1(i){return e0(void 0,i)}function e0(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const s=t;return new Date(s.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(const s in t)!t.hasOwnProperty(s)||!H1(s)||(i[s]=e0(i[s],t[s]));return i}function H1(i){return i!=="__proto__"}function B1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const P1=()=>B1().__FIREBASE_DEFAULTS__,q1=()=>{if(typeof process>"u"||typeof Py>"u")return;const i=Py.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},G1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&Xo(i[1]);return t&&JSON.parse(t)},Ph=()=>{try{return k1()||P1()||q1()||G1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},t0=i=>Ph()?.emulatorHosts?.[i],V1=i=>{const t=t0(i);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const l=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),l]:[t.substring(0,s),l]},n0=()=>Ph()?.config,s0=i=>Ph()?.[`_${i}`];class cr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,l)=>{s?this.reject(s):this.resolve(l),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,l))}}}function Da(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function i0(i){return(await fetch(i,{credentials:"include"})).ok}function Y1(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},l=t||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${l}`,aud:l,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Ko(JSON.stringify(s)),Ko(JSON.stringify(f)),""].join(".")}const Vl={};function Q1(){const i={prod:[],emulator:[]};for(const t of Object.keys(Vl))Vl[t]?i.emulator.push(t):i.prod.push(t);return i}function K1(i){let t=document.getElementById(i),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),s=!0),{created:s,element:t}}let qy=!1;function a0(i,t){if(typeof window>"u"||typeof document>"u"||!Da(window.location.host)||Vl[i]===t||Vl[i]||qy)return;Vl[i]=t;function s(b){return`__firebase__banner__${b}`}const l="__firebase__banner",u=Q1().prod.length>0;function f(){const b=document.getElementById(l);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function y(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{qy=!0,f()},b}function x(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=K1(l),C=s("text"),A=document.getElementById(C)||document.createElement("span"),L=s("learnmore"),I=document.getElementById(L)||document.createElement("a"),U=s("preprendIcon"),q=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const Q=b.element;m(Q),x(I,L);const ee=g();y(q,U),Q.append(q,A,I,ee),document.body.appendChild(Q)}u?(A.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function X1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function l0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Z1(){const i=kt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function $1(){return $_.NODE_ADMIN===!0}function J1(){try{return typeof indexedDB=="object"}catch{return!1}}function F1(){return new Promise((i,t)=>{try{let s=!0;const l="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(l);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(l),i(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(s){t(s)}})}const eS="FirebaseError";class Vs extends Error{constructor(t,s,l){super(s),this.code=t,this.customData=l,this.name=eS,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ur.prototype.create)}}class ur{constructor(t,s,l){this.service=t,this.serviceName=s,this.errors=l}create(t,...s){const l=s[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?tS(u,l):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Vs(o,m,l)}}function tS(i,t){return i.replace(nS,(s,l)=>{const o=t[l];return o!=null?String(o):`<${l}?>`})}const nS=/\{\$([^}]+)}/g;function $l(i){return JSON.parse(i)}function ft(i){return JSON.stringify(i)}const r0=function(i){let t={},s={},l={},o="";try{const u=i.split(".");t=$l(Xo(u[0])||""),s=$l(Xo(u[1])||""),o=u[2],l=s.d||{},delete s.d}catch{}return{header:t,claims:s,data:l,signature:o}},sS=function(i){const t=r0(i),s=t.claims;return!!s&&typeof s=="object"&&s.hasOwnProperty("iat")},iS=function(i){const t=r0(i).claims;return typeof t=="object"&&t.admin===!0};function On(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function Ta(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function ph(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Wo(i,t,s){const l={};for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&(l[o]=t.call(s,i[o],o,i));return l}function pi(i,t){if(i===t)return!0;const s=Object.keys(i),l=Object.keys(t);for(const o of s){if(!l.includes(o))return!1;const u=i[o],f=t[o];if(Gy(u)&&Gy(f)){if(!pi(u,f))return!1}else if(u!==f)return!1}for(const o of l)if(!s.includes(o))return!1;return!0}function Gy(i){return i!==null&&typeof i=="object"}function Ma(i){const t=[];for(const[s,l]of Object.entries(i))Array.isArray(l)?l.forEach(o=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(l));return t.length?"&"+t.join("&"):""}function ql(i){const t={};return i.replace(/^\?/,"").split("&").forEach(l=>{if(l){const[o,u]=l.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function Gl(i){const t=i.indexOf("?");if(!t)return"";const s=i.indexOf("#",t);return i.substring(t,s>0?s:void 0)}class aS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,s){s||(s=0);const l=this.W_;if(typeof t=="string")for(let v=0;v<16;v++)l[v]=t.charCodeAt(s)<<24|t.charCodeAt(s+1)<<16|t.charCodeAt(s+2)<<8|t.charCodeAt(s+3),s+=4;else for(let v=0;v<16;v++)l[v]=t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3],s+=4;for(let v=16;v<80;v++){const b=l[v-3]^l[v-8]^l[v-14]^l[v-16];l[v]=(b<<1|b>>>31)&4294967295}let o=this.chain_[0],u=this.chain_[1],f=this.chain_[2],m=this.chain_[3],y=this.chain_[4],g,x;for(let v=0;v<80;v++){v<40?v<20?(g=m^u&(f^m),x=1518500249):(g=u^f^m,x=1859775393):v<60?(g=u&f|m&(u|f),x=2400959708):(g=u^f^m,x=3395469782);const b=(o<<5|o>>>27)+g+y+x+l[v]&4294967295;y=m,m=f,f=(u<<30|u>>>2)&4294967295,u=o,o=b}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+y&4294967295}update(t,s){if(t==null)return;s===void 0&&(s=t.length);const l=s-this.blockSize;let o=0;const u=this.buf_;let f=this.inbuf_;for(;o<s;){if(f===0)for(;o<=l;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<s;)if(u[f]=t.charCodeAt(o),++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}else for(;o<s;)if(u[f]=t[o],++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}this.inbuf_=f,this.total_+=s}digest(){const t=[];let s=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=s&255,s/=256;this.compress_(this.buf_);let l=0;for(let o=0;o<5;o++)for(let u=24;u>=0;u-=8)t[l]=this.chain_[o]>>u&255,++l;return t}}function lS(i,t){const s=new rS(i,t);return s.subscribe.bind(s)}class rS{constructor(t,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{t(this)}).catch(l=>{this.error(l)})}next(t){this.forEachObserver(s=>{s.next(t)})}error(t){this.forEachObserver(s=>{s.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,s,l){let o;if(t===void 0&&s===void 0&&l===void 0)throw new Error("Missing Observer.");oS(t,["next","error","complete"])?o=t:o={next:t,error:s,complete:l},o.next===void 0&&(o.next=eh),o.error===void 0&&(o.error=eh),o.complete===void 0&&(o.complete=eh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,t)}sendOne(t,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{s(this.observers[t])}catch(l){typeof console<"u"&&console.error&&console.error(l)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oS(i,t){if(typeof i!="object"||i===null)return!1;for(const s of t)if(s in i&&typeof i[s]=="function")return!0;return!1}function eh(){}function gc(i,t){return`${i} failed: ${t} argument `}const cS=function(i){const t=[];let s=0;for(let l=0;l<i.length;l++){let o=i.charCodeAt(l);if(o>=55296&&o<=56319){const u=o-55296;l++,Y(l<i.length,"Surrogate pair missing trail surrogate.");const f=i.charCodeAt(l)-56320;o=65536+(u<<10)+f}o<128?t[s++]=o:o<2048?(t[s++]=o>>6|192,t[s++]=o&63|128):o<65536?(t[s++]=o>>12|224,t[s++]=o>>6&63|128,t[s++]=o&63|128):(t[s++]=o>>18|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128,t[s++]=o&63|128)}return t},yc=function(i){let t=0;for(let s=0;s<i.length;s++){const l=i.charCodeAt(s);l<128?t++:l<2048?t+=2:l>=55296&&l<=56319?(t+=4,s++):t+=3}return t};function Lt(i){return i&&i._delegate?i._delegate:i}class gi{constructor(t,s,l){this.name=t,this.instanceFactory=s,this.type=l,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const hi="[DEFAULT]";class uS{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const l=new cr;if(this.instancesDeferred.set(s,l),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&l.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t?.identifier),l=t?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(l)return null;throw o}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hS(t))try{this.getOrInitializeService({instanceIdentifier:hi})}catch{}for(const[s,l]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:o});l.resolve(u)}catch{}}}}clearInstance(t=hi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=hi){return this.instances.has(t)}getOptions(t=hi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,l=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(l))throw Error(`${this.name}(${l}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:l,options:s});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);l===m&&f.resolve(o)}return o}onInit(t,s){const l=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(l)??new Set;o.add(t),this.onInitCallbacks.set(l,o);const u=this.instances.get(l);return u&&t(u,l),()=>{o.delete(t)}}invokeOnInitCallbacks(t,s){const l=this.onInitCallbacks.get(s);if(l)for(const o of l)try{o(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let l=this.instances.get(t);if(!l&&this.component&&(l=this.component.instanceFactory(this.container,{instanceIdentifier:dS(t),options:s}),this.instances.set(t,l),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(l,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,l)}catch{}return l||null}normalizeInstanceIdentifier(t=hi){return this.component?this.component.multipleInstances?t:hi:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dS(i){return i===hi?void 0:i}function hS(i){return i.instantiationMode==="EAGER"}class fS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new uS(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}var ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ze||(ze={}));const mS={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},pS=ze.INFO,gS={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},yS=(i,t,...s)=>{if(t<i.logLevel)return;const l=new Date().toISOString(),o=gS[t];if(o)console[o](`[${l}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Gh{constructor(t){this.name=t,this._logLevel=pS,this._logHandler=yS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ze))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?mS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...t),this._logHandler(this,ze.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...t),this._logHandler(this,ze.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...t),this._logHandler(this,ze.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...t),this._logHandler(this,ze.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...t),this._logHandler(this,ze.ERROR,...t)}}const _S=(i,t)=>t.some(s=>i instanceof s);let Vy,Yy;function vS(){return Vy||(Vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bS(){return Yy||(Yy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o0=new WeakMap,gh=new WeakMap,c0=new WeakMap,th=new WeakMap,Vh=new WeakMap;function xS(i){const t=new Promise((s,l)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{s(Ls(i.result)),o()},f=()=>{l(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return t.then(s=>{s instanceof IDBCursor&&o0.set(s,i)}).catch(()=>{}),Vh.set(t,i),t}function SS(i){if(gh.has(i))return;const t=new Promise((s,l)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{s(),o()},f=()=>{l(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});gh.set(i,t)}let yh={get(i,t,s){if(i instanceof IDBTransaction){if(t==="done")return gh.get(i);if(t==="objectStoreNames")return i.objectStoreNames||c0.get(i);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Ls(i[t])},set(i,t,s){return i[t]=s,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function NS(i){yh=i(yh)}function ES(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const l=i.call(nh(this),t,...s);return c0.set(l,t.sort?t.sort():[t]),Ls(l)}:bS().includes(i)?function(...t){return i.apply(nh(this),t),Ls(o0.get(this))}:function(...t){return Ls(i.apply(nh(this),t))}}function TS(i){return typeof i=="function"?ES(i):(i instanceof IDBTransaction&&SS(i),_S(i,vS())?new Proxy(i,yh):i)}function Ls(i){if(i instanceof IDBRequest)return xS(i);if(th.has(i))return th.get(i);const t=TS(i);return t!==i&&(th.set(i,t),Vh.set(t,i)),t}const nh=i=>Vh.get(i);function CS(i,t,{blocked:s,upgrade:l,blocking:o,terminated:u}={}){const f=indexedDB.open(i,t),m=Ls(f);return l&&f.addEventListener("upgradeneeded",y=>{l(Ls(f.result),y.oldVersion,y.newVersion,Ls(f.transaction),y)}),s&&f.addEventListener("blocked",y=>s(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const wS=["get","getKey","getAll","getAllKeys","count"],AS=["put","add","delete","clear"],sh=new Map;function Qy(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(sh.get(t))return sh.get(t);const s=t.replace(/FromIndex$/,""),l=t!==s,o=AS.includes(s);if(!(s in(l?IDBIndex:IDBObjectStore).prototype)||!(o||wS.includes(s)))return;const u=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let g=y.store;return l&&(g=g.index(m.shift())),(await Promise.all([g[s](...m),o&&y.done]))[0]};return sh.set(t,u),u}NS(i=>({...i,get:(t,s,l)=>Qy(t,s)||i.get(t,s,l),has:(t,s)=>!!Qy(t,s)||i.has(t,s)}));class jS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(RS(s)){const l=s.getImmediate();return`${l.library}/${l.version}`}else return null}).filter(s=>s).join(" ")}}function RS(i){return i.getComponent()?.type==="VERSION"}const _h="@firebase/app",Ky="0.14.8";const ns=new Gh("@firebase/app"),OS="@firebase/app-compat",IS="@firebase/analytics-compat",DS="@firebase/analytics",MS="@firebase/app-check-compat",kS="@firebase/app-check",LS="@firebase/auth",US="@firebase/auth-compat",zS="@firebase/database",HS="@firebase/data-connect",BS="@firebase/database-compat",PS="@firebase/functions",qS="@firebase/functions-compat",GS="@firebase/installations",VS="@firebase/installations-compat",YS="@firebase/messaging",QS="@firebase/messaging-compat",KS="@firebase/performance",XS="@firebase/performance-compat",WS="@firebase/remote-config",ZS="@firebase/remote-config-compat",$S="@firebase/storage",JS="@firebase/storage-compat",FS="@firebase/firestore",eN="@firebase/ai",tN="@firebase/firestore-compat",nN="firebase",sN="12.9.0";const vh="[DEFAULT]",iN={[_h]:"fire-core",[OS]:"fire-core-compat",[DS]:"fire-analytics",[IS]:"fire-analytics-compat",[kS]:"fire-app-check",[MS]:"fire-app-check-compat",[LS]:"fire-auth",[US]:"fire-auth-compat",[zS]:"fire-rtdb",[HS]:"fire-data-connect",[BS]:"fire-rtdb-compat",[PS]:"fire-fn",[qS]:"fire-fn-compat",[GS]:"fire-iid",[VS]:"fire-iid-compat",[YS]:"fire-fcm",[QS]:"fire-fcm-compat",[KS]:"fire-perf",[XS]:"fire-perf-compat",[WS]:"fire-rc",[ZS]:"fire-rc-compat",[$S]:"fire-gcs",[JS]:"fire-gcs-compat",[FS]:"fire-fst",[tN]:"fire-fst-compat",[eN]:"fire-vertex","fire-js":"fire-js",[nN]:"fire-js-all"};const Zo=new Map,aN=new Map,bh=new Map;function Xy(i,t){try{i.container.addComponent(t)}catch(s){ns.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,s)}}function Ca(i){const t=i.name;if(bh.has(t))return ns.debug(`There were multiple attempts to register component ${t}.`),!1;bh.set(t,i);for(const s of Zo.values())Xy(s,i);for(const s of aN.values())Xy(s,i);return!0}function Yh(i,t){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(t)}function dn(i){return i==null?!1:i.settings!==void 0}const lN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new ur("app","Firebase",lN);class rN{constructor(t,s,l){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=l,this.container.addComponent(new gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}const ka=sN;function u0(i,t={}){let s=i;typeof t!="object"&&(t={name:t});const l={name:vh,automaticDataCollectionEnabled:!0,...t},o=l.name;if(typeof o!="string"||!o)throw Us.create("bad-app-name",{appName:String(o)});if(s||(s=n0()),!s)throw Us.create("no-options");const u=Zo.get(o);if(u){if(pi(s,u.options)&&pi(l,u.config))return u;throw Us.create("duplicate-app",{appName:o})}const f=new fS(o);for(const y of bh.values())f.addComponent(y);const m=new rN(s,l,f);return Zo.set(o,m),m}function d0(i=vh){const t=Zo.get(i);if(!t&&i===vh&&n0())return u0();if(!t)throw Us.create("no-app",{appName:i});return t}function zs(i,t,s){let l=iN[i]??i;s&&(l+=`-${s}`);const o=l.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const f=[`Unable to register library "${l}" with version "${t}":`];o&&f.push(`library name "${l}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ns.warn(f.join(" "));return}Ca(new gi(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}const oN="firebase-heartbeat-database",cN=1,Jl="firebase-heartbeat-store";let ih=null;function h0(){return ih||(ih=CS(oN,cN,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Jl)}catch(s){console.warn(s)}}}}).catch(i=>{throw Us.create("idb-open",{originalErrorMessage:i.message})})),ih}async function uN(i){try{const s=(await h0()).transaction(Jl),l=await s.objectStore(Jl).get(f0(i));return await s.done,l}catch(t){if(t instanceof Vs)ns.warn(t.message);else{const s=Us.create("idb-get",{originalErrorMessage:t?.message});ns.warn(s.message)}}}async function Wy(i,t){try{const l=(await h0()).transaction(Jl,"readwrite");await l.objectStore(Jl).put(t,f0(i)),await l.done}catch(s){if(s instanceof Vs)ns.warn(s.message);else{const l=Us.create("idb-set",{originalErrorMessage:s?.message});ns.warn(l.message)}}}function f0(i){return`${i.name}!${i.options.appId}`}const dN=1024,hN=30;class fN{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new pN(s),this._heartbeatsCachePromise=this._storage.read().then(l=>(this._heartbeatsCache=l,l))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Zy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(o=>o.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>hN){const o=gN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ns.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zy(),{heartbeatsToSend:s,unsentEntries:l}=mN(this._heartbeatsCache.heartbeats),o=Ko(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ns.warn(t),""}}}function Zy(){return new Date().toISOString().substring(0,10)}function mN(i,t=dN){const s=[];let l=i.slice();for(const o of i){const u=s.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),$y(s)>t){u.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),$y(s)>t){s.pop();break}l=l.slice(1)}return{heartbeatsToSend:s,unsentEntries:l}}class pN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J1()?F1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await uN(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const l=await this.read();return Wy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const l=await this.read();return Wy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function $y(i){return Ko(JSON.stringify({version:2,heartbeats:i})).length}function gN(i){if(i.length===0)return-1;let t=0,s=i[0].date;for(let l=1;l<i.length;l++)i[l].date<s&&(s=i[l].date,t=l);return t}function yN(i){Ca(new gi("platform-logger",t=>new jS(t),"PRIVATE")),Ca(new gi("heartbeat",t=>new fN(t),"PRIVATE")),zs(_h,Ky,i),zs(_h,Ky,"esm2020"),zs("fire-js","")}yN("");function m0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _N=m0,p0=new ur("auth","Firebase",m0());const $o=new Gh("@firebase/auth");function vN(i,...t){$o.logLevel<=ze.WARN&&$o.warn(`Auth (${ka}): ${i}`,...t)}function qo(i,...t){$o.logLevel<=ze.ERROR&&$o.error(`Auth (${ka}): ${i}`,...t)}function Sn(i,...t){throw Qh(i,...t)}function jn(i,...t){return Qh(i,...t)}function g0(i,t,s){const l={..._N(),[t]:s};return new ur("auth","Firebase",l).create(t,{appName:i.name})}function es(i){return g0(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qh(i,...t){if(typeof i!="string"){const s=t[0],l=[...t.slice(1)];return l[0]&&(l[0].appName=i.name),i._errorFactory.create(s,...l)}return p0.create(i,...t)}function se(i,t,...s){if(!i)throw Qh(t,...s)}function $n(i){const t="INTERNAL ASSERTION FAILED: "+i;throw qo(t),new Error(t)}function ss(i,t){i||$n(t)}function xh(){return typeof self<"u"&&self.location?.href||""}function bN(){return Jy()==="http:"||Jy()==="https:"}function Jy(){return typeof self<"u"&&self.location?.protocol||null}function xN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bN()||W1()||"connection"in navigator)?navigator.onLine:!0}function SN(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class dr{constructor(t,s){this.shortDelay=t,this.longDelay=s,ss(s>t,"Short delay should be less than long delay!"),this.isMobile=qh()||l0()}get(){return xN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kh(i,t){ss(i.emulator,"Emulator should always be set here");const{url:s}=i.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}class y0{static initialize(t,s,l){this.fetchImpl=t,s&&(this.headersImpl=s),l&&(this.responseImpl=l)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const NN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const EN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TN=new dr(3e4,6e4);function Ys(i,t){return i.tenantId&&!t.tenantId?{...t,tenantId:i.tenantId}:t}async function Qs(i,t,s,l,o={}){return _0(i,o,async()=>{let u={},f={};l&&(t==="GET"?f=l:u={body:JSON.stringify(l)});const m=Ma({key:i.config.apiKey,...f}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const g={method:t,headers:y,...u};return X1()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Da(i.emulatorConfig.host)&&(g.credentials="include"),y0.fetch()(await v0(i,i.config.apiHost,s,m),g)})}async function _0(i,t,s){i._canInitEmulator=!1;const l={...NN,...t};try{const o=new wN(i),u=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Ho(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[y,g]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ho(i,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Ho(i,"email-already-in-use",f);if(y==="USER_DISABLED")throw Ho(i,"user-disabled",f);const x=l[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw g0(i,x,g);Sn(i,x)}}catch(o){if(o instanceof Vs)throw o;Sn(i,"network-request-failed",{message:String(o)})}}async function hr(i,t,s,l,o={}){const u=await Qs(i,t,s,l,o);return"mfaPendingCredential"in u&&Sn(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function v0(i,t,s,l){const o=`${t}${s}?${l}`,u=i,f=u.config.emulator?Kh(i.config,o):`${i.config.apiScheme}://${o}`;return EN.includes(s)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function CN(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((s,l)=>{this.timer=setTimeout(()=>l(jn(this.auth,"network-request-failed")),TN.get())})}}function Ho(i,t,s){const l={appName:i.name};s.email&&(l.email=s.email),s.phoneNumber&&(l.phoneNumber=s.phoneNumber);const o=jn(i,t,l);return o.customData._tokenResponse=s,o}function Fy(i){return i!==void 0&&i.enterprise!==void 0}class AN{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===t)return CN(s.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jN(i,t){return Qs(i,"GET","/v2/recaptchaConfig",Ys(i,t))}async function RN(i,t){return Qs(i,"POST","/v1/accounts:delete",t)}async function Jo(i,t){return Qs(i,"POST","/v1/accounts:lookup",t)}function Yl(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ON(i,t=!1){const s=Lt(i),l=await s.getIdToken(t),o=Xh(l);se(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:l,authTime:Yl(ah(o.auth_time)),issuedAtTime:Yl(ah(o.iat)),expirationTime:Yl(ah(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ah(i){return Number(i)*1e3}function Xh(i){const[t,s,l]=i.split(".");if(t===void 0||s===void 0||l===void 0)return qo("JWT malformed, contained fewer than 3 sections"),null;try{const o=Xo(s);return o?JSON.parse(o):(qo("Failed to decode base64 JWT payload"),null)}catch(o){return qo("Caught error parsing JWT payload as JSON",o?.toString()),null}}function e_(i){const t=Xh(i);return se(t,"internal-error"),se(typeof t.exp<"u","internal-error"),se(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Fl(i,t,s=!1){if(s)return t;try{return await t}catch(l){throw l instanceof Vs&&IN(l)&&i.auth.currentUser===i&&await i.auth.signOut(),l}}function IN({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class DN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,l)}}schedule(t=!1){if(!this.isRunning)return;const s=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Sh{constructor(t,s){this.createdAt=t,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fo(i){const t=i.auth,s=await i.getIdToken(),l=await Fl(i,Jo(t,{idToken:s}));se(l?.users.length,t,"internal-error");const o=l.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?b0(o.providerUserInfo):[],f=kN(i.providerData,u),m=i.isAnonymous,y=!(i.email&&o.passwordHash)&&!f?.length,g=m?y:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Sh(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,x)}async function MN(i){const t=Lt(i);await Fo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function kN(i,t){return[...i.filter(l=>!t.some(o=>o.providerId===l.providerId)),...t]}function b0(i){return i.map(({providerId:t,...s})=>({providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}async function LN(i,t){const s=await _0(i,{},async()=>{const l=Ma({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await v0(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:l};return i.emulatorConfig&&Da(i.emulatorConfig.host)&&(y.credentials="include"),y0.fetch()(f,y)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function UN(i,t){return Qs(i,"POST","/v2/accounts:revokeToken",Ys(i,t))}class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){se(t.idToken,"internal-error"),se(typeof t.idToken<"u","internal-error"),se(typeof t.refreshToken<"u","internal-error");const s="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):e_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,s)}updateFromIdToken(t){se(t.length!==0,"internal-error");const s=e_(t);this.updateTokensAndExpiration(t,null,s)}async getToken(t,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,s){const{accessToken:l,refreshToken:o,expiresIn:u}=await LN(t,s);this.updateTokensAndExpiration(l,o,Number(u))}updateTokensAndExpiration(t,s,l){this.refreshToken=s||null,this.accessToken=t||null,this.expirationTime=Date.now()+l*1e3}static fromJSON(t,s){const{refreshToken:l,accessToken:o,expirationTime:u}=s,f=new ba;return l&&(se(typeof l=="string","internal-error",{appName:t}),f.refreshToken=l),o&&(se(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(se(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return $n("not implemented")}}function Rs(i,t){se(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class vn{constructor({uid:t,auth:s,stsTokenManager:l,...o}){this.providerId="firebase",this.proactiveRefresh=new DN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sh(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const s=await Fl(this,this.stsTokenManager.getToken(this.auth,t));return se(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(t){return ON(this,t)}reload(){return MN(this)}_assign(t){this!==t&&(se(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(s=>({...s})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const s=new vn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(t){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,s=!1){let l=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),l=!0),s&&await Fo(this),await this.auth._persistUserIfCurrent(this),l&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(es(this.auth));const t=await this.getIdToken();return await Fl(this,RN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,s){const l=s.displayName??void 0,o=s.email??void 0,u=s.phoneNumber??void 0,f=s.photoURL??void 0,m=s.tenantId??void 0,y=s._redirectEventId??void 0,g=s.createdAt??void 0,x=s.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:C,providerData:A,stsTokenManager:L}=s;se(v&&L,t,"internal-error");const I=ba.fromJSON(this.name,L);se(typeof v=="string",t,"internal-error"),Rs(l,t.name),Rs(o,t.name),se(typeof b=="boolean",t,"internal-error"),se(typeof C=="boolean",t,"internal-error"),Rs(u,t.name),Rs(f,t.name),Rs(m,t.name),Rs(y,t.name),Rs(g,t.name),Rs(x,t.name);const U=new vn({uid:v,auth:t,email:o,emailVerified:b,displayName:l,isAnonymous:C,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:I,createdAt:g,lastLoginAt:x});return A&&Array.isArray(A)&&(U.providerData=A.map(q=>({...q}))),y&&(U._redirectEventId=y),U}static async _fromIdTokenResponse(t,s,l=!1){const o=new ba;o.updateFromServerResponse(s);const u=new vn({uid:s.localId,auth:t,stsTokenManager:o,isAnonymous:l});return await Fo(u),u}static async _fromGetAccountInfoResponse(t,s,l){const o=s.users[0];se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?b0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new ba;m.updateFromIdToken(l);const y=new vn({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Sh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,g),y}}const t_=new Map;function Jn(i){ss(i instanceof Function,"Expected a class definition");let t=t_.get(i);return t?(ss(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,t_.set(i,t),t)}class x0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,s){this.storage[t]=s}async _get(t){const s=this.storage[t];return s===void 0?null:s}async _remove(t){delete this.storage[t]}_addListener(t,s){}_removeListener(t,s){}}x0.type="NONE";const n_=x0;function Go(i,t,s){return`firebase:${i}:${t}:${s}`}class xa{constructor(t,s,l){this.persistence=t,this.auth=s,this.userKey=l;const{config:o,name:u}=this.auth;this.fullUserKey=Go(this.userKey,o.apiKey,u),this.fullPersistenceKey=Go("persistence",o.apiKey,u),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const s=await Jo(this.auth,{idToken:t}).catch(()=>{});return s?vn._fromGetAccountInfoResponse(this.auth,s,t):null}return vn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,s,l="authUser"){if(!s.length)return new xa(Jn(n_),t,l);const o=(await Promise.all(s.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Jn(n_);const f=Go(l,t.config.apiKey,t.name);let m=null;for(const g of s)try{const x=await g._get(f);if(x){let v;if(typeof x=="string"){const b=await Jo(t,{idToken:x}).catch(()=>{});if(!b)break;v=await vn._fromGetAccountInfoResponse(t,b,x)}else v=vn._fromJSON(t,x);g!==u&&(m=v),u=g;break}}catch{}const y=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new xa(u,t,l):(u=y[0],m&&await u._set(f,m.toJSON()),await Promise.all(s.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new xa(u,t,l))}}function s_(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(T0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(S0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(w0(t))return"Blackberry";if(A0(t))return"Webos";if(N0(t))return"Safari";if((t.includes("chrome/")||E0(t))&&!t.includes("edge/"))return"Chrome";if(C0(t))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,l=i.match(s);if(l?.length===2)return l[1]}return"Other"}function S0(i=kt()){return/firefox\//i.test(i)}function N0(i=kt()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function E0(i=kt()){return/crios\//i.test(i)}function T0(i=kt()){return/iemobile/i.test(i)}function C0(i=kt()){return/android/i.test(i)}function w0(i=kt()){return/blackberry/i.test(i)}function A0(i=kt()){return/webos/i.test(i)}function Wh(i=kt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function zN(i=kt()){return Wh(i)&&!!window.navigator?.standalone}function HN(){return Z1()&&document.documentMode===10}function j0(i=kt()){return Wh(i)||C0(i)||A0(i)||w0(i)||/windows phone/i.test(i)||T0(i)}function R0(i,t=[]){let s;switch(i){case"Browser":s=s_(kt());break;case"Worker":s=`${s_(kt())}-${i}`;break;default:s=i}const l=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${ka}/${l}`}class BN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,s){const l=u=>new Promise((f,m)=>{try{const y=t(u);f(y)}catch(y){m(y)}});l.onAbort=s,this.queue.push(l);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const s=[];try{for(const l of this.queue)await l(t),l.onAbort&&s.push(l.onAbort)}catch(l){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:l?.message})}}}async function PN(i,t={}){return Qs(i,"GET","/v2/passwordPolicy",Ys(i,t))}const qN=6;class GN{constructor(t){const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??qN,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,s),this.validatePasswordCharacterOptions(t,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(t,s){const l=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;l&&(s.meetsMinPasswordLength=t.length>=l),o&&(s.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let l;for(let o=0;o<t.length;o++)l=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,l>="a"&&l<="z",l>="A"&&l<="Z",l>="0"&&l<="9",this.allowedNonAlphanumericCharacters.includes(l))}updatePasswordCharacterOptionsStatuses(t,s,l,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=l)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class VN{constructor(t,s,l,o){this.app=t,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=l,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i_(this),this.idTokenSubscription=new i_(this),this.beforeStateQueue=new BN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,s){return s&&(this._popupRedirectResolver=Jn(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const s=await Jo(this,{idToken:t}),l=await vn._fromGetAccountInfoResponse(this,s,t);await this.directlySetCurrentUser(l)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(dn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=l?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===f)&&m?.user&&(l=m.user,o=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(l)}catch(u){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(t){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(t){try{await Fo(t)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=SN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(dn(this.app))return Promise.reject(es(this));const s=t?Lt(t):null;return s&&se(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(t,s=!1){if(!this._deleted)return t&&se(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return dn(this.app)?Promise.reject(es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await PN(this),s=new GN(t);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ur("auth","Firebase",t())}onAuthStateChanged(t,s,l){return this.registerStateListener(this.authStateSubscription,t,s,l)}beforeAuthStateChanged(t,s){return this.beforeStateQueue.pushCallback(t,s)}onIdTokenChanged(t,s,l){return this.registerStateListener(this.idTokenSubscription,t,s,l)}authStateReady(){return new Promise((t,s)=>{if(this.currentUser)t();else{const l=this.onAuthStateChanged(()=>{l(),t()},s)}})}async revokeAccessToken(t){if(this.currentUser){const s=await this.currentUser.getIdToken(),l={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:s};this.tenantId!=null&&(l.tenantId=this.tenantId),await UN(this,l)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,s){const l=await this.getOrInitRedirectPersistenceManager(s);return t===null?l.removeCurrentUser():l.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const s=t&&Jn(t)||this._popupRedirectResolver;se(s,this,"argument-error"),this.redirectPersistenceManager=await xa.create(this,[Jn(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,s,l,o){if(this._deleted)return()=>{};const u=typeof s=="function"?s:s.next.bind(s);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof s=="function"){const y=t.addObserver(s,l,o);return()=>{f=!0,y()}}else{const y=t.addObserver(s);return()=>{f=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=R0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(t["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(t["X-Firebase-AppCheck"]=l),t}async _getAppCheckToken(){if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&vN(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Si(i){return Lt(i)}class i_{constructor(t){this.auth=t,this.observer=null,this.addObserver=lS(s=>this.observer=s)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _c={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YN(i){_c=i}function O0(i){return _c.loadJS(i)}function QN(){return _c.recaptchaEnterpriseScript}function KN(){return _c.gapiScript}function XN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class WN{constructor(){this.enterprise=new ZN}ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}class ZN{ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}const $N="recaptcha-enterprise",I0="NO_RECAPTCHA";class JN{constructor(t){this.type=$N,this.auth=Si(t)}async verify(t="verify",s=!1){async function l(u){if(!s){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{jN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new AN(y);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(y=>{m(y)})})}function o(u,f,m){const y=window.grecaptcha;Fy(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:t}).then(g=>{f(g)}).catch(()=>{f(I0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WN().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{l(this.auth).then(m=>{if(!s&&Fy(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=QN();y.length!==0&&(y+=m),O0(y).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function a_(i,t,s,l=!1,o=!1){const u=new JN(i);let f;if(o)f=I0;else try{f=await u.verify(s)}catch{f=await u.verify(s,!0)}const m={...t};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return l?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Nh(i,t,s,l,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await a_(i,t,s,s==="getOobCode");return l(i,u)}else return l(i,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await a_(i,t,s,s==="getOobCode");return l(i,f)}else return Promise.reject(u)})}function FN(i,t){const s=Yh(i,"auth");if(s.isInitialized()){const o=s.getImmediate(),u=s.getOptions();if(pi(u,t??{}))return o;Sn(o,"already-initialized")}return s.initialize({options:t})}function eE(i,t){const s=t?.persistence||[],l=(Array.isArray(s)?s:[s]).map(Jn);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(l,t?.popupRedirectResolver)}function tE(i,t,s){const l=Si(i);se(/^https?:\/\//.test(t),l,"invalid-emulator-scheme");const o=!1,u=D0(t),{host:f,port:m}=nE(t),y=m===null?"":`:${m}`,g={url:`${u}//${f}${y}/`},x=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!l._canInitEmulator){se(l.config.emulator&&l.emulatorConfig,l,"emulator-config-failed"),se(pi(g,l.config.emulator)&&pi(x,l.emulatorConfig),l,"emulator-config-failed");return}l.config.emulator=g,l.emulatorConfig=x,l.settings.appVerificationDisabledForTesting=!0,Da(f)?(i0(`${u}//${f}${y}`),a0("Auth",!0)):sE()}function D0(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function nE(i){const t=D0(i),s=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!s)return{host:"",port:null};const l=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(l);if(o){const u=o[1];return{host:u,port:l_(l.substr(u.length+1))}}else{const[u,f]=l.split(":");return{host:u,port:l_(f)}}}function l_(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function sE(){function i(){const t=document.createElement("p"),s=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Zh{constructor(t,s){this.providerId=t,this.signInMethod=s}toJSON(){return $n("not implemented")}_getIdTokenResponse(t){return $n("not implemented")}_linkToIdToken(t,s){return $n("not implemented")}_getReauthenticationResolver(t){return $n("not implemented")}}async function iE(i,t){return Qs(i,"POST","/v1/accounts:signUp",t)}async function aE(i,t){return hr(i,"POST","/v1/accounts:signInWithPassword",Ys(i,t))}async function lE(i,t){return hr(i,"POST","/v1/accounts:signInWithEmailLink",Ys(i,t))}async function rE(i,t){return hr(i,"POST","/v1/accounts:signInWithEmailLink",Ys(i,t))}class er extends Zh{constructor(t,s,l,o=null){super("password",l),this._email=t,this._password=s,this._tenantId=o}static _fromEmailAndPassword(t,s){return new er(t,s,"password")}static _fromEmailAndCode(t,s,l=null){return new er(t,s,"emailLink",l)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(t,s,"signInWithPassword",aE);case"emailLink":return lE(t,{email:this._email,oobCode:this._password});default:Sn(t,"internal-error")}}async _linkToIdToken(t,s){switch(this.signInMethod){case"password":const l={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(t,l,"signUpPassword",iE);case"emailLink":return rE(t,{idToken:s,email:this._email,oobCode:this._password});default:Sn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Sa(i,t){return hr(i,"POST","/v1/accounts:signInWithIdp",Ys(i,t))}const oE="http://localhost";class yi extends Zh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const s=new yi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(s.idToken=t.idToken),t.accessToken&&(s.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(s.nonce=t.nonce),t.pendingToken&&(s.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(s.accessToken=t.oauthToken,s.secret=t.oauthTokenSecret):Sn("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t,{providerId:l,signInMethod:o,...u}=s;if(!l||!o)return null;const f=new yi(l,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const s=this.buildRequest();return Sa(t,s)}_linkToIdToken(t,s){const l=this.buildRequest();return l.idToken=s,Sa(t,l)}_getReauthenticationResolver(t){const s=this.buildRequest();return s.autoCreate=!1,Sa(t,s)}buildRequest(){const t={requestUri:oE,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),t.postBody=Ma(s)}return t}}function cE(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uE(i){const t=ql(Gl(i)).link,s=t?ql(Gl(t)).deep_link_id:null,l=ql(Gl(i)).deep_link_id;return(l?ql(Gl(l)).link:null)||l||s||t||i}class $h{constructor(t){const s=ql(Gl(t)),l=s.apiKey??null,o=s.oobCode??null,u=cE(s.mode??null);se(l&&o&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(t){const s=uE(t);try{return new $h(s)}catch{return null}}}class La{constructor(){this.providerId=La.PROVIDER_ID}static credential(t,s){return er._fromEmailAndPassword(t,s)}static credentialWithLink(t,s){const l=$h.parseLink(s);return se(l,"argument-error"),er._fromEmailAndCode(t,l.code,l.tenantId)}}La.PROVIDER_ID="password";La.EMAIL_PASSWORD_SIGN_IN_METHOD="password";La.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class M0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class fr extends M0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Os extends fr{constructor(){super("facebook.com")}static credential(t){return yi._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Os.credentialFromTaggedObject(t)}static credentialFromError(t){return Os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Os.credential(t.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";class Is extends fr{constructor(){super("google.com"),this.addScope("profile")}static credential(t,s){return yi._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:s})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:s,oauthAccessToken:l}=t;if(!s&&!l)return null;try{return Is.credential(s,l)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";class Ds extends fr{constructor(){super("github.com")}static credential(t){return yi._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ds.credentialFromTaggedObject(t)}static credentialFromError(t){return Ds.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ds.credential(t.oauthAccessToken)}catch{return null}}}Ds.GITHUB_SIGN_IN_METHOD="github.com";Ds.PROVIDER_ID="github.com";class Ms extends fr{constructor(){super("twitter.com")}static credential(t,s){return yi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:s})}static credentialFromResult(t){return Ms.credentialFromTaggedObject(t)}static credentialFromError(t){return Ms.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:s,oauthTokenSecret:l}=t;if(!s||!l)return null;try{return Ms.credential(s,l)}catch{return null}}}Ms.TWITTER_SIGN_IN_METHOD="twitter.com";Ms.PROVIDER_ID="twitter.com";async function dE(i,t){return hr(i,"POST","/v1/accounts:signUp",Ys(i,t))}class _i{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,s,l,o=!1){const u=await vn._fromIdTokenResponse(t,l,o),f=r_(l);return new _i({user:u,providerId:f,_tokenResponse:l,operationType:s})}static async _forOperation(t,s,l){await t._updateTokensIfNecessary(l,!0);const o=r_(l);return new _i({user:t,providerId:o,_tokenResponse:l,operationType:s})}}function r_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class ec extends Vs{constructor(t,s,l,o){super(s.code,s.message),this.operationType=l,this.user=o,Object.setPrototypeOf(this,ec.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:l}}static _fromErrorAndOperation(t,s,l,o){return new ec(t,s,l,o)}}function k0(i,t,s,l){return(t==="reauthenticate"?s._getReauthenticationResolver(i):s._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ec._fromErrorAndOperation(i,u,t,l):u})}async function hE(i,t,s=!1){const l=await Fl(i,t._linkToIdToken(i.auth,await i.getIdToken()),s);return _i._forOperation(i,"link",l)}async function fE(i,t,s=!1){const{auth:l}=i;if(dn(l.app))return Promise.reject(es(l));const o="reauthenticate";try{const u=await Fl(i,k0(l,o,t,i),s);se(u.idToken,l,"internal-error");const f=Xh(u.idToken);se(f,l,"internal-error");const{sub:m}=f;return se(i.uid===m,l,"user-mismatch"),_i._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Sn(l,"user-mismatch"),u}}async function L0(i,t,s=!1){if(dn(i.app))return Promise.reject(es(i));const l="signIn",o=await k0(i,l,t),u=await _i._fromIdTokenResponse(i,l,o);return s||await i._updateCurrentUser(u.user),u}async function mE(i,t){return L0(Si(i),t)}async function U0(i){const t=Si(i);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function pE(i,t,s){if(dn(i.app))return Promise.reject(es(i));const l=Si(i),f=await Nh(l,{returnSecureToken:!0,email:t,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dE).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&U0(i),y}),m=await _i._fromIdTokenResponse(l,"signIn",f);return await l._updateCurrentUser(m.user),m}function gE(i,t,s){return dn(i.app)?Promise.reject(es(i)):mE(Lt(i),La.credential(t,s)).catch(async l=>{throw l.code==="auth/password-does-not-meet-requirements"&&U0(i),l})}function yE(i,t,s,l){return Lt(i).onIdTokenChanged(t,s,l)}function _E(i,t,s){return Lt(i).beforeAuthStateChanged(t,s)}function vE(i,t,s,l){return Lt(i).onAuthStateChanged(t,s,l)}function bE(i){return Lt(i).signOut()}const tc="__sak";class z0{constructor(t,s){this.storageRetriever=t,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,s){return this.storage.setItem(t,JSON.stringify(s)),Promise.resolve()}_get(t){const s=this.storage.getItem(t);return Promise.resolve(s?JSON.parse(s):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const xE=1e3,SE=10;class H0 extends z0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,s)=>this.onStorageEvent(t,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=j0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const s of Object.keys(this.listeners)){const l=this.storage.getItem(s),o=this.localCache[s];l!==o&&t(s,o,l)}}onStorageEvent(t,s=!1){if(!t.key){this.forAllChangedKeys((f,m,y)=>{this.notifyListeners(f,y)});return}const l=t.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(l);!s&&this.localCache[l]===f||this.notifyListeners(l,f)},u=this.storage.getItem(l);HN()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,SE):o()}notifyListeners(t,s){this.localCache[t]=s;const l=this.listeners[t];if(l)for(const o of Array.from(l))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,s,l)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:s,newValue:l}),!0)})},xE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,s){await super._set(t,s),this.localCache[t]=JSON.stringify(s)}async _get(t){const s=await super._get(t);return this.localCache[t]=JSON.stringify(s),s}async _remove(t){await super._remove(t),delete this.localCache[t]}}H0.type="LOCAL";const NE=H0;class B0 extends z0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,s){}_removeListener(t,s){}}B0.type="SESSION";const P0=B0;function EE(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(s){return{fulfilled:!1,reason:s}}}))}class vc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const s=this.receivers.find(o=>o.isListeningto(t));if(s)return s;const l=new vc(t);return this.receivers.push(l),l}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const s=t,{eventId:l,eventType:o,data:u}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:l,eventType:o});const m=Array.from(f).map(async g=>g(s.origin,u)),y=await EE(m);s.ports[0].postMessage({status:"done",eventId:l,eventType:o,response:y})}_subscribe(t,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(s)}_unsubscribe(t,s){this.handlersMap[t]&&s&&this.handlersMap[t].delete(s),(!s||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vc.receivers=[];function Jh(i="",t=10){let s="";for(let l=0;l<t;l++)s+=Math.floor(Math.random()*10);return i+s}class TE{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,s,l=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,y)=>{const g=Jh("",20);o.port1.start();const x=setTimeout(()=>{y(new Error("unsupported_event"))},l);f={messageChannel:o,onMessage(v){const b=v;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(x),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(b.data.response);break;default:clearTimeout(x),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:g,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Rn(){return window}function CE(i){Rn().location.href=i}function q0(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function wE(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AE(){return navigator?.serviceWorker?.controller||null}function jE(){return q0()?self:null}const G0="firebaseLocalStorageDb",RE=1,nc="firebaseLocalStorage",V0="fbase_key";class mr{constructor(t){this.request=t}toPromise(){return new Promise((t,s)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function bc(i,t){return i.transaction([nc],t?"readwrite":"readonly").objectStore(nc)}function OE(){const i=indexedDB.deleteDatabase(G0);return new mr(i).toPromise()}function Eh(){const i=indexedDB.open(G0,RE);return new Promise((t,s)=>{i.addEventListener("error",()=>{s(i.error)}),i.addEventListener("upgradeneeded",()=>{const l=i.result;try{l.createObjectStore(nc,{keyPath:V0})}catch(o){s(o)}}),i.addEventListener("success",async()=>{const l=i.result;l.objectStoreNames.contains(nc)?t(l):(l.close(),await OE(),t(await Eh()))})})}async function o_(i,t,s){const l=bc(i,!0).put({[V0]:t,value:s});return new mr(l).toPromise()}async function IE(i,t){const s=bc(i,!1).get(t),l=await new mr(s).toPromise();return l===void 0?null:l.value}function c_(i,t){const s=bc(i,!0).delete(t);return new mr(s).toPromise()}const DE=800,ME=3;class Y0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Eh(),this.db)}async _withRetries(t){let s=0;for(;;)try{const l=await this._openDb();return await t(l)}catch(l){if(s++>ME)throw l;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return q0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vc._getInstance(jE()),this.receiver._subscribe("keyChanged",async(t,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(t,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wE(),!this.activeServiceWorker)return;this.sender=new TE(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||AE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Eh();return await o_(t,tc,"1"),await c_(t,tc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,s){return this._withPendingWrite(async()=>(await this._withRetries(l=>o_(l,t,s)),this.localCache[t]=s,this.notifyServiceWorker(t)))}async _get(t){const s=await this._withRetries(l=>IE(l,t));return this.localCache[t]=s,s}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(s=>c_(s,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=bc(o,!1).getAll();return new mr(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const s=[],l=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)l.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!l.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(t,s){this.localCache[t]=s;const l=this.listeners[t];if(l)for(const o of Array.from(l))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y0.type="LOCAL";const kE=Y0;new dr(3e4,6e4);function LE(i,t){return t?Jn(t):(se(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Fh extends Zh{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Sa(t,this._buildIdpRequest())}_linkToIdToken(t,s){return Sa(t,this._buildIdpRequest(s))}_getReauthenticationResolver(t){return Sa(t,this._buildIdpRequest())}_buildIdpRequest(t){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(s.idToken=t),s}}function UE(i){return L0(i.auth,new Fh(i),i.bypassAuthState)}function zE(i){const{auth:t,user:s}=i;return se(s,t,"internal-error"),fE(s,new Fh(i),i.bypassAuthState)}async function HE(i){const{auth:t,user:s}=i;return se(s,t,"internal-error"),hE(s,new Fh(i),i.bypassAuthState)}class Q0{constructor(t,s,l,o,u=!1){this.auth=t,this.resolver=l,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(t,s)=>{this.pendingPromise={resolve:t,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(l){this.reject(l)}})}async onAuthEvent(t){const{urlResponse:s,sessionId:l,postBody:o,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:s,sessionId:l,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return UE;case"linkViaPopup":case"linkViaRedirect":return HE;case"reauthViaPopup":case"reauthViaRedirect":return zE;default:Sn(this.auth,"internal-error")}}resolve(t){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const BE=new dr(2e3,1e4);class ya extends Q0{constructor(t,s,l,o,u){super(t,s,o,u),this.provider=l,this.authWindow=null,this.pollId=null,ya.currentPopupAction&&ya.currentPopupAction.cancel(),ya.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return se(t,this.auth,"internal-error"),t}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const t=Jh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ya.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,BE.get())};t()}}ya.currentPopupAction=null;const PE="pendingRedirect",Vo=new Map;class qE extends Q0{constructor(t,s,l=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,l),this.eventId=null}async execute(){let t=Vo.get(this.auth._key());if(!t){try{const l=await GE(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(l)}catch(s){t=()=>Promise.reject(s)}Vo.set(this.auth._key(),t)}return this.bypassAuthState||Vo.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const s=await this.auth._redirectUserForId(t.eventId);if(s)return this.user=s,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GE(i,t){const s=QE(t),l=YE(i);if(!await l._isAvailable())return!1;const o=await l._get(s)==="true";return await l._remove(s),o}function VE(i,t){Vo.set(i._key(),t)}function YE(i){return Jn(i._redirectPersistence)}function QE(i){return Go(PE,i.config.apiKey,i.name)}async function KE(i,t,s=!1){if(dn(i.app))return Promise.reject(es(i));const l=Si(i),o=LE(l,t),f=await new qE(l,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await l._persistUserIfCurrent(f.user),await l._setRedirectUser(null,t)),f}const XE=600*1e3;class WE{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let s=!1;return this.consumers.forEach(l=>{this.isEventForConsumer(t,l)&&(s=!0,this.sendToConsumer(t,l),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!ZE(t)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=t,s=!0)),s}sendToConsumer(t,s){if(t.error&&!K0(t)){const l=t.error.code?.split("auth/")[1]||"internal-error";s.onError(jn(this.auth,l))}else s.onAuthEvent(t)}isEventForConsumer(t,s){const l=s.eventId===null||!!t.eventId&&t.eventId===s.eventId;return s.filter.includes(t.type)&&l}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=XE&&this.cachedEventUids.clear(),this.cachedEventUids.has(u_(t))}saveEventToCache(t){this.cachedEventUids.add(u_(t)),this.lastProcessedEventTime=Date.now()}}function u_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function K0({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function ZE(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K0(i);default:return!1}}async function $E(i,t={}){return Qs(i,"GET","/v1/projects",t)}const JE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FE=/^https?/;async function eT(i){if(i.config.emulator)return;const{authorizedDomains:t}=await $E(i);for(const s of t)try{if(tT(s))return}catch{}Sn(i,"unauthorized-domain")}function tT(i){const t=xh(),{protocol:s,hostname:l}=new URL(t);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&l===""?s==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===l}if(!FE.test(s))return!1;if(JE.test(i))return l===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(l)}const nT=new dr(3e4,6e4);function d_(){const i=Rn().___jsl;if(i?.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let s=0;s<i.CP.length;s++)i.CP[s]=null}}function sT(i){return new Promise((t,s)=>{function l(){d_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{d_(),s(jn(i,"network-request-failed"))},timeout:nT.get()})}if(Rn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Rn().gapi?.load)l();else{const o=XN("iframefcb");return Rn()[o]=()=>{gapi.load?l():s(jn(i,"network-request-failed"))},O0(`${KN()}?onload=${o}`).catch(u=>s(u))}}).catch(t=>{throw Yo=null,t})}let Yo=null;function iT(i){return Yo=Yo||sT(i),Yo}const aT=new dr(5e3,15e3),lT="__/auth/iframe",rT="emulator/auth/iframe",oT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uT(i){const t=i.config;se(t.authDomain,i,"auth-domain-config-required");const s=t.emulator?Kh(t,rT):`https://${i.config.authDomain}/${lT}`,l={apiKey:t.apiKey,appName:i.name,v:ka},o=cT.get(i.config.apiHost);o&&(l.eid=o);const u=i._getFrameworks();return u.length&&(l.fw=u.join(",")),`${s}?${Ma(l).slice(1)}`}async function dT(i){const t=await iT(i),s=Rn().gapi;return se(s,i,"internal-error"),t.open({where:document.body,url:uT(i),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oT,dontclear:!0},l=>new Promise(async(o,u)=>{await l.restyle({setHideOnLeave:!1});const f=jn(i,"network-request-failed"),m=Rn().setTimeout(()=>{u(f)},aT.get());function y(){Rn().clearTimeout(m),o(l)}l.ping(y).then(y,()=>{u(f)})}))}const hT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fT=500,mT=600,pT="_blank",gT="http://localhost";class h_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yT(i,t,s,l=fT,o=mT){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-l)/2,0).toString();let m="";const y={...hT,width:l.toString(),height:o.toString(),top:u,left:f},g=kt().toLowerCase();s&&(m=E0(g)?pT:s),S0(g)&&(t=t||gT,y.scrollbars="yes");const x=Object.entries(y).reduce((b,[C,A])=>`${b}${C}=${A},`,"");if(zN(g)&&m!=="_self")return _T(t||"",m),new h_(null);const v=window.open(t||"",m,x);se(v,i,"popup-blocked");try{v.focus()}catch{}return new h_(v)}function _T(i,t){const s=document.createElement("a");s.href=i,s.target=t;const l=document.createEvent("MouseEvent");l.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(l)}const vT="__/auth/handler",bT="emulator/auth/handler",xT=encodeURIComponent("fac");async function f_(i,t,s,l,o,u){se(i.config.authDomain,i,"auth-domain-config-required"),se(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:s,redirectUrl:l,v:ka,eventId:o};if(t instanceof M0){t.setDefaultLanguage(i.languageCode),f.providerId=t.providerId||"",ph(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[x,v]of Object.entries({}))f[x]=v}if(t instanceof fr){const x=t.getScopes().filter(v=>v!=="");x.length>0&&(f.scopes=x.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const x of Object.keys(m))m[x]===void 0&&delete m[x];const y=await i._getAppCheckToken(),g=y?`#${xT}=${encodeURIComponent(y)}`:"";return`${ST(i)}?${Ma(m).slice(1)}${g}`}function ST({config:i}){return i.emulator?Kh(i,bT):`https://${i.authDomain}/${vT}`}const lh="webStorageSupport";class NT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=P0,this._completeRedirectFn=KE,this._overrideRedirectResult=VE}async _openPopup(t,s,l,o){ss(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await f_(t,s,l,xh(),o);return yT(t,u,Jh())}async _openRedirect(t,s,l,o){await this._originValidation(t);const u=await f_(t,s,l,xh(),o);return CE(u),new Promise(()=>{})}_initialize(t){const s=t._key();if(this.eventManagers[s]){const{manager:o,promise:u}=this.eventManagers[s];return o?Promise.resolve(o):(ss(u,"If manager is not set, promise should be"),u)}const l=this.initAndGetManager(t);return this.eventManagers[s]={promise:l},l.catch(()=>{delete this.eventManagers[s]}),l}async initAndGetManager(t){const s=await dT(t),l=new WE(t);return s.register("authEvent",o=>(se(o?.authEvent,t,"invalid-auth-event"),{status:l.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:l},this.iframes[t._key()]=s,l}_isIframeWebStorageSupported(t,s){this.iframes[t._key()].send(lh,{type:lh},o=>{const u=o?.[0]?.[lh];u!==void 0&&s(!!u),Sn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const s=t._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=eT(t)),this.originValidationPromises[s]}get _shouldInitProactively(){return j0()||N0()||Wh()}}const ET=NT;var m_="@firebase/auth",p_="1.12.0";class TT{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const s=this.auth.onIdTokenChanged(l=>{t(l?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,s),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const s=this.internalListeners.get(t);s&&(this.internalListeners.delete(t),s(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function CT(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wT(i){Ca(new gi("auth",(t,{options:s})=>{const l=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=l.options;se(f&&!f.includes(":"),"invalid-api-key",{appName:l.name});const y={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R0(i)},g=new VN(l,o,u,y);return eE(g,s),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,s,l)=>{t.getProvider("auth-internal").initialize()})),Ca(new gi("auth-internal",t=>{const s=Si(t.getProvider("auth").getImmediate());return(l=>new TT(l))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(m_,p_,CT(i)),zs(m_,p_,"esm2020")}const AT=300,jT=s0("authIdTokenMaxAge")||AT;let g_=null;const RT=i=>async t=>{const s=t&&await t.getIdTokenResult(),l=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(l&&l>jT)return;const o=s?.token;g_!==o&&(g_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function OT(i=d0()){const t=Yh(i,"auth");if(t.isInitialized())return t.getImmediate();const s=FN(i,{popupRedirectResolver:ET,persistence:[kE,NE,P0]}),l=s0("authTokenSyncURL");if(l&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(l,location.origin);if(location.origin===u.origin){const f=RT(u.toString());_E(s,f,()=>f(s.currentUser)),yE(s,m=>f(m))}}const o=t0("auth");return o&&tE(s,`http://${o}`),s}function IT(){return document.getElementsByTagName("head")?.[0]??document}YN({loadJS(i){return new Promise((t,s)=>{const l=document.createElement("script");l.setAttribute("src",i),l.onload=t,l.onerror=o=>{const u=jn("internal-error");u.customData=o,s(u)},l.type="text/javascript",l.charset="UTF-8",IT().appendChild(l)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wT("Browser");var y_={};const __="@firebase/database",v_="1.1.0";let X0="";function DT(i){X0=i}class MT{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,s){s==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ft(s))}get(t){const s=this.domStorage_.getItem(this.prefixedName_(t));return s==null?null:$l(s)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class kT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,s){s==null?delete this.cache_[t]:this.cache_[t]=s}get(t){return On(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const W0=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new MT(t)}}catch{}return new kT},mi=W0("localStorage"),LT=W0("sessionStorage");const Na=new Gh("@firebase/database"),UT=(function(){let i=1;return function(){return i++}})(),Z0=function(i){const t=cS(i),s=new aS;s.update(t);const l=s.digest();return Bh.encodeByteArray(l)},pr=function(...i){let t="";for(let s=0;s<i.length;s++){const l=i[s];Array.isArray(l)||l&&typeof l=="object"&&typeof l.length=="number"?t+=pr.apply(null,l):typeof l=="object"?t+=ft(l):t+=l,t+=" "}return t};let Ql=null,b_=!0;const zT=function(i,t){Y(!0,"Can't turn on custom loggers persistently."),Na.logLevel=ze.VERBOSE,Ql=Na.log.bind(Na)},Tt=function(...i){if(b_===!0&&(b_=!1,Ql===null&&LT.get("logging_enabled")===!0&&zT()),Ql){const t=pr.apply(null,i);Ql(t)}},gr=function(i){return function(...t){Tt(i,...t)}},Th=function(...i){const t="FIREBASE INTERNAL ERROR: "+pr(...i);Na.error(t)},is=function(...i){const t=`FIREBASE FATAL ERROR: ${pr(...i)}`;throw Na.error(t),new Error(t)},Mt=function(...i){const t="FIREBASE WARNING: "+pr(...i);Na.warn(t)},HT=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Mt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ef=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},BT=function(i){if(document.readyState==="complete")i();else{let t=!1;const s=function(){if(!document.body){setTimeout(s,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&s()}),window.attachEvent("onload",s))}},wa="[MIN_NAME]",vi="[MAX_NAME]",Ni=function(i,t){if(i===t)return 0;if(i===wa||t===vi)return-1;if(t===wa||i===vi)return 1;{const s=x_(i),l=x_(t);return s!==null?l!==null?s-l===0?i.length-t.length:s-l:-1:l!==null?1:i<t?-1:1}},PT=function(i,t){return i===t?0:i<t?-1:1},zl=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+ft(t))},tf=function(i){if(typeof i!="object"||i===null)return ft(i);const t=[];for(const l in i)t.push(l);t.sort();let s="{";for(let l=0;l<t.length;l++)l!==0&&(s+=","),s+=ft(t[l]),s+=":",s+=tf(i[t[l]]);return s+="}",s},$0=function(i,t){const s=i.length;if(s<=t)return[i];const l=[];for(let o=0;o<s;o+=t)o+t>s?l.push(i.substring(o,s)):l.push(i.substring(o,o+t));return l};function Ct(i,t){for(const s in i)i.hasOwnProperty(s)&&t(s,i[s])}const J0=function(i){Y(!ef(i),"Invalid JSON number");const t=11,s=52,l=(1<<t-1)-1;let o,u,f,m,y;i===0?(u=0,f=0,o=1/i===-1/0?1:0):(o=i<0,i=Math.abs(i),i>=Math.pow(2,1-l)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),l),u=m+l,f=Math.round(i*Math.pow(2,s-m)-Math.pow(2,s))):(u=0,f=Math.round(i/Math.pow(2,1-l-s))));const g=[];for(y=s;y;y-=1)g.push(f%2?1:0),f=Math.floor(f/2);for(y=t;y;y-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(o?1:0),g.reverse();const x=g.join("");let v="";for(y=0;y<64;y+=8){let b=parseInt(x.substr(y,8),2).toString(16);b.length===1&&(b="0"+b),v=v+b}return v.toLowerCase()},qT=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},GT=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function VT(i,t){let s="Unknown Error";i==="too_big"?s="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?s="Client doesn't have permission to access the desired data.":i==="unavailable"&&(s="The service is unavailable");const l=new Error(i+" at "+t._path.toString()+": "+s);return l.code=i.toUpperCase(),l}const YT=new RegExp("^-?(0*)\\d{1,10}$"),QT=-2147483648,KT=2147483647,x_=function(i){if(YT.test(i)){const t=Number(i);if(t>=QT&&t<=KT)return t}return null},Ua=function(i){try{i()}catch(t){setTimeout(()=>{const s=t.stack||"";throw Mt("Exception was thrown by user callback.",s),t},Math.floor(0))}},XT=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Kl=function(i,t){const s=setTimeout(i,t);return typeof s=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(s):typeof s=="object"&&s.unref&&s.unref(),s};class WT{constructor(t,s){this.appCheckProvider=s,this.appName=t.name,dn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=s?.getImmediate({optional:!0}),this.appCheck||s?.get().then(l=>this.appCheck=l)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((s,l)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(s,l):s(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(s=>s.addTokenListener(t))}notifyForInvalidToken(){Mt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ZT{constructor(t,s,l){this.appName_=t,this.firebaseOptions_=s,this.authProvider_=l,this.auth_=null,this.auth_=l.getImmediate({optional:!0}),this.auth_||l.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(s=>s&&s.code==="auth/token-not-initialized"?(Tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,l)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(s,l):s(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(s=>s.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(s=>s.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Mt(t)}}class Qo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Qo.OWNER="owner";const nf="5",F0="v",ev="s",tv="r",nv="f",sv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iv="ls",av="p",Ch="ac",lv="websocket",rv="long_polling";class ov{constructor(t,s,l,o,u=!1,f="",m=!1,y=!1,g=null){this.secure=s,this.namespace=l,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=f,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=y,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mi.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&mi.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",s=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${s}`}}function $T(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function cv(i,t,s){Y(typeof t=="string","typeof type must == string"),Y(typeof s=="object","typeof params must == object");let l;if(t===lv)l=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===rv)l=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);$T(i)&&(s.ns=i.namespace);const o=[];return Ct(s,(u,f)=>{o.push(u+"="+f)}),l+o.join("&")}class JT{constructor(){this.counters_={}}incrementCounter(t,s=1){On(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=s}get(){return z1(this.counters_)}}const rh={},oh={};function sf(i){const t=i.toString();return rh[t]||(rh[t]=new JT),rh[t]}function FT(i,t){const s=i.toString();return oh[s]||(oh[s]=t()),oh[s]}class eC{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,s){this.closeAfterResponse=t,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,s){for(this.pendingResponses[t]=s;this.pendingResponses[this.currentResponseNum];){const l=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<l.length;++o)l[o]&&Ua(()=>{this.onMessage_(l[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const S_="start",tC="close",nC="pLPCommand",sC="pRTLPCB",uv="id",dv="pw",hv="ser",iC="cb",aC="seg",lC="ts",rC="d",oC="dframe",fv=1870,mv=30,cC=fv-mv,uC=25e3,dC=3e4;class _a{constructor(t,s,l,o,u,f,m){this.connId=t,this.repoInfo=s,this.applicationId=l,this.appCheckToken=o,this.authToken=u,this.transportSessionId=f,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gr(t),this.stats_=sf(s),this.urlFn=y=>(this.appCheckToken&&(y[Ch]=this.appCheckToken),cv(s,rv,y))}open(t,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new eC(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(dC)),BT(()=>{if(this.isClosed_)return;this.scriptTagHolder=new af((...u)=>{const[f,m,y,g,x]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===S_)this.id=m,this.password=y;else if(f===tC)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...u)=>{const[f,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(f,m)},()=>{this.onClosed_()},this.urlFn);const l={};l[S_]="t",l[hv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(l[iC]=this.scriptTagHolder.uniqueCallbackIdentifier),l[F0]=nf,this.transportSessionId&&(l[ev]=this.transportSessionId),this.lastSessionId&&(l[iv]=this.lastSessionId),this.applicationId&&(l[av]=this.applicationId),this.appCheckToken&&(l[Ch]=this.appCheckToken),typeof location<"u"&&location.hostname&&sv.test(location.hostname)&&(l[tv]=nv);const o=this.urlFn(l);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_a.forceAllow_=!0}static forceDisallow(){_a.forceDisallow_=!0}static isAvailable(){return _a.forceAllow_?!0:!_a.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!qT()&&!GT()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const s=ft(t);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const l=F_(s),o=$0(l,cC);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(t,s){this.myDisconnFrame=document.createElement("iframe");const l={};l[oC]="t",l[uv]=t,l[dv]=s,this.myDisconnFrame.src=this.urlFn(l),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const s=ft(t).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class af{constructor(t,s,l,o){this.onDisconnect=l,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=UT(),window[nC+this.uniqueCallbackIdentifier]=t,window[sC+this.uniqueCallbackIdentifier]=s,this.myIFrame=af.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(m){Tt("frame writing exception"),m.stack&&Tt(m.stack),Tt(m)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Tt("No IE domain setting required")}catch{const l=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+l+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,s){for(this.myID=t,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[uv]=this.myID,t[dv]=this.myPW,t[hv]=this.currentSerial;let s=this.urlFn(t),l="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+mv+l.length<=fv;){const f=this.pendingSegs.shift();l=l+"&"+aC+o+"="+f.seg+"&"+lC+o+"="+f.ts+"&"+rC+o+"="+f.d,o++}return s=s+l,this.addLongPollTag_(s,this.currentSerial),!0}else return!1}enqueueSegment(t,s,l){this.pendingSegs.push({seg:t,ts:s,d:l}),this.alive&&this.newRequest_()}addLongPollTag_(t,s){this.outstandingRequests.add(s);const l=()=>{this.outstandingRequests.delete(s),this.newRequest_()},o=setTimeout(l,Math.floor(uC)),u=()=>{clearTimeout(o),l()};this.addTag(t,u)}addTag(t,s){setTimeout(()=>{try{if(!this.sendNewPolls)return;const l=this.myIFrame.doc.createElement("script");l.type="text/javascript",l.async=!0,l.src=t,l.onload=l.onreadystatechange=function(){const o=l.readyState;(!o||o==="loaded"||o==="complete")&&(l.onload=l.onreadystatechange=null,l.parentNode&&l.parentNode.removeChild(l),s())},l.onerror=()=>{Tt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(l)}catch{}},Math.floor(1))}}const hC=16384,fC=45e3;let sc=null;typeof MozWebSocket<"u"?sc=MozWebSocket:typeof WebSocket<"u"&&(sc=WebSocket);class _n{constructor(t,s,l,o,u,f,m){this.connId=t,this.applicationId=l,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gr(this.connId),this.stats_=sf(s),this.connURL=_n.connectionURL_(s,f,m,o,l),this.nodeAdmin=s.nodeAdmin}static connectionURL_(t,s,l,o,u){const f={};return f[F0]=nf,typeof location<"u"&&location.hostname&&sv.test(location.hostname)&&(f[tv]=nv),s&&(f[ev]=s),l&&(f[iv]=l),o&&(f[Ch]=o),u&&(f[av]=u),cv(t,lv,f)}open(t,s){this.onDisconnect=s,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mi.set("previous_websocket_failure",!0);try{let l;$1(),this.mySock=new sc(this.connURL,[],l)}catch(l){this.log_("Error instantiating WebSocket.");const o=l.message||l.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const o=l.message||l.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){_n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=/Android ([0-9]{0,}\.[0-9]{0,})/,l=navigator.userAgent.match(s);l&&l.length>1&&parseFloat(l[1])<4.4&&(t=!0)}return!t&&sc!==null&&!_n.forceDisallow_}static previouslyFailed(){return mi.isInMemoryStorage||mi.get("previous_websocket_failure")===!0}markConnectionHealthy(){mi.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const l=$l(s);this.onMessage(l)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Y(this.frames===null,"We already have a frame buffer"),t.length<=6){const s=Number(t);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const s=t.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(s);else{const l=this.extractFrameCount_(s);l!==null&&this.appendFrame_(l)}}send(t){this.resetKeepAlive();const s=ft(t);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const l=$0(s,hC);l.length>1&&this.sendString_(String(l.length));for(let o=0;o<l.length;o++)this.sendString_(l[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(fC))}sendString_(t){try{this.mySock.send(t)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}_n.responsesRequiredToBeHealthy=2;_n.healthyTimeout=3e4;class tr{static get ALL_TRANSPORTS(){return[_a,_n]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const s=_n&&_n.isAvailable();let l=s&&!_n.previouslyFailed();if(t.webSocketOnly&&(s||Mt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),l=!0),l)this.transports_=[_n];else{const o=this.transports_=[];for(const u of tr.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);tr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}tr.globalTransportInitialized_=!1;const mC=6e4,pC=5e3,gC=10*1024,yC=100*1024,ch="t",N_="d",_C="s",E_="r",vC="e",T_="o",C_="a",w_="n",A_="p",bC="h";class xC{constructor(t,s,l,o,u,f,m,y,g,x){this.id=t,this.repoInfo_=s,this.applicationId_=l,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=f,this.onReady_=m,this.onDisconnect_=y,this.onKill_=g,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gr("c:"+this.id+":"),this.transportManager_=new tr(s),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),l=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,l)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Kl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>yC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return s=>{t===this.conn_?this.onConnectionLost_(s):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return s=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(s):t===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(t){const s={t:"d",d:t};this.sendData_(s)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ch in t){const s=t[ch];s===C_?this.upgradeIfSecondaryHealthy_():s===E_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):s===T_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const s=zl("t",t),l=zl("d",t);if(s==="c")this.onSecondaryControl_(l);else if(s==="d")this.pendingDataMessages.push(l);else throw new Error("Unknown protocol layer: "+s)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:A_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:C_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:w_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const s=zl("t",t),l=zl("d",t);s==="c"?this.onControl_(l):s==="d"&&this.onDataMessage_(l)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const s=zl(ch,t);if(N_ in t){const l=t[N_];if(s===bC){const o={...l};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(s===w_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else s===_C?this.onConnectionShutdown_(l):s===E_?this.onReset_(l):s===vC?Th("Server Error: "+l):s===T_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Th("Unknown control packet command: "+s)}}onHandshake_(t){const s=t.ts,l=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),nf!==l&&Mt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),l=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,l),Kl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(mC))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,s){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Kl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:A_,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pv{put(t,s,l,o){}merge(t,s,l,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,s,l){}onDisconnectMerge(t,s,l){}onDisconnectCancel(t,s){}reportStats(t){}}class gv{constructor(t){this.allowedEvents_=t,this.listeners_={},Y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...s){if(Array.isArray(this.listeners_[t])){const l=[...this.listeners_[t]];for(let o=0;o<l.length;o++)l[o].callback.apply(l[o].context,s)}}on(t,s,l){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:s,context:l});const o=this.getInitialEvent(t);o&&s.apply(l,o)}off(t,s,l){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let u=0;u<o.length;u++)if(o[u].callback===s&&(!l||l===o[u].context)){o.splice(u,1);return}}validateEventType_(t){Y(this.allowedEvents_.find(s=>s===t),"Unknown event: "+t)}}class ic extends gv{static getInstance(){return new ic}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return Y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const j_=32,R_=768;class He{constructor(t,s){if(s===void 0){this.pieces_=t.split("/");let l=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[l]=this.pieces_[o],l++);this.pieces_.length=l,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=s}toString(){let t="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)this.pieces_[s]!==""&&(t+="/"+this.pieces_[s]);return t||"/"}}function Ce(){return new He("")}function pe(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Ps(i){return i.pieces_.length-i.pieceNum_}function Ge(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new He(i.pieces_,t)}function lf(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function SC(i){let t="";for(let s=i.pieceNum_;s<i.pieces_.length;s++)i.pieces_[s]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[s])));return t||"/"}function nr(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function yv(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let s=i.pieceNum_;s<i.pieces_.length-1;s++)t.push(i.pieces_[s]);return new He(t,0)}function $e(i,t){const s=[];for(let l=i.pieceNum_;l<i.pieces_.length;l++)s.push(i.pieces_[l]);if(t instanceof He)for(let l=t.pieceNum_;l<t.pieces_.length;l++)s.push(t.pieces_[l]);else{const l=t.split("/");for(let o=0;o<l.length;o++)l[o].length>0&&s.push(l[o])}return new He(s,0)}function ve(i){return i.pieceNum_>=i.pieces_.length}function Dt(i,t){const s=pe(i),l=pe(t);if(s===null)return t;if(s===l)return Dt(Ge(i),Ge(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function NC(i,t){const s=nr(i,0),l=nr(t,0);for(let o=0;o<s.length&&o<l.length;o++){const u=Ni(s[o],l[o]);if(u!==0)return u}return s.length===l.length?0:s.length<l.length?-1:1}function rf(i,t){if(Ps(i)!==Ps(t))return!1;for(let s=i.pieceNum_,l=t.pieceNum_;s<=i.pieces_.length;s++,l++)if(i.pieces_[s]!==t.pieces_[l])return!1;return!0}function hn(i,t){let s=i.pieceNum_,l=t.pieceNum_;if(Ps(i)>Ps(t))return!1;for(;s<i.pieces_.length;){if(i.pieces_[s]!==t.pieces_[l])return!1;++s,++l}return!0}class EC{constructor(t,s){this.errorPrefix_=s,this.parts_=nr(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let l=0;l<this.parts_.length;l++)this.byteLength_+=yc(this.parts_[l]);_v(this)}}function TC(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=yc(t),_v(i)}function CC(i){const t=i.parts_.pop();i.byteLength_-=yc(t),i.parts_.length>0&&(i.byteLength_-=1)}function _v(i){if(i.byteLength_>R_)throw new Error(i.errorPrefix_+"has a key path longer than "+R_+" bytes ("+i.byteLength_+").");if(i.parts_.length>j_)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+j_+") or object contains a cycle "+fi(i))}function fi(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}class of extends gv{static getInstance(){return new of}constructor(){super(["visible"]);let t,s;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(s="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(s="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(s="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(s="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const l=!document[t];l!==this.visible_&&(this.visible_=l,this.trigger("visible",l))},!1)}getInitialEvent(t){return Y(t==="visible","Unknown event type: "+t),[this.visible_]}}const Hl=1e3,wC=300*1e3,O_=30*1e3,AC=1.3,jC=3e4,RC="server_kill",I_=3;class ts extends pv{constructor(t,s,l,o,u,f,m,y){if(super(),this.repoInfo_=t,this.applicationId_=s,this.onDataUpdate_=l,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=ts.nextPersistentConnectionId_++,this.log_=gr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hl,this.maxReconnectDelay_=wC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");of.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ic.getInstance().on("online",this.onOnline_,this)}sendRequest(t,s,l){const o=++this.requestNumber_,u={r:o,a:t,b:s};this.log_(ft(u)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),l&&(this.requestCBHash_[o]=l)}get(t){this.initConnection_();const s=new cr,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;f.s==="ok"?s.resolve(m):s.reject(m)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),s.promise}listen(t,s,l,o){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),Y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:s,query:t,tag:l};this.listens.get(f).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const s=this.outstandingGets_[t];this.sendRequest("g",s.request,l=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(l)})}sendListen_(t){const s=t.query,l=s._path.toString(),o=s._queryIdentifier;this.log_("Listen on "+l+" for "+o);const u={p:l},f="q";t.tag&&(u.q=s._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(f,u,m=>{const y=m.d,g=m.s;ts.warnOnListenWarnings_(y,s),(this.listens.get(l)&&this.listens.get(l).get(o))===t&&(this.log_("listen response",m),g!=="ok"&&this.removeListen_(l,o),t.onComplete&&t.onComplete(g,y))})}static warnOnListenWarnings_(t,s){if(t&&typeof t=="object"&&On(t,"w")){const l=Ta(t,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const o='".indexOn": "'+s._queryParams.getIndex().toString()+'"',u=s._path.toString();Mt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||iS(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=O_)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,s=sS(t)?"auth":"gauth",l={cred:t};this.authOverride_===null?l.noauth=!0:typeof this.authOverride_=="object"&&(l.authvar=this.authOverride_),this.sendRequest(s,l,o=>{const u=o.s,f=o.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const s=t.s,l=t.d||"error";s==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,l)})}unlisten(t,s){const l=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+l+" "+o),Y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,o)&&this.connected_&&this.sendUnlisten_(l,o,t._queryObject,s)}sendUnlisten_(t,s,l,o){this.log_("Unlisten on "+t+" for "+s);const u={p:t},f="n";o&&(u.q=l,u.t=o),this.sendRequest(f,u)}onDisconnectPut(t,s,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,s,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:s,onComplete:l})}onDisconnectMerge(t,s,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,s,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:s,onComplete:l})}onDisconnectCancel(t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(t,s,l,o){const u={p:s,d:l};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,s,l,o){this.putInternal("p",t,s,l,o)}merge(t,s,l,o){this.putInternal("m",t,s,l,o)}putInternal(t,s,l,o,u){this.initConnection_();const f={p:s,d:l};u!==void 0&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+s)}sendPut_(t){const s=this.outstandingPuts_[t].action,l=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(s,l,u=>{this.log_(s+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const s={c:t};this.log_("reportStats",s),this.sendRequest("s",s,l=>{if(l.s!=="ok"){const u=l.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ft(t));const s=t.r,l=this.requestCBHash_[s];l&&(delete this.requestCBHash_[s],l(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,s){this.log_("handleServerMessage",t,s),t==="d"?this.onDataUpdate_(s.p,s.d,!1,s.t):t==="m"?this.onDataUpdate_(s.p,s.d,!0,s.t):t==="c"?this.onListenRevoked_(s.p,s.q):t==="ac"?this.onAuthRevoked_(s.s,s.d):t==="apc"?this.onAppCheckRevoked_(s.s,s.d):t==="sd"?this.onSecurityDebugPacket_(s):Th("Unrecognized action received from server: "+ft(t)+`
Are you using the latest client?`)}onReady_(t,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Hl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>jC&&(this.reconnectDelay_=Hl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let s=Math.max(0,this.reconnectDelay_-t);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*AC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),s=this.onReady_.bind(this),l=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+ts.nextConnectionId_++,u=this.lastSessionId;let f=!1,m=null;const y=function(){m?m.close():(f=!0,l())},g=function(v){Y(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(v)};this.realtime_={close:y,sendRequest:g};const x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,b]=await Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);f?Tt("getToken() completed but was canceled"):(Tt("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=b&&b.token,m=new xC(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,s,l,C=>{Mt(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(RC)},u))}catch(v){this.log_("Failed to get token: "+v),f||(this.repoInfo_.nodeAdmin&&Mt(v),y())}}}interrupt(t){Tt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Tt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ph(this.interruptReasons_)&&(this.reconnectDelay_=Hl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const s=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const s=this.outstandingPuts_[t];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,s){let l;s?l=s.map(u=>tf(u)).join("$"):l="default";const o=this.removeListen_(t,l);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,s){const l=new He(t).toString();let o;if(this.listens.has(l)){const u=this.listens.get(l);o=u.get(s),u.delete(s),u.size===0&&this.listens.delete(l)}else o=void 0;return o}onAuthRevoked_(t,s){Tt("Auth token revoked: "+t+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=I_&&(this.reconnectDelay_=O_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,s){Tt("App check token revoked: "+t+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=I_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const s of t.values())this.sendListen_(s);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let s="js";t["sdk."+s+"."+X0.replace(/\./g,"-")]=1,qh()?t["framework.cordova"]=1:l0()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ic.getInstance().currentlyOnline();return ph(this.interruptReasons_)&&t}}ts.nextPersistentConnectionId_=0;ts.nextConnectionId_=0;class ge{constructor(t,s){this.name=t,this.node=s}static Wrap(t,s){return new ge(t,s)}}class xc{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,s){const l=new ge(wa,t),o=new ge(wa,s);return this.compare(l,o)!==0}minPost(){return ge.MIN}}let Bo;class vv extends xc{static get __EMPTY_NODE(){return Bo}static set __EMPTY_NODE(t){Bo=t}compare(t,s){return Ni(t.name,s.name)}isDefinedOn(t){throw Ia("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,s){return!1}minPost(){return ge.MIN}maxPost(){return new ge(vi,Bo)}makePost(t,s){return Y(typeof t=="string","KeyIndex indexValue must always be a string."),new ge(t,Bo)}toString(){return".key"}}const Ea=new vv;class Po{constructor(t,s,l,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let f=1;for(;!t.isEmpty();)if(t=t,f=s?l(t.key,s):1,o&&(f*=-1),f<0)this.isReverse_?t=t.left:t=t.right;else if(f===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),s;if(this.resultGenerator_?s=this.resultGenerator_(t.key,t.value):s={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class vt{constructor(t,s,l,o,u){this.key=t,this.value=s,this.color=l??vt.RED,this.left=o??Yt.EMPTY_NODE,this.right=u??Yt.EMPTY_NODE}copy(t,s,l,o,u){return new vt(t??this.key,s??this.value,l??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,l){let o=this;const u=l(t,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(t,s,l),null):u===0?o=o.copy(null,s,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,s,l)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,s){let l,o;if(l=this,s(t,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(t,s),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),s(t,l.key)===0){if(l.right.isEmpty())return Yt.EMPTY_NODE;o=l.right.min_(),l=l.copy(o.key,o.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(t,s))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}vt.RED=!0;vt.BLACK=!1;class OC{copy(t,s,l,o,u){return this}insert(t,s,l){return new vt(t,s,null)}remove(t,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Yt{constructor(t,s=Yt.EMPTY_NODE){this.comparator_=t,this.root_=s}insert(t,s){return new Yt(this.comparator_,this.root_.insert(t,s,this.comparator_).copy(null,null,vt.BLACK,null,null))}remove(t){return new Yt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,vt.BLACK,null,null))}get(t){let s,l=this.root_;for(;!l.isEmpty();){if(s=this.comparator_(t,l.key),s===0)return l.value;s<0?l=l.left:s>0&&(l=l.right)}return null}getPredecessorKey(t){let s,l=this.root_,o=null;for(;!l.isEmpty();)if(s=this.comparator_(t,l.key),s===0){if(l.left.isEmpty())return o?o.key:null;for(l=l.left;!l.right.isEmpty();)l=l.right;return l.key}else s<0?l=l.left:s>0&&(o=l,l=l.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Po(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,s){return new Po(this.root_,t,this.comparator_,!1,s)}getReverseIteratorFrom(t,s){return new Po(this.root_,t,this.comparator_,!0,s)}getReverseIterator(t){return new Po(this.root_,null,this.comparator_,!0,t)}}Yt.EMPTY_NODE=new OC;function IC(i,t){return Ni(i.name,t.name)}function cf(i,t){return Ni(i,t)}let wh;function DC(i){wh=i}const bv=function(i){return typeof i=="number"?"number:"+J0(i):"string:"+i},xv=function(i){if(i.isLeafNode()){const t=i.val();Y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&On(t,".sv"),"Priority must be a string or number.")}else Y(i===wh||i.isEmpty(),"priority of unexpected type.");Y(i===wh||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let D_;class _t{static set __childrenNodeConstructor(t){D_=t}static get __childrenNodeConstructor(){return D_}constructor(t,s=_t.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=s,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),xv(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new _t(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:_t.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ve(t)?this:pe(t)===".priority"?this.priorityNode_:_t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,s){return null}updateImmediateChild(t,s){return t===".priority"?this.updatePriority(s):s.isEmpty()&&t!==".priority"?this:_t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,s).updatePriority(this.priorityNode_)}updateChild(t,s){const l=pe(t);return l===null?s:s.isEmpty()&&l!==".priority"?this:(Y(l!==".priority"||Ps(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(l,_t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ge(t),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,s){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+bv(this.priorityNode_.val())+":");const s=typeof this.value_;t+=s+":",s==="number"?t+=J0(this.value_):t+=this.value_,this.lazyHash_=Z0(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===_t.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof _t.__childrenNodeConstructor?-1:(Y(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const s=typeof t.value_,l=typeof this.value_,o=_t.VALUE_TYPE_ORDER.indexOf(s),u=_t.VALUE_TYPE_ORDER.indexOf(l);return Y(o>=0,"Unknown leaf type: "+s),Y(u>=0,"Unknown leaf type: "+l),o===u?l==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const s=t;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}else return!1}}_t.VALUE_TYPE_ORDER=["object","boolean","number","string"];let Sv,Nv;function MC(i){Sv=i}function kC(i){Nv=i}class LC extends xc{compare(t,s){const l=t.node.getPriority(),o=s.node.getPriority(),u=l.compareTo(o);return u===0?Ni(t.name,s.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,s){return!t.getPriority().equals(s.getPriority())}minPost(){return ge.MIN}maxPost(){return new ge(vi,new _t("[PRIORITY-POST]",Nv))}makePost(t,s){const l=Sv(t);return new ge(s,new _t("[PRIORITY-POST]",l))}toString(){return".priority"}}const Je=new LC;const UC=Math.log(2);class zC{constructor(t){const s=u=>parseInt(Math.log(u)/UC,10),l=u=>parseInt(Array(u+1).join("1"),2);this.count=s(t+1),this.current_=this.count-1;const o=l(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const ac=function(i,t,s,l){i.sort(t);const o=function(y,g){const x=g-y;let v,b;if(x===0)return null;if(x===1)return v=i[y],b=s?s(v):v,new vt(b,v.node,vt.BLACK,null,null);{const C=parseInt(x/2,10)+y,A=o(y,C),L=o(C+1,g);return v=i[C],b=s?s(v):v,new vt(b,v.node,vt.BLACK,A,L)}},u=function(y){let g=null,x=null,v=i.length;const b=function(A,L){const I=v-A,U=v;v-=A;const q=o(I+1,U),Q=i[I],ee=s?s(Q):Q;C(new vt(ee,Q.node,L,null,q))},C=function(A){g?(g.left=A,g=A):(x=A,g=A)};for(let A=0;A<y.count;++A){const L=y.nextBitIsOne(),I=Math.pow(2,y.count-(A+1));L?b(I,vt.BLACK):(b(I,vt.BLACK),b(I,vt.RED))}return x},f=new zC(i.length),m=u(f);return new Yt(l||t,m)};let uh;const ga={};class Fn{static get Default(){return Y(ga&&Je,"ChildrenNode.ts has not been loaded"),uh=uh||new Fn({".priority":ga},{".priority":Je}),uh}constructor(t,s){this.indexes_=t,this.indexSet_=s}get(t){const s=Ta(this.indexes_,t);if(!s)throw new Error("No index defined for "+t);return s instanceof Yt?s:null}hasIndex(t){return On(this.indexSet_,t.toString())}addIndex(t,s){Y(t!==Ea,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const l=[];let o=!1;const u=s.getIterator(ge.Wrap);let f=u.getNext();for(;f;)o=o||t.isDefinedOn(f.node),l.push(f),f=u.getNext();let m;o?m=ac(l,t.getCompare()):m=ga;const y=t.toString(),g={...this.indexSet_};g[y]=t;const x={...this.indexes_};return x[y]=m,new Fn(x,g)}addToIndexes(t,s){const l=Wo(this.indexes_,(o,u)=>{const f=Ta(this.indexSet_,u);if(Y(f,"Missing index implementation for "+u),o===ga)if(f.isDefinedOn(t.node)){const m=[],y=s.getIterator(ge.Wrap);let g=y.getNext();for(;g;)g.name!==t.name&&m.push(g),g=y.getNext();return m.push(t),ac(m,f.getCompare())}else return ga;else{const m=s.get(t.name);let y=o;return m&&(y=y.remove(new ge(t.name,m))),y.insert(t,t.node)}});return new Fn(l,this.indexSet_)}removeFromIndexes(t,s){const l=Wo(this.indexes_,o=>{if(o===ga)return o;{const u=s.get(t.name);return u?o.remove(new ge(t.name,u)):o}});return new Fn(l,this.indexSet_)}}let Bl;class ie{static get EMPTY_NODE(){return Bl||(Bl=new ie(new Yt(cf),null,Fn.Default))}constructor(t,s,l){this.children_=t,this.priorityNode_=s,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&xv(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Bl}updatePriority(t){return this.children_.isEmpty()?this:new ie(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const s=this.children_.get(t);return s===null?Bl:s}}getChild(t){const s=pe(t);return s===null?this:this.getImmediateChild(s).getChild(Ge(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,s){if(Y(s,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(s);{const l=new ge(t,s);let o,u;s.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(l,this.children_)):(o=this.children_.insert(t,s),u=this.indexMap_.addToIndexes(l,this.children_));const f=o.isEmpty()?Bl:this.priorityNode_;return new ie(o,f,u)}}updateChild(t,s){const l=pe(t);if(l===null)return s;{Y(pe(t)!==".priority"||Ps(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(l).updateChild(Ge(t),s);return this.updateImmediateChild(l,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const s={};let l=0,o=0,u=!0;if(this.forEachChild(Je,(f,m)=>{s[f]=m.val(t),l++,u&&ie.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):u=!1}),!t&&u&&o<2*l){const f=[];for(const m in s)f[m]=s[m];return f}else return t&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+bv(this.getPriority().val())+":"),this.forEachChild(Je,(s,l)=>{const o=l.hash();o!==""&&(t+=":"+s+":"+o)}),this.lazyHash_=t===""?"":Z0(t)}return this.lazyHash_}getPredecessorChildName(t,s,l){const o=this.resolveIndex_(l);if(o){const u=o.getPredecessorKey(new ge(t,s));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const s=this.resolveIndex_(t);if(s){const l=s.minKey();return l&&l.name}else return this.children_.minKey()}getFirstChild(t){const s=this.getFirstChildName(t);return s?new ge(s,this.children_.get(s)):null}getLastChildName(t){const s=this.resolveIndex_(t);if(s){const l=s.maxKey();return l&&l.name}else return this.children_.maxKey()}getLastChild(t){const s=this.getLastChildName(t);return s?new ge(s,this.children_.get(s)):null}forEachChild(t,s){const l=this.resolveIndex_(t);return l?l.inorderTraversal(o=>s(o.name,o.node)):this.children_.inorderTraversal(s)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,s){const l=this.resolveIndex_(s);if(l)return l.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,ge.Wrap);let u=o.peek();for(;u!=null&&s.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,s){const l=this.resolveIndex_(s);if(l)return l.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,ge.Wrap);let u=o.peek();for(;u!=null&&s.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===yr?-1:0}withIndex(t){if(t===Ea||this.indexMap_.hasIndex(t))return this;{const s=this.indexMap_.addIndex(t,this.children_);return new ie(this.children_,this.priorityNode_,s)}}isIndexed(t){return t===Ea||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const s=t;if(this.getPriority().equals(s.getPriority()))if(this.children_.count()===s.children_.count()){const l=this.getIterator(Je),o=s.getIterator(Je);let u=l.getNext(),f=o.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=l.getNext(),f=o.getNext()}return u===null&&f===null}else return!1;else return!1}}resolveIndex_(t){return t===Ea?null:this.indexMap_.get(t.toString())}}ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class HC extends ie{constructor(){super(new Yt(cf),ie.EMPTY_NODE,Fn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ie.EMPTY_NODE}isEmpty(){return!1}}const yr=new HC;Object.defineProperties(ge,{MIN:{value:new ge(wa,ie.EMPTY_NODE)},MAX:{value:new ge(vi,yr)}});vv.__EMPTY_NODE=ie.EMPTY_NODE;_t.__childrenNodeConstructor=ie;DC(yr);kC(yr);const BC=!0;function ht(i,t=null){if(i===null)return ie.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),Y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const s=i;return new _t(s,ht(t))}if(!(i instanceof Array)&&BC){const s=[];let l=!1;if(Ct(i,(f,m)=>{if(f.substring(0,1)!=="."){const y=ht(m);y.isEmpty()||(l=l||!y.getPriority().isEmpty(),s.push(new ge(f,y)))}}),s.length===0)return ie.EMPTY_NODE;const u=ac(s,IC,f=>f.name,cf);if(l){const f=ac(s,Je.getCompare());return new ie(u,ht(t),new Fn({".priority":f},{".priority":Je}))}else return new ie(u,ht(t),Fn.Default)}else{let s=ie.EMPTY_NODE;return Ct(i,(l,o)=>{if(On(i,l)&&l.substring(0,1)!=="."){const u=ht(o);(u.isLeafNode()||!u.isEmpty())&&(s=s.updateImmediateChild(l,u))}}),s.updatePriority(ht(t))}}MC(ht);class PC extends xc{constructor(t){super(),this.indexPath_=t,Y(!ve(t)&&pe(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,s){const l=this.extractChild(t.node),o=this.extractChild(s.node),u=l.compareTo(o);return u===0?Ni(t.name,s.name):u}makePost(t,s){const l=ht(t),o=ie.EMPTY_NODE.updateChild(this.indexPath_,l);return new ge(s,o)}maxPost(){const t=ie.EMPTY_NODE.updateChild(this.indexPath_,yr);return new ge(vi,t)}toString(){return nr(this.indexPath_,0).join("/")}}class qC extends xc{compare(t,s){const l=t.node.compareTo(s.node);return l===0?Ni(t.name,s.name):l}isDefinedOn(t){return!0}indexedValueChanged(t,s){return!t.equals(s)}minPost(){return ge.MIN}maxPost(){return ge.MAX}makePost(t,s){const l=ht(t);return new ge(s,l)}toString(){return".value"}}const GC=new qC;function Ev(i){return{type:"value",snapshotNode:i}}function Aa(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function sr(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function ir(i,t,s){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:s}}function VC(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}class uf{constructor(t){this.index_=t}updateChild(t,s,l,o,u,f){Y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=t.getImmediateChild(s);return m.getChild(o).equals(l.getChild(o))&&m.isEmpty()===l.isEmpty()||(f!=null&&(l.isEmpty()?t.hasChild(s)?f.trackChildChange(sr(s,m)):Y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?f.trackChildChange(Aa(s,l)):f.trackChildChange(ir(s,l,m))),t.isLeafNode()&&l.isEmpty())?t:t.updateImmediateChild(s,l).withIndex(this.index_)}updateFullNode(t,s,l){return l!=null&&(t.isLeafNode()||t.forEachChild(Je,(o,u)=>{s.hasChild(o)||l.trackChildChange(sr(o,u))}),s.isLeafNode()||s.forEachChild(Je,(o,u)=>{if(t.hasChild(o)){const f=t.getImmediateChild(o);f.equals(u)||l.trackChildChange(ir(o,u,f))}else l.trackChildChange(Aa(o,u))})),s.withIndex(this.index_)}updatePriority(t,s){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(s)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ar{constructor(t){this.indexedFilter_=new uf(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ar.getStartPost_(t),this.endPost_=ar.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const s=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,l=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return s&&l}updateChild(t,s,l,o,u,f){return this.matches(new ge(s,l))||(l=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,s,l,o,u,f)}updateFullNode(t,s,l){s.isLeafNode()&&(s=ie.EMPTY_NODE);let o=s.withIndex(this.index_);o=o.updatePriority(ie.EMPTY_NODE);const u=this;return s.forEachChild(Je,(f,m)=>{u.matches(new ge(f,m))||(o=o.updateImmediateChild(f,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,l)}updatePriority(t,s){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const s=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),s)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const s=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),s)}else return t.getIndex().maxPost()}}class YC{constructor(t){this.withinDirectionalStart=s=>this.reverse_?this.withinEndPost(s):this.withinStartPost(s),this.withinDirectionalEnd=s=>this.reverse_?this.withinStartPost(s):this.withinEndPost(s),this.withinStartPost=s=>{const l=this.index_.compare(this.rangedFilter_.getStartPost(),s);return this.startIsInclusive_?l<=0:l<0},this.withinEndPost=s=>{const l=this.index_.compare(s,this.rangedFilter_.getEndPost());return this.endIsInclusive_?l<=0:l<0},this.rangedFilter_=new ar(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,s,l,o,u,f){return this.rangedFilter_.matches(new ge(s,l))||(l=ie.EMPTY_NODE),t.getImmediateChild(s).equals(l)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,s,l,o,u,f):this.fullLimitUpdateChild_(t,s,l,u,f)}updateFullNode(t,s,l){let o;if(s.isLeafNode()||s.isEmpty())o=ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<s.numChildren()&&s.isIndexed(this.index_)){o=ie.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=s.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=s.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;u.hasNext()&&f<this.limit_;){const m=u.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))o=o.updateImmediateChild(m.name,m.node),f++;else break;else continue}}else{o=s.withIndex(this.index_),o=o.updatePriority(ie.EMPTY_NODE);let u;this.reverse_?u=o.getReverseIterator(this.index_):u=o.getIterator(this.index_);let f=0;for(;u.hasNext();){const m=u.getNext();f<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?f++:o=o.updateImmediateChild(m.name,ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,l)}updatePriority(t,s){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,s,l,o,u){let f;if(this.reverse_){const v=this.index_.getCompare();f=(b,C)=>v(C,b)}else f=this.index_.getCompare();const m=t;Y(m.numChildren()===this.limit_,"");const y=new ge(s,l),g=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),x=this.rangedFilter_.matches(y);if(m.hasChild(s)){const v=m.getImmediateChild(s);let b=o.getChildAfterChild(this.index_,g,this.reverse_);for(;b!=null&&(b.name===s||m.hasChild(b.name));)b=o.getChildAfterChild(this.index_,b,this.reverse_);const C=b==null?1:f(b,y);if(x&&!l.isEmpty()&&C>=0)return u?.trackChildChange(ir(s,l,v)),m.updateImmediateChild(s,l);{u?.trackChildChange(sr(s,v));const L=m.updateImmediateChild(s,ie.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(u?.trackChildChange(Aa(b.name,b.node)),L.updateImmediateChild(b.name,b.node)):L}}else return l.isEmpty()?t:x&&f(g,y)>=0?(u!=null&&(u.trackChildChange(sr(g.name,g.node)),u.trackChildChange(Aa(s,l))),m.updateImmediateChild(s,l).updateImmediateChild(g.name,ie.EMPTY_NODE)):t}}class df{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Je}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wa}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Je}copy(){const t=new df;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function QC(i){return i.loadsAllData()?new uf(i.getIndex()):i.hasLimit()?new YC(i):new ar(i)}function M_(i){const t={};if(i.isDefault())return t;let s;if(i.index_===Je?s="$priority":i.index_===GC?s="$value":i.index_===Ea?s="$key":(Y(i.index_ instanceof PC,"Unrecognized index type!"),s=i.index_.toString()),t.orderBy=ft(s),i.startSet_){const l=i.startAfterSet_?"startAfter":"startAt";t[l]=ft(i.indexStartValue_),i.startNameSet_&&(t[l]+=","+ft(i.indexStartName_))}if(i.endSet_){const l=i.endBeforeSet_?"endBefore":"endAt";t[l]=ft(i.indexEndValue_),i.endNameSet_&&(t[l]+=","+ft(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function k_(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let s=i.viewFrom_;s===""&&(i.isViewFromLeft()?s="l":s="r"),t.vf=s}return i.index_!==Je&&(t.i=i.index_.toString()),t}class lc extends pv{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,s){return s!==void 0?"tag$"+s:(Y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,s,l,o){super(),this.repoInfo_=t,this.onDataUpdate_=s,this.authTokenProvider_=l,this.appCheckTokenProvider_=o,this.log_=gr("p:rest:"),this.listens_={}}listen(t,s,l,o){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const f=lc.getListenId_(t,l),m={};this.listens_[f]=m;const y=M_(t._queryParams);this.restRequest_(u+".json",y,(g,x)=>{let v=x;if(g===404&&(v=null,g=null),g===null&&this.onDataUpdate_(u,v,!1,l),Ta(this.listens_,f)===m){let b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",o(b,null)}})}unlisten(t,s){const l=lc.getListenId_(t,s);delete this.listens_[l]}get(t){const s=M_(t._queryParams),l=t._path.toString(),o=new cr;return this.restRequest_(l+".json",s,(u,f)=>{let m=f;u===404&&(m=null,u=null),u===null?(this.onDataUpdate_(l,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(t){}restRequest_(t,s={},l){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(s.auth=o.accessToken),u&&u.token&&(s.ac=u.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ma(s);this.log_("Sending REST request for "+f);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(l&&m.readyState===4){this.log_("REST Response for "+f+" received. status:",m.status,"response:",m.responseText);let y=null;if(m.status>=200&&m.status<300){try{y=$l(m.responseText)}catch{Mt("Failed to parse JSON response for "+f+": "+m.responseText)}l(null,y)}else m.status!==401&&m.status!==404&&Mt("Got unsuccessful REST response for "+f+" Status: "+m.status),l(m.status);l=null}},m.open("GET",f,!0),m.send()})}}class KC{constructor(){this.rootNode_=ie.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,s){this.rootNode_=this.rootNode_.updateChild(t,s)}}function rc(){return{value:null,children:new Map}}function Tv(i,t,s){if(ve(t))i.value=s,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,s);else{const l=pe(t);i.children.has(l)||i.children.set(l,rc());const o=i.children.get(l);t=Ge(t),Tv(o,t,s)}}function Ah(i,t,s){i.value!==null?s(t,i.value):XC(i,(l,o)=>{const u=new He(t.toString()+"/"+l);Ah(o,u,s)})}function XC(i,t){i.children.forEach((s,l)=>{t(l,s)})}class WC{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),s={...t};return this.last_&&Ct(this.last_,(l,o)=>{s[l]=s[l]-o}),this.last_=t,s}}const L_=10*1e3,ZC=30*1e3,$C=300*1e3;class JC{constructor(t,s){this.server_=s,this.statsToReport_={},this.statsListener_=new WC(t);const l=L_+(ZC-L_)*Math.random();Kl(this.reportStats_.bind(this),Math.floor(l))}reportStats_(){const t=this.statsListener_.get(),s={};let l=!1;Ct(t,(o,u)=>{u>0&&On(this.statsToReport_,o)&&(s[o]=u,l=!0)}),l&&this.server_.reportStats(s),Kl(this.reportStats_.bind(this),Math.floor(Math.random()*2*$C))}}var bn;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(bn||(bn={}));function hf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ff(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mf(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class oc{constructor(t,s,l){this.path=t,this.affectedTree=s,this.revert=l,this.type=bn.ACK_USER_WRITE,this.source=hf()}operationForChild(t){if(ve(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new He(t));return new oc(Ce(),s,this.revert)}}else return Y(pe(this.path)===t,"operationForChild called for unrelated child."),new oc(Ge(this.path),this.affectedTree,this.revert)}}class lr{constructor(t,s){this.source=t,this.path=s,this.type=bn.LISTEN_COMPLETE}operationForChild(t){return ve(this.path)?new lr(this.source,Ce()):new lr(this.source,Ge(this.path))}}class bi{constructor(t,s,l){this.source=t,this.path=s,this.snap=l,this.type=bn.OVERWRITE}operationForChild(t){return ve(this.path)?new bi(this.source,Ce(),this.snap.getImmediateChild(t)):new bi(this.source,Ge(this.path),this.snap)}}class ja{constructor(t,s,l){this.source=t,this.path=s,this.children=l,this.type=bn.MERGE}operationForChild(t){if(ve(this.path)){const s=this.children.subtree(new He(t));return s.isEmpty()?null:s.value?new bi(this.source,Ce(),s.value):new ja(this.source,Ce(),s)}else return Y(pe(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ja(this.source,Ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class qs{constructor(t,s,l){this.node_=t,this.fullyInitialized_=s,this.filtered_=l}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ve(t))return this.isFullyInitialized()&&!this.filtered_;const s=pe(t);return this.isCompleteForChild(s)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class FC{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function ew(i,t,s,l){const o=[],u=[];return t.forEach(f=>{f.type==="child_changed"&&i.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&u.push(VC(f.childName,f.snapshotNode))}),Pl(i,o,"child_removed",t,l,s),Pl(i,o,"child_added",t,l,s),Pl(i,o,"child_moved",u,l,s),Pl(i,o,"child_changed",t,l,s),Pl(i,o,"value",t,l,s),o}function Pl(i,t,s,l,o,u){const f=l.filter(m=>m.type===s);f.sort((m,y)=>nw(i,m,y)),f.forEach(m=>{const y=tw(i,m,u);o.forEach(g=>{g.respondsTo(m.type)&&t.push(g.createEvent(y,i.query_))})})}function tw(i,t,s){return t.type==="value"||t.type==="child_removed"||(t.prevName=s.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function nw(i,t,s){if(t.childName==null||s.childName==null)throw Ia("Should only compare child_ events.");const l=new ge(t.childName,t.snapshotNode),o=new ge(s.childName,s.snapshotNode);return i.index_.compare(l,o)}function Sc(i,t){return{eventCache:i,serverCache:t}}function Xl(i,t,s,l){return Sc(new qs(t,s,l),i.serverCache)}function Cv(i,t,s,l){return Sc(i.eventCache,new qs(t,s,l))}function cc(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function xi(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let dh;const sw=()=>(dh||(dh=new Yt(PT)),dh);class qe{static fromObject(t){let s=new qe(null);return Ct(t,(l,o)=>{s=s.set(new He(l),o)}),s}constructor(t,s=sw()){this.value=t,this.children=s}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,s){if(this.value!=null&&s(this.value))return{path:Ce(),value:this.value};if(ve(t))return null;{const l=pe(t),o=this.children.get(l);if(o!==null){const u=o.findRootMostMatchingPathAndValue(Ge(t),s);return u!=null?{path:$e(new He(l),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ve(t))return this;{const s=pe(t),l=this.children.get(s);return l!==null?l.subtree(Ge(t)):new qe(null)}}set(t,s){if(ve(t))return new qe(s,this.children);{const l=pe(t),u=(this.children.get(l)||new qe(null)).set(Ge(t),s),f=this.children.insert(l,u);return new qe(this.value,f)}}remove(t){if(ve(t))return this.children.isEmpty()?new qe(null):new qe(null,this.children);{const s=pe(t),l=this.children.get(s);if(l){const o=l.remove(Ge(t));let u;return o.isEmpty()?u=this.children.remove(s):u=this.children.insert(s,o),this.value===null&&u.isEmpty()?new qe(null):new qe(this.value,u)}else return this}}get(t){if(ve(t))return this.value;{const s=pe(t),l=this.children.get(s);return l?l.get(Ge(t)):null}}setTree(t,s){if(ve(t))return s;{const l=pe(t),u=(this.children.get(l)||new qe(null)).setTree(Ge(t),s);let f;return u.isEmpty()?f=this.children.remove(l):f=this.children.insert(l,u),new qe(this.value,f)}}fold(t){return this.fold_(Ce(),t)}fold_(t,s){const l={};return this.children.inorderTraversal((o,u)=>{l[o]=u.fold_($e(t,o),s)}),s(t,this.value,l)}findOnPath(t,s){return this.findOnPath_(t,Ce(),s)}findOnPath_(t,s,l){const o=this.value?l(s,this.value):!1;if(o)return o;if(ve(t))return null;{const u=pe(t),f=this.children.get(u);return f?f.findOnPath_(Ge(t),$e(s,u),l):null}}foreachOnPath(t,s){return this.foreachOnPath_(t,Ce(),s)}foreachOnPath_(t,s,l){if(ve(t))return this;{this.value&&l(s,this.value);const o=pe(t),u=this.children.get(o);return u?u.foreachOnPath_(Ge(t),$e(s,o),l):new qe(null)}}foreach(t){this.foreach_(Ce(),t)}foreach_(t,s){this.children.inorderTraversal((l,o)=>{o.foreach_($e(t,l),s)}),this.value&&s(t,this.value)}foreachChild(t){this.children.inorderTraversal((s,l)=>{l.value&&t(s,l.value)})}}class xn{constructor(t){this.writeTree_=t}static empty(){return new xn(new qe(null))}}function Wl(i,t,s){if(ve(t))return new xn(new qe(s));{const l=i.writeTree_.findRootMostValueAndPath(t);if(l!=null){const o=l.path;let u=l.value;const f=Dt(o,t);return u=u.updateChild(f,s),new xn(i.writeTree_.set(o,u))}else{const o=new qe(s),u=i.writeTree_.setTree(t,o);return new xn(u)}}}function jh(i,t,s){let l=i;return Ct(s,(o,u)=>{l=Wl(l,$e(t,o),u)}),l}function U_(i,t){if(ve(t))return xn.empty();{const s=i.writeTree_.setTree(t,new qe(null));return new xn(s)}}function Rh(i,t){return Ei(i,t)!=null}function Ei(i,t){const s=i.writeTree_.findRootMostValueAndPath(t);return s!=null?i.writeTree_.get(s.path).getChild(Dt(s.path,t)):null}function z_(i){const t=[],s=i.writeTree_.value;return s!=null?s.isLeafNode()||s.forEachChild(Je,(l,o)=>{t.push(new ge(l,o))}):i.writeTree_.children.inorderTraversal((l,o)=>{o.value!=null&&t.push(new ge(l,o.value))}),t}function Hs(i,t){if(ve(t))return i;{const s=Ei(i,t);return s!=null?new xn(new qe(s)):new xn(i.writeTree_.subtree(t))}}function Oh(i){return i.writeTree_.isEmpty()}function Ra(i,t){return wv(Ce(),i.writeTree_,t)}function wv(i,t,s){if(t.value!=null)return s.updateChild(i,t.value);{let l=null;return t.children.inorderTraversal((o,u)=>{o===".priority"?(Y(u.value!==null,"Priority writes must always be leaf nodes"),l=u.value):s=wv($e(i,o),u,s)}),!s.getChild(i).isEmpty()&&l!==null&&(s=s.updateChild($e(i,".priority"),l)),s}}function Nc(i,t){return Ov(t,i)}function iw(i,t,s,l,o){Y(l>i.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),i.allWrites.push({path:t,snap:s,writeId:l,visible:o}),o&&(i.visibleWrites=Wl(i.visibleWrites,t,s)),i.lastWriteId=l}function aw(i,t,s,l){Y(l>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:t,children:s,writeId:l,visible:!0}),i.visibleWrites=jh(i.visibleWrites,t,s),i.lastWriteId=l}function lw(i,t){for(let s=0;s<i.allWrites.length;s++){const l=i.allWrites[s];if(l.writeId===t)return l}return null}function rw(i,t){const s=i.allWrites.findIndex(m=>m.writeId===t);Y(s>=0,"removeWrite called with nonexistent writeId.");const l=i.allWrites[s];i.allWrites.splice(s,1);let o=l.visible,u=!1,f=i.allWrites.length-1;for(;o&&f>=0;){const m=i.allWrites[f];m.visible&&(f>=s&&ow(m,l.path)?o=!1:hn(l.path,m.path)&&(u=!0)),f--}if(o){if(u)return cw(i),!0;if(l.snap)i.visibleWrites=U_(i.visibleWrites,l.path);else{const m=l.children;Ct(m,y=>{i.visibleWrites=U_(i.visibleWrites,$e(l.path,y))})}return!0}else return!1}function ow(i,t){if(i.snap)return hn(i.path,t);for(const s in i.children)if(i.children.hasOwnProperty(s)&&hn($e(i.path,s),t))return!0;return!1}function cw(i){i.visibleWrites=Av(i.allWrites,uw,Ce()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function uw(i){return i.visible}function Av(i,t,s){let l=xn.empty();for(let o=0;o<i.length;++o){const u=i[o];if(t(u)){const f=u.path;let m;if(u.snap)hn(s,f)?(m=Dt(s,f),l=Wl(l,m,u.snap)):hn(f,s)&&(m=Dt(f,s),l=Wl(l,Ce(),u.snap.getChild(m)));else if(u.children){if(hn(s,f))m=Dt(s,f),l=jh(l,m,u.children);else if(hn(f,s))if(m=Dt(f,s),ve(m))l=jh(l,Ce(),u.children);else{const y=Ta(u.children,pe(m));if(y){const g=y.getChild(Ge(m));l=Wl(l,Ce(),g)}}}else throw Ia("WriteRecord should have .snap or .children")}}return l}function jv(i,t,s,l,o){if(!l&&!o){const u=Ei(i.visibleWrites,t);if(u!=null)return u;{const f=Hs(i.visibleWrites,t);if(Oh(f))return s;if(s==null&&!Rh(f,Ce()))return null;{const m=s||ie.EMPTY_NODE;return Ra(f,m)}}}else{const u=Hs(i.visibleWrites,t);if(!o&&Oh(u))return s;if(!o&&s==null&&!Rh(u,Ce()))return null;{const f=function(g){return(g.visible||o)&&(!l||!~l.indexOf(g.writeId))&&(hn(g.path,t)||hn(t,g.path))},m=Av(i.allWrites,f,t),y=s||ie.EMPTY_NODE;return Ra(m,y)}}}function dw(i,t,s){let l=ie.EMPTY_NODE;const o=Ei(i.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Je,(u,f)=>{l=l.updateImmediateChild(u,f)}),l;if(s){const u=Hs(i.visibleWrites,t);return s.forEachChild(Je,(f,m)=>{const y=Ra(Hs(u,new He(f)),m);l=l.updateImmediateChild(f,y)}),z_(u).forEach(f=>{l=l.updateImmediateChild(f.name,f.node)}),l}else{const u=Hs(i.visibleWrites,t);return z_(u).forEach(f=>{l=l.updateImmediateChild(f.name,f.node)}),l}}function hw(i,t,s,l,o){Y(l||o,"Either existingEventSnap or existingServerSnap must exist");const u=$e(t,s);if(Rh(i.visibleWrites,u))return null;{const f=Hs(i.visibleWrites,u);return Oh(f)?o.getChild(s):Ra(f,o.getChild(s))}}function fw(i,t,s,l){const o=$e(t,s),u=Ei(i.visibleWrites,o);if(u!=null)return u;if(l.isCompleteForChild(s)){const f=Hs(i.visibleWrites,o);return Ra(f,l.getNode().getImmediateChild(s))}else return null}function mw(i,t){return Ei(i.visibleWrites,t)}function pw(i,t,s,l,o,u,f){let m;const y=Hs(i.visibleWrites,t),g=Ei(y,Ce());if(g!=null)m=g;else if(s!=null)m=Ra(y,s);else return[];if(m=m.withIndex(f),!m.isEmpty()&&!m.isLeafNode()){const x=[],v=f.getCompare(),b=u?m.getReverseIteratorFrom(l,f):m.getIteratorFrom(l,f);let C=b.getNext();for(;C&&x.length<o;)v(C,l)!==0&&x.push(C),C=b.getNext();return x}else return[]}function gw(){return{visibleWrites:xn.empty(),allWrites:[],lastWriteId:-1}}function uc(i,t,s,l){return jv(i.writeTree,i.treePath,t,s,l)}function pf(i,t){return dw(i.writeTree,i.treePath,t)}function H_(i,t,s,l){return hw(i.writeTree,i.treePath,t,s,l)}function dc(i,t){return mw(i.writeTree,$e(i.treePath,t))}function yw(i,t,s,l,o,u){return pw(i.writeTree,i.treePath,t,s,l,o,u)}function gf(i,t,s){return fw(i.writeTree,i.treePath,t,s)}function Rv(i,t){return Ov($e(i.treePath,t),i.writeTree)}function Ov(i,t){return{treePath:i,writeTree:t}}class _w{constructor(){this.changeMap=new Map}trackChildChange(t){const s=t.type,l=t.childName;Y(s==="child_added"||s==="child_changed"||s==="child_removed","Only child changes supported for tracking"),Y(l!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(l);if(o){const u=o.type;if(s==="child_added"&&u==="child_removed")this.changeMap.set(l,ir(l,t.snapshotNode,o.snapshotNode));else if(s==="child_removed"&&u==="child_added")this.changeMap.delete(l);else if(s==="child_removed"&&u==="child_changed")this.changeMap.set(l,sr(l,o.oldSnap));else if(s==="child_changed"&&u==="child_added")this.changeMap.set(l,Aa(l,t.snapshotNode));else if(s==="child_changed"&&u==="child_changed")this.changeMap.set(l,ir(l,t.snapshotNode,o.oldSnap));else throw Ia("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(l,t)}getChanges(){return Array.from(this.changeMap.values())}}class vw{getCompleteChild(t){return null}getChildAfterChild(t,s,l){return null}}const Iv=new vw;class yf{constructor(t,s,l=null){this.writes_=t,this.viewCache_=s,this.optCompleteServerCache_=l}getCompleteChild(t){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(t))return s.getNode().getImmediateChild(t);{const l=this.optCompleteServerCache_!=null?new qs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gf(this.writes_,t,l)}}getChildAfterChild(t,s,l){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xi(this.viewCache_),u=yw(this.writes_,o,s,1,l,t);return u.length===0?null:u[0]}}function bw(i){return{filter:i}}function xw(i,t){Y(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Y(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function Sw(i,t,s,l,o){const u=new _w;let f,m;if(s.type===bn.OVERWRITE){const g=s;g.source.fromUser?f=Ih(i,t,g.path,g.snap,l,o,u):(Y(g.source.fromServer,"Unknown source."),m=g.source.tagged||t.serverCache.isFiltered()&&!ve(g.path),f=hc(i,t,g.path,g.snap,l,o,m,u))}else if(s.type===bn.MERGE){const g=s;g.source.fromUser?f=Ew(i,t,g.path,g.children,l,o,u):(Y(g.source.fromServer,"Unknown source."),m=g.source.tagged||t.serverCache.isFiltered(),f=Dh(i,t,g.path,g.children,l,o,m,u))}else if(s.type===bn.ACK_USER_WRITE){const g=s;g.revert?f=ww(i,t,g.path,l,o,u):f=Tw(i,t,g.path,g.affectedTree,l,o,u)}else if(s.type===bn.LISTEN_COMPLETE)f=Cw(i,t,s.path,l,u);else throw Ia("Unknown operation type: "+s.type);const y=u.getChanges();return Nw(t,f,y),{viewCache:f,changes:y}}function Nw(i,t,s){const l=t.eventCache;if(l.isFullyInitialized()){const o=l.getNode().isLeafNode()||l.getNode().isEmpty(),u=cc(i);(s.length>0||!i.eventCache.isFullyInitialized()||o&&!l.getNode().equals(u)||!l.getNode().getPriority().equals(u.getPriority()))&&s.push(Ev(cc(t)))}}function Dv(i,t,s,l,o,u){const f=t.eventCache;if(dc(l,s)!=null)return t;{let m,y;if(ve(s))if(Y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=xi(t),x=g instanceof ie?g:ie.EMPTY_NODE,v=pf(l,x);m=i.filter.updateFullNode(t.eventCache.getNode(),v,u)}else{const g=uc(l,xi(t));m=i.filter.updateFullNode(t.eventCache.getNode(),g,u)}else{const g=pe(s);if(g===".priority"){Y(Ps(s)===1,"Can't have a priority with additional path components");const x=f.getNode();y=t.serverCache.getNode();const v=H_(l,s,x,y);v!=null?m=i.filter.updatePriority(x,v):m=f.getNode()}else{const x=Ge(s);let v;if(f.isCompleteForChild(g)){y=t.serverCache.getNode();const b=H_(l,s,f.getNode(),y);b!=null?v=f.getNode().getImmediateChild(g).updateChild(x,b):v=f.getNode().getImmediateChild(g)}else v=gf(l,g,t.serverCache);v!=null?m=i.filter.updateChild(f.getNode(),g,v,x,o,u):m=f.getNode()}}return Xl(t,m,f.isFullyInitialized()||ve(s),i.filter.filtersNodes())}}function hc(i,t,s,l,o,u,f,m){const y=t.serverCache;let g;const x=f?i.filter:i.filter.getIndexedFilter();if(ve(s))g=x.updateFullNode(y.getNode(),l,null);else if(x.filtersNodes()&&!y.isFiltered()){const C=y.getNode().updateChild(s,l);g=x.updateFullNode(y.getNode(),C,null)}else{const C=pe(s);if(!y.isCompleteForPath(s)&&Ps(s)>1)return t;const A=Ge(s),I=y.getNode().getImmediateChild(C).updateChild(A,l);C===".priority"?g=x.updatePriority(y.getNode(),I):g=x.updateChild(y.getNode(),C,I,A,Iv,null)}const v=Cv(t,g,y.isFullyInitialized()||ve(s),x.filtersNodes()),b=new yf(o,v,u);return Dv(i,v,s,o,b,m)}function Ih(i,t,s,l,o,u,f){const m=t.eventCache;let y,g;const x=new yf(o,t,u);if(ve(s))g=i.filter.updateFullNode(t.eventCache.getNode(),l,f),y=Xl(t,g,!0,i.filter.filtersNodes());else{const v=pe(s);if(v===".priority")g=i.filter.updatePriority(t.eventCache.getNode(),l),y=Xl(t,g,m.isFullyInitialized(),m.isFiltered());else{const b=Ge(s),C=m.getNode().getImmediateChild(v);let A;if(ve(b))A=l;else{const L=x.getCompleteChild(v);L!=null?lf(b)===".priority"&&L.getChild(yv(b)).isEmpty()?A=L:A=L.updateChild(b,l):A=ie.EMPTY_NODE}if(C.equals(A))y=t;else{const L=i.filter.updateChild(m.getNode(),v,A,b,x,f);y=Xl(t,L,m.isFullyInitialized(),i.filter.filtersNodes())}}}return y}function B_(i,t){return i.eventCache.isCompleteForChild(t)}function Ew(i,t,s,l,o,u,f){let m=t;return l.foreach((y,g)=>{const x=$e(s,y);B_(t,pe(x))&&(m=Ih(i,m,x,g,o,u,f))}),l.foreach((y,g)=>{const x=$e(s,y);B_(t,pe(x))||(m=Ih(i,m,x,g,o,u,f))}),m}function P_(i,t,s){return s.foreach((l,o)=>{t=t.updateChild(l,o)}),t}function Dh(i,t,s,l,o,u,f,m){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y=t,g;ve(s)?g=l:g=new qe(null).setTree(s,l);const x=t.serverCache.getNode();return g.children.inorderTraversal((v,b)=>{if(x.hasChild(v)){const C=t.serverCache.getNode().getImmediateChild(v),A=P_(i,C,b);y=hc(i,y,new He(v),A,o,u,f,m)}}),g.children.inorderTraversal((v,b)=>{const C=!t.serverCache.isCompleteForChild(v)&&b.value===null;if(!x.hasChild(v)&&!C){const A=t.serverCache.getNode().getImmediateChild(v),L=P_(i,A,b);y=hc(i,y,new He(v),L,o,u,f,m)}}),y}function Tw(i,t,s,l,o,u,f){if(dc(o,s)!=null)return t;const m=t.serverCache.isFiltered(),y=t.serverCache;if(l.value!=null){if(ve(s)&&y.isFullyInitialized()||y.isCompleteForPath(s))return hc(i,t,s,y.getNode().getChild(s),o,u,m,f);if(ve(s)){let g=new qe(null);return y.getNode().forEachChild(Ea,(x,v)=>{g=g.set(new He(x),v)}),Dh(i,t,s,g,o,u,m,f)}else return t}else{let g=new qe(null);return l.foreach((x,v)=>{const b=$e(s,x);y.isCompleteForPath(b)&&(g=g.set(x,y.getNode().getChild(b)))}),Dh(i,t,s,g,o,u,m,f)}}function Cw(i,t,s,l,o){const u=t.serverCache,f=Cv(t,u.getNode(),u.isFullyInitialized()||ve(s),u.isFiltered());return Dv(i,f,s,l,Iv,o)}function ww(i,t,s,l,o,u){let f;if(dc(l,s)!=null)return t;{const m=new yf(l,t,o),y=t.eventCache.getNode();let g;if(ve(s)||pe(s)===".priority"){let x;if(t.serverCache.isFullyInitialized())x=uc(l,xi(t));else{const v=t.serverCache.getNode();Y(v instanceof ie,"serverChildren would be complete if leaf node"),x=pf(l,v)}x=x,g=i.filter.updateFullNode(y,x,u)}else{const x=pe(s);let v=gf(l,x,t.serverCache);v==null&&t.serverCache.isCompleteForChild(x)&&(v=y.getImmediateChild(x)),v!=null?g=i.filter.updateChild(y,x,v,Ge(s),m,u):t.eventCache.getNode().hasChild(x)?g=i.filter.updateChild(y,x,ie.EMPTY_NODE,Ge(s),m,u):g=y,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(f=uc(l,xi(t)),f.isLeafNode()&&(g=i.filter.updateFullNode(g,f,u)))}return f=t.serverCache.isFullyInitialized()||dc(l,Ce())!=null,Xl(t,g,f,i.filter.filtersNodes())}}class Aw{constructor(t,s){this.query_=t,this.eventRegistrations_=[];const l=this.query_._queryParams,o=new uf(l.getIndex()),u=QC(l);this.processor_=bw(u);const f=s.serverCache,m=s.eventCache,y=o.updateFullNode(ie.EMPTY_NODE,f.getNode(),null),g=u.updateFullNode(ie.EMPTY_NODE,m.getNode(),null),x=new qs(y,f.isFullyInitialized(),o.filtersNodes()),v=new qs(g,m.isFullyInitialized(),u.filtersNodes());this.viewCache_=Sc(v,x),this.eventGenerator_=new FC(this.query_)}get query(){return this.query_}}function jw(i){return i.viewCache_.serverCache.getNode()}function Rw(i){return cc(i.viewCache_)}function Ow(i,t){const s=xi(i.viewCache_);return s&&(i.query._queryParams.loadsAllData()||!ve(t)&&!s.getImmediateChild(pe(t)).isEmpty())?s.getChild(t):null}function q_(i){return i.eventRegistrations_.length===0}function Iw(i,t){i.eventRegistrations_.push(t)}function G_(i,t,s){const l=[];if(s){Y(t==null,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(u=>{const f=u.createCancelEvent(s,o);f&&l.push(f)})}if(t){let o=[];for(let u=0;u<i.eventRegistrations_.length;++u){const f=i.eventRegistrations_[u];if(!f.matches(t))o.push(f);else if(t.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(u+1));break}}i.eventRegistrations_=o}else i.eventRegistrations_=[];return l}function V_(i,t,s,l){t.type===bn.MERGE&&t.source.queryId!==null&&(Y(xi(i.viewCache_),"We should always have a full cache before handling merges"),Y(cc(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,u=Sw(i.processor_,o,t,s,l);return xw(i.processor_,u.viewCache),Y(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=u.viewCache,Mv(i,u.changes,u.viewCache.eventCache.getNode(),null)}function Dw(i,t){const s=i.viewCache_.eventCache,l=[];return s.getNode().isLeafNode()||s.getNode().forEachChild(Je,(u,f)=>{l.push(Aa(u,f))}),s.isFullyInitialized()&&l.push(Ev(s.getNode())),Mv(i,l,s.getNode(),t)}function Mv(i,t,s,l){const o=l?[l]:i.eventRegistrations_;return ew(i.eventGenerator_,t,s,o)}let fc;class kv{constructor(){this.views=new Map}}function Mw(i){Y(!fc,"__referenceConstructor has already been defined"),fc=i}function kw(){return Y(fc,"Reference.ts has not been loaded"),fc}function Lw(i){return i.views.size===0}function _f(i,t,s,l){const o=t.source.queryId;if(o!==null){const u=i.views.get(o);return Y(u!=null,"SyncTree gave us an op for an invalid query."),V_(u,t,s,l)}else{let u=[];for(const f of i.views.values())u=u.concat(V_(f,t,s,l));return u}}function Lv(i,t,s,l,o){const u=t._queryIdentifier,f=i.views.get(u);if(!f){let m=uc(s,o?l:null),y=!1;m?y=!0:l instanceof ie?(m=pf(s,l),y=!1):(m=ie.EMPTY_NODE,y=!1);const g=Sc(new qs(m,y,!1),new qs(l,o,!1));return new Aw(t,g)}return f}function Uw(i,t,s,l,o,u){const f=Lv(i,t,l,o,u);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,f),Iw(f,s),Dw(f,s)}function zw(i,t,s,l){const o=t._queryIdentifier,u=[];let f=[];const m=Gs(i);if(o==="default")for(const[y,g]of i.views.entries())f=f.concat(G_(g,s,l)),q_(g)&&(i.views.delete(y),g.query._queryParams.loadsAllData()||u.push(g.query));else{const y=i.views.get(o);y&&(f=f.concat(G_(y,s,l)),q_(y)&&(i.views.delete(o),y.query._queryParams.loadsAllData()||u.push(y.query)))}return m&&!Gs(i)&&u.push(new(kw())(t._repo,t._path)),{removed:u,events:f}}function Uv(i){const t=[];for(const s of i.views.values())s.query._queryParams.loadsAllData()||t.push(s);return t}function Bs(i,t){let s=null;for(const l of i.views.values())s=s||Ow(l,t);return s}function zv(i,t){if(t._queryParams.loadsAllData())return Ec(i);{const l=t._queryIdentifier;return i.views.get(l)}}function Hv(i,t){return zv(i,t)!=null}function Gs(i){return Ec(i)!=null}function Ec(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let mc;function Hw(i){Y(!mc,"__referenceConstructor has already been defined"),mc=i}function Bw(){return Y(mc,"Reference.ts has not been loaded"),mc}let Pw=1;class Y_{constructor(t){this.listenProvider_=t,this.syncPointTree_=new qe(null),this.pendingWriteTree_=gw(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bv(i,t,s,l,o){return iw(i.pendingWriteTree_,t,s,l,o),o?za(i,new bi(hf(),t,s)):[]}function qw(i,t,s,l){aw(i.pendingWriteTree_,t,s,l);const o=qe.fromObject(s);return za(i,new ja(hf(),t,o))}function ks(i,t,s=!1){const l=lw(i.pendingWriteTree_,t);if(rw(i.pendingWriteTree_,t)){let u=new qe(null);return l.snap!=null?u=u.set(Ce(),!0):Ct(l.children,f=>{u=u.set(new He(f),!0)}),za(i,new oc(l.path,u,s))}else return[]}function _r(i,t,s){return za(i,new bi(ff(),t,s))}function Gw(i,t,s){const l=qe.fromObject(s);return za(i,new ja(ff(),t,l))}function Vw(i,t){return za(i,new lr(ff(),t))}function Yw(i,t,s){const l=bf(i,s);if(l){const o=xf(l),u=o.path,f=o.queryId,m=Dt(u,t),y=new lr(mf(f),m);return Sf(i,u,y)}else return[]}function pc(i,t,s,l,o=!1){const u=t._path,f=i.syncPointTree_.get(u);let m=[];if(f&&(t._queryIdentifier==="default"||Hv(f,t))){const y=zw(f,t,s,l);Lw(f)&&(i.syncPointTree_=i.syncPointTree_.remove(u));const g=y.removed;if(m=y.events,!o){const x=g.findIndex(b=>b._queryParams.loadsAllData())!==-1,v=i.syncPointTree_.findOnPath(u,(b,C)=>Gs(C));if(x&&!v){const b=i.syncPointTree_.subtree(u);if(!b.isEmpty()){const C=Xw(b);for(let A=0;A<C.length;++A){const L=C[A],I=L.query,U=Vv(i,L);i.listenProvider_.startListening(Zl(I),rr(i,I),U.hashFn,U.onComplete)}}}!v&&g.length>0&&!l&&(x?i.listenProvider_.stopListening(Zl(t),null):g.forEach(b=>{const C=i.queryToTagMap.get(Tc(b));i.listenProvider_.stopListening(Zl(b),C)}))}Ww(i,g)}return m}function Pv(i,t,s,l){const o=bf(i,l);if(o!=null){const u=xf(o),f=u.path,m=u.queryId,y=Dt(f,t),g=new bi(mf(m),y,s);return Sf(i,f,g)}else return[]}function Qw(i,t,s,l){const o=bf(i,l);if(o){const u=xf(o),f=u.path,m=u.queryId,y=Dt(f,t),g=qe.fromObject(s),x=new ja(mf(m),y,g);return Sf(i,f,x)}else return[]}function Mh(i,t,s,l=!1){const o=t._path;let u=null,f=!1;i.syncPointTree_.foreachOnPath(o,(b,C)=>{const A=Dt(b,o);u=u||Bs(C,A),f=f||Gs(C)});let m=i.syncPointTree_.get(o);m?(f=f||Gs(m),u=u||Bs(m,Ce())):(m=new kv,i.syncPointTree_=i.syncPointTree_.set(o,m));let y;u!=null?y=!0:(y=!1,u=ie.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((C,A)=>{const L=Bs(A,Ce());L&&(u=u.updateImmediateChild(C,L))}));const g=Hv(m,t);if(!g&&!t._queryParams.loadsAllData()){const b=Tc(t);Y(!i.queryToTagMap.has(b),"View does not exist, but we have a tag");const C=Zw();i.queryToTagMap.set(b,C),i.tagToQueryMap.set(C,b)}const x=Nc(i.pendingWriteTree_,o);let v=Uw(m,t,s,x,u,y);if(!g&&!f&&!l){const b=zv(m,t);v=v.concat($w(i,t,b))}return v}function vf(i,t,s){const o=i.pendingWriteTree_,u=i.syncPointTree_.findOnPath(t,(f,m)=>{const y=Dt(f,t),g=Bs(m,y);if(g)return g});return jv(o,t,u,s,!0)}function Kw(i,t){const s=t._path;let l=null;i.syncPointTree_.foreachOnPath(s,(g,x)=>{const v=Dt(g,s);l=l||Bs(x,v)});let o=i.syncPointTree_.get(s);o?l=l||Bs(o,Ce()):(o=new kv,i.syncPointTree_=i.syncPointTree_.set(s,o));const u=l!=null,f=u?new qs(l,!0,!1):null,m=Nc(i.pendingWriteTree_,t._path),y=Lv(o,t,m,u?f.getNode():ie.EMPTY_NODE,u);return Rw(y)}function za(i,t){return qv(t,i.syncPointTree_,null,Nc(i.pendingWriteTree_,Ce()))}function qv(i,t,s,l){if(ve(i.path))return Gv(i,t,s,l);{const o=t.get(Ce());s==null&&o!=null&&(s=Bs(o,Ce()));let u=[];const f=pe(i.path),m=i.operationForChild(f),y=t.children.get(f);if(y&&m){const g=s?s.getImmediateChild(f):null,x=Rv(l,f);u=u.concat(qv(m,y,g,x))}return o&&(u=u.concat(_f(o,i,l,s))),u}}function Gv(i,t,s,l){const o=t.get(Ce());s==null&&o!=null&&(s=Bs(o,Ce()));let u=[];return t.children.inorderTraversal((f,m)=>{const y=s?s.getImmediateChild(f):null,g=Rv(l,f),x=i.operationForChild(f);x&&(u=u.concat(Gv(x,m,y,g)))}),o&&(u=u.concat(_f(o,i,l,s))),u}function Vv(i,t){const s=t.query,l=rr(i,s);return{hashFn:()=>(jw(t)||ie.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return l?Yw(i,s._path,l):Vw(i,s._path);{const u=VT(o,s);return pc(i,s,null,u)}}}}function rr(i,t){const s=Tc(t);return i.queryToTagMap.get(s)}function Tc(i){return i._path.toString()+"$"+i._queryIdentifier}function bf(i,t){return i.tagToQueryMap.get(t)}function xf(i){const t=i.indexOf("$");return Y(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new He(i.substr(0,t))}}function Sf(i,t,s){const l=i.syncPointTree_.get(t);Y(l,"Missing sync point for query tag that we're tracking");const o=Nc(i.pendingWriteTree_,t);return _f(l,s,o,null)}function Xw(i){return i.fold((t,s,l)=>{if(s&&Gs(s))return[Ec(s)];{let o=[];return s&&(o=Uv(s)),Ct(l,(u,f)=>{o=o.concat(f)}),o}})}function Zl(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(Bw())(i._repo,i._path):i}function Ww(i,t){for(let s=0;s<t.length;++s){const l=t[s];if(!l._queryParams.loadsAllData()){const o=Tc(l),u=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(u)}}}function Zw(){return Pw++}function $w(i,t,s){const l=t._path,o=rr(i,t),u=Vv(i,s),f=i.listenProvider_.startListening(Zl(t),o,u.hashFn,u.onComplete),m=i.syncPointTree_.subtree(l);if(o)Y(!Gs(m.value),"If we're adding a query, it shouldn't be shadowed");else{const y=m.fold((g,x,v)=>{if(!ve(g)&&x&&Gs(x))return[Ec(x).query];{let b=[];return x&&(b=b.concat(Uv(x).map(C=>C.query))),Ct(v,(C,A)=>{b=b.concat(A)}),b}});for(let g=0;g<y.length;++g){const x=y[g];i.listenProvider_.stopListening(Zl(x),rr(i,x))}}return f}class Nf{constructor(t){this.node_=t}getImmediateChild(t){const s=this.node_.getImmediateChild(t);return new Nf(s)}node(){return this.node_}}class Ef{constructor(t,s){this.syncTree_=t,this.path_=s}getImmediateChild(t){const s=$e(this.path_,t);return new Ef(this.syncTree_,s)}node(){return vf(this.syncTree_,this.path_)}}const Jw=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},Q_=function(i,t,s){if(!i||typeof i!="object")return i;if(Y(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return Fw(i[".sv"],t,s);if(typeof i[".sv"]=="object")return e2(i[".sv"],t);Y(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},Fw=function(i,t,s){if(i==="timestamp")return s.timestamp;Y(!1,"Unexpected server value: "+i)},e2=function(i,t,s){i.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const l=i.increment;typeof l!="number"&&Y(!1,"Unexpected increment value: "+l);const o=t.node();if(Y(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return l;const f=o.getValue();return typeof f!="number"?l:f+l},Yv=function(i,t,s,l){return Tf(t,new Ef(s,i),l)},Qv=function(i,t,s){return Tf(i,new Nf(t),s)};function Tf(i,t,s){const l=i.getPriority().val(),o=Q_(l,t.getImmediateChild(".priority"),s);let u;if(i.isLeafNode()){const f=i,m=Q_(f.getValue(),t,s);return m!==f.getValue()||o!==f.getPriority().val()?new _t(m,ht(o)):i}else{const f=i;return u=f,o!==f.getPriority().val()&&(u=u.updatePriority(new _t(o))),f.forEachChild(Je,(m,y)=>{const g=Tf(y,t.getImmediateChild(m),s);g!==y&&(u=u.updateImmediateChild(m,g))}),u}}class Cf{constructor(t="",s=null,l={children:{},childCount:0}){this.name=t,this.parent=s,this.node=l}}function wf(i,t){let s=t instanceof He?t:new He(t),l=i,o=pe(s);for(;o!==null;){const u=Ta(l.node.children,o)||{children:{},childCount:0};l=new Cf(o,l,u),s=Ge(s),o=pe(s)}return l}function Ha(i){return i.node.value}function Kv(i,t){i.node.value=t,kh(i)}function Xv(i){return i.node.childCount>0}function t2(i){return Ha(i)===void 0&&!Xv(i)}function Cc(i,t){Ct(i.node.children,(s,l)=>{t(new Cf(s,i,l))})}function Wv(i,t,s,l){s&&t(i),Cc(i,o=>{Wv(o,t,!0)})}function n2(i,t,s){let l=i.parent;for(;l!==null;){if(t(l))return!0;l=l.parent}return!1}function vr(i){return new He(i.parent===null?i.name:vr(i.parent)+"/"+i.name)}function kh(i){i.parent!==null&&s2(i.parent,i.name,i)}function s2(i,t,s){const l=t2(s),o=On(i.node.children,t);l&&o?(delete i.node.children[t],i.node.childCount--,kh(i)):!l&&!o&&(i.node.children[t]=s.node,i.node.childCount++,kh(i))}const i2=/[\[\].#$\/\u0000-\u001F\u007F]/,a2=/[\[\].#$\u0000-\u001F\u007F]/,hh=10*1024*1024,Af=function(i){return typeof i=="string"&&i.length!==0&&!i2.test(i)},Zv=function(i){return typeof i=="string"&&i.length!==0&&!a2.test(i)},l2=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Zv(i)},r2=function(i){return i===null||typeof i=="string"||typeof i=="number"&&!ef(i)||i&&typeof i=="object"&&On(i,".sv")},o2=function(i,t,s,l){wc(gc(i,"value"),t,s)},wc=function(i,t,s){const l=s instanceof He?new EC(s,i):s;if(t===void 0)throw new Error(i+"contains undefined "+fi(l));if(typeof t=="function")throw new Error(i+"contains a function "+fi(l)+" with contents = "+t.toString());if(ef(t))throw new Error(i+"contains "+t.toString()+" "+fi(l));if(typeof t=="string"&&t.length>hh/3&&yc(t)>hh)throw new Error(i+"contains a string greater than "+hh+" utf8 bytes "+fi(l)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,u=!1;if(Ct(t,(f,m)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(u=!0,!Af(f)))throw new Error(i+" contains an invalid key ("+f+") "+fi(l)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);TC(l,f),wc(i,m,l),CC(l)}),o&&u)throw new Error(i+' contains ".value" child '+fi(l)+" in addition to actual children.")}},c2=function(i,t){let s,l;for(s=0;s<t.length;s++){l=t[s];const u=nr(l);for(let f=0;f<u.length;f++)if(!(u[f]===".priority"&&f===u.length-1)){if(!Af(u[f]))throw new Error(i+"contains an invalid key ("+u[f]+") in path "+l.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(NC);let o=null;for(s=0;s<t.length;s++){if(l=t[s],o!==null&&hn(o,l))throw new Error(i+"contains a path "+o.toString()+" that is ancestor of another path "+l.toString());o=l}},u2=function(i,t,s,l){const o=gc(i,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const u=[];Ct(t,(f,m)=>{const y=new He(f);if(wc(o,m,$e(s,y)),lf(y)===".priority"&&!r2(m))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),c2(o,u)},$v=function(i,t,s,l){if(!Zv(s))throw new Error(gc(i,t)+'was an invalid path = "'+s+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},d2=function(i,t,s,l){s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),$v(i,t,s)},Jv=function(i,t){if(pe(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},h2=function(i,t){const s=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Af(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||s.length!==0&&!l2(s))throw new Error(gc(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class f2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ac(i,t){let s=null;for(let l=0;l<t.length;l++){const o=t[l],u=o.getPath();s!==null&&!rf(u,s.path)&&(i.eventLists_.push(s),s=null),s===null&&(s={events:[],path:u}),s.events.push(o)}s&&i.eventLists_.push(s)}function Fv(i,t,s){Ac(i,s),eb(i,l=>rf(l,t))}function fn(i,t,s){Ac(i,s),eb(i,l=>hn(l,t)||hn(t,l))}function eb(i,t){i.recursionDepth_++;let s=!0;for(let l=0;l<i.eventLists_.length;l++){const o=i.eventLists_[l];if(o){const u=o.path;t(u)?(m2(i.eventLists_[l]),i.eventLists_[l]=null):s=!1}}s&&(i.eventLists_=[]),i.recursionDepth_--}function m2(i){for(let t=0;t<i.events.length;t++){const s=i.events[t];if(s!==null){i.events[t]=null;const l=s.getEventRunner();Ql&&Tt("event: "+s.toString()),Ua(l)}}}const p2="repo_interrupt",g2=25;class y2{constructor(t,s,l,o){this.repoInfo_=t,this.forceRestClient_=s,this.authTokenProvider_=l,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new f2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rc(),this.transactionQueueTree_=new Cf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _2(i,t,s){if(i.stats_=sf(i.repoInfo_),i.forceRestClient_||XT())i.server_=new lc(i.repoInfo_,(l,o,u,f)=>{K_(i,l,o,u,f)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>X_(i,!0),0);else{if(typeof s<"u"&&s!==null){if(typeof s!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ft(s)}catch(l){throw new Error("Invalid authOverride provided: "+l)}}i.persistentConnection_=new ts(i.repoInfo_,t,(l,o,u,f)=>{K_(i,l,o,u,f)},l=>{X_(i,l)},l=>{b2(i,l)},i.authTokenProvider_,i.appCheckProvider_,s),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(l=>{i.server_.refreshAuthToken(l)}),i.appCheckProvider_.addTokenChangeListener(l=>{i.server_.refreshAppCheckToken(l.token)}),i.statsReporter_=FT(i.repoInfo_,()=>new JC(i.stats_,i.server_)),i.infoData_=new KC,i.infoSyncTree_=new Y_({startListening:(l,o,u,f)=>{let m=[];const y=i.infoData_.getNode(l._path);return y.isEmpty()||(m=_r(i.infoSyncTree_,l._path,y),setTimeout(()=>{f("ok")},0)),m},stopListening:()=>{}}),jf(i,"connected",!1),i.serverSyncTree_=new Y_({startListening:(l,o,u,f)=>(i.server_.listen(l,u,o,(m,y)=>{const g=f(m,y);fn(i.eventQueue_,l._path,g)}),[]),stopListening:(l,o)=>{i.server_.unlisten(l,o)}})}function v2(i){const s=i.infoData_.getNode(new He(".info/serverTimeOffset")).val()||0;return new Date().getTime()+s}function jc(i){return Jw({timestamp:v2(i)})}function K_(i,t,s,l,o){i.dataUpdateCount++;const u=new He(t);s=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,s):s;let f=[];if(o)if(l){const y=Wo(s,g=>ht(g));f=Qw(i.serverSyncTree_,u,y,o)}else{const y=ht(s);f=Pv(i.serverSyncTree_,u,y,o)}else if(l){const y=Wo(s,g=>ht(g));f=Gw(i.serverSyncTree_,u,y)}else{const y=ht(s);f=_r(i.serverSyncTree_,u,y)}let m=u;f.length>0&&(m=Oa(i,u)),fn(i.eventQueue_,m,f)}function X_(i,t){jf(i,"connected",t),t===!1&&E2(i)}function b2(i,t){Ct(t,(s,l)=>{jf(i,s,l)})}function jf(i,t,s){const l=new He("/.info/"+t),o=ht(s);i.infoData_.updateSnapshot(l,o);const u=_r(i.infoSyncTree_,l,o);fn(i.eventQueue_,l,u)}function Rf(i){return i.nextWriteId_++}function x2(i,t,s){const l=Kw(i.serverSyncTree_,t);return l!=null?Promise.resolve(l):i.server_.get(t).then(o=>{const u=ht(o).withIndex(t._queryParams.getIndex());Mh(i.serverSyncTree_,t,s,!0);let f;if(t._queryParams.loadsAllData())f=_r(i.serverSyncTree_,t._path,u);else{const m=rr(i.serverSyncTree_,t);f=Pv(i.serverSyncTree_,t._path,u,m)}return fn(i.eventQueue_,t._path,f),pc(i.serverSyncTree_,t,s,null,!0),u},o=>(br(i,"get for query "+ft(t)+" failed: "+o),Promise.reject(new Error(o))))}function S2(i,t,s,l,o){br(i,"set",{path:t.toString(),value:s,priority:l});const u=jc(i),f=ht(s,l),m=vf(i.serverSyncTree_,t),y=Qv(f,m,u),g=Rf(i),x=Bv(i.serverSyncTree_,t,y,g,!0);Ac(i.eventQueue_,x),i.server_.put(t.toString(),f.val(!0),(b,C)=>{const A=b==="ok";A||Mt("set at "+t+" failed: "+b);const L=ks(i.serverSyncTree_,g,!A);fn(i.eventQueue_,t,L),Lh(i,o,b,C)});const v=If(i,t);Oa(i,v),fn(i.eventQueue_,v,[])}function N2(i,t,s,l){br(i,"update",{path:t.toString(),value:s});let o=!0;const u=jc(i),f={};if(Ct(s,(m,y)=>{o=!1,f[m]=Yv($e(t,m),ht(y),i.serverSyncTree_,u)}),o)Tt("update() called with empty data.  Don't do anything."),Lh(i,l,"ok",void 0);else{const m=Rf(i),y=qw(i.serverSyncTree_,t,f,m);Ac(i.eventQueue_,y),i.server_.merge(t.toString(),s,(g,x)=>{const v=g==="ok";v||Mt("update at "+t+" failed: "+g);const b=ks(i.serverSyncTree_,m,!v),C=b.length>0?Oa(i,t):t;fn(i.eventQueue_,C,b),Lh(i,l,g,x)}),Ct(s,g=>{const x=If(i,$e(t,g));Oa(i,x)}),fn(i.eventQueue_,t,[])}}function E2(i){br(i,"onDisconnectEvents");const t=jc(i),s=rc();Ah(i.onDisconnect_,Ce(),(o,u)=>{const f=Yv(o,u,i.serverSyncTree_,t);Tv(s,o,f)});let l=[];Ah(s,Ce(),(o,u)=>{l=l.concat(_r(i.serverSyncTree_,o,u));const f=If(i,o);Oa(i,f)}),i.onDisconnect_=rc(),fn(i.eventQueue_,Ce(),l)}function T2(i,t,s){let l;pe(t._path)===".info"?l=Mh(i.infoSyncTree_,t,s):l=Mh(i.serverSyncTree_,t,s),Fv(i.eventQueue_,t._path,l)}function tb(i,t,s){let l;pe(t._path)===".info"?l=pc(i.infoSyncTree_,t,s):l=pc(i.serverSyncTree_,t,s),Fv(i.eventQueue_,t._path,l)}function C2(i){i.persistentConnection_&&i.persistentConnection_.interrupt(p2)}function br(i,...t){let s="";i.persistentConnection_&&(s=i.persistentConnection_.id+":"),Tt(s,...t)}function Lh(i,t,s,l){t&&Ua(()=>{if(s==="ok")t(null);else{const o=(s||"error").toUpperCase();let u=o;l&&(u+=": "+l);const f=new Error(u);f.code=o,t(f)}})}function nb(i,t,s){return vf(i.serverSyncTree_,t,s)||ie.EMPTY_NODE}function Of(i,t=i.transactionQueueTree_){if(t||Rc(i,t),Ha(t)){const s=ib(i,t);Y(s.length>0,"Sending zero length transaction queue"),s.every(o=>o.status===0)&&w2(i,vr(t),s)}else Xv(t)&&Cc(t,s=>{Of(i,s)})}function w2(i,t,s){const l=s.map(g=>g.currentWriteId),o=nb(i,t,l);let u=o;const f=o.hash();for(let g=0;g<s.length;g++){const x=s[g];Y(x.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const v=Dt(t,x.path);u=u.updateChild(v,x.currentOutputSnapshotRaw)}const m=u.val(!0),y=t;i.server_.put(y.toString(),m,g=>{br(i,"transaction put response",{path:y.toString(),status:g});let x=[];if(g==="ok"){const v=[];for(let b=0;b<s.length;b++)s[b].status=2,x=x.concat(ks(i.serverSyncTree_,s[b].currentWriteId)),s[b].onComplete&&v.push(()=>s[b].onComplete(null,!0,s[b].currentOutputSnapshotResolved)),s[b].unwatcher();Rc(i,wf(i.transactionQueueTree_,t)),Of(i,i.transactionQueueTree_),fn(i.eventQueue_,t,x);for(let b=0;b<v.length;b++)Ua(v[b])}else{if(g==="datastale")for(let v=0;v<s.length;v++)s[v].status===3?s[v].status=4:s[v].status=0;else{Mt("transaction at "+y.toString()+" failed: "+g);for(let v=0;v<s.length;v++)s[v].status=4,s[v].abortReason=g}Oa(i,t)}},f)}function Oa(i,t){const s=sb(i,t),l=vr(s),o=ib(i,s);return A2(i,o,l),l}function A2(i,t,s){if(t.length===0)return;const l=[];let o=[];const f=t.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<t.length;m++){const y=t[m],g=Dt(s,y.path);let x=!1,v;if(Y(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===4)x=!0,v=y.abortReason,o=o.concat(ks(i.serverSyncTree_,y.currentWriteId,!0));else if(y.status===0)if(y.retryCount>=g2)x=!0,v="maxretry",o=o.concat(ks(i.serverSyncTree_,y.currentWriteId,!0));else{const b=nb(i,y.path,f);y.currentInputSnapshot=b;const C=t[m].update(b.val());if(C!==void 0){wc("transaction failed: Data returned ",C,y.path);let A=ht(C);typeof C=="object"&&C!=null&&On(C,".priority")||(A=A.updatePriority(b.getPriority()));const I=y.currentWriteId,U=jc(i),q=Qv(A,b,U);y.currentOutputSnapshotRaw=A,y.currentOutputSnapshotResolved=q,y.currentWriteId=Rf(i),f.splice(f.indexOf(I),1),o=o.concat(Bv(i.serverSyncTree_,y.path,q,y.currentWriteId,y.applyLocally)),o=o.concat(ks(i.serverSyncTree_,I,!0))}else x=!0,v="nodata",o=o.concat(ks(i.serverSyncTree_,y.currentWriteId,!0))}fn(i.eventQueue_,s,o),o=[],x&&(t[m].status=2,(function(b){setTimeout(b,Math.floor(0))})(t[m].unwatcher),t[m].onComplete&&(v==="nodata"?l.push(()=>t[m].onComplete(null,!1,t[m].currentInputSnapshot)):l.push(()=>t[m].onComplete(new Error(v),!1,null))))}Rc(i,i.transactionQueueTree_);for(let m=0;m<l.length;m++)Ua(l[m]);Of(i,i.transactionQueueTree_)}function sb(i,t){let s,l=i.transactionQueueTree_;for(s=pe(t);s!==null&&Ha(l)===void 0;)l=wf(l,s),t=Ge(t),s=pe(t);return l}function ib(i,t){const s=[];return ab(i,t,s),s.sort((l,o)=>l.order-o.order),s}function ab(i,t,s){const l=Ha(t);if(l)for(let o=0;o<l.length;o++)s.push(l[o]);Cc(t,o=>{ab(i,o,s)})}function Rc(i,t){const s=Ha(t);if(s){let l=0;for(let o=0;o<s.length;o++)s[o].status!==2&&(s[l]=s[o],l++);s.length=l,Kv(t,s.length>0?s:void 0)}Cc(t,l=>{Rc(i,l)})}function If(i,t){const s=vr(sb(i,t)),l=wf(i.transactionQueueTree_,t);return n2(l,o=>{fh(i,o)}),fh(i,l),Wv(l,o=>{fh(i,o)}),s}function fh(i,t){const s=Ha(t);if(s){const l=[];let o=[],u=-1;for(let f=0;f<s.length;f++)s[f].status===3||(s[f].status===1?(Y(u===f-1,"All SENT items should be at beginning of queue."),u=f,s[f].status=3,s[f].abortReason="set"):(Y(s[f].status===0,"Unexpected transaction status in abort"),s[f].unwatcher(),o=o.concat(ks(i.serverSyncTree_,s[f].currentWriteId,!0)),s[f].onComplete&&l.push(s[f].onComplete.bind(null,new Error("set"),!1,null))));u===-1?Kv(t,void 0):s.length=u+1,fn(i.eventQueue_,vr(t),o);for(let f=0;f<l.length;f++)Ua(l[f])}}function j2(i){let t="";const s=i.split("/");for(let l=0;l<s.length;l++)if(s[l].length>0){let o=s[l];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function R2(i){const t={};i.charAt(0)==="?"&&(i=i.substring(1));for(const s of i.split("&")){if(s.length===0)continue;const l=s.split("=");l.length===2?t[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):Mt(`Invalid query segment '${s}' in query '${i}'`)}return t}const W_=function(i,t){const s=O2(i),l=s.namespace;s.domain==="firebase.com"&&is(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!l||l==="undefined")&&s.domain!=="localhost"&&is("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||HT();const o=s.scheme==="ws"||s.scheme==="wss";return{repoInfo:new ov(s.host,s.secure,l,o,t,"",l!==s.subdomain),path:new He(s.pathString)}},O2=function(i){let t="",s="",l="",o="",u="",f=!0,m="https",y=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(m=i.substring(0,g-1),i=i.substring(g+2));let x=i.indexOf("/");x===-1&&(x=i.length);let v=i.indexOf("?");v===-1&&(v=i.length),t=i.substring(0,Math.min(x,v)),x<v&&(o=j2(i.substring(x,v)));const b=R2(i.substring(Math.min(i.length,v)));g=t.indexOf(":"),g>=0?(f=m==="https"||m==="wss",y=parseInt(t.substring(g+1),10)):g=t.length;const C=t.slice(0,g);if(C.toLowerCase()==="localhost")s="localhost";else if(C.split(".").length<=2)s=C;else{const A=t.indexOf(".");l=t.substring(0,A).toLowerCase(),s=t.substring(A+1),u=l}"ns"in b&&(u=b.ns)}return{host:t,port:y,domain:s,subdomain:l,secure:f,scheme:m,pathString:o,namespace:u}};class I2{constructor(t,s,l,o){this.eventType=t,this.eventRegistration=s,this.snapshot=l,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ft(this.snapshot.exportVal())}}class D2{constructor(t,s,l){this.eventRegistration=t,this.error=s,this.path=l}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class lb{constructor(t,s){this.snapshotCallback=t,this.cancelCallback=s}onValue(t,s){this.snapshotCallback.call(null,t,s)}onCancel(t){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Df{constructor(t,s,l,o){this._repo=t,this._path=s,this._queryParams=l,this._orderByCalled=o}get key(){return ve(this._path)?null:lf(this._path)}get ref(){return new as(this._repo,this._path)}get _queryIdentifier(){const t=k_(this._queryParams),s=tf(t);return s==="{}"?"default":s}get _queryObject(){return k_(this._queryParams)}isEqual(t){if(t=Lt(t),!(t instanceof Df))return!1;const s=this._repo===t._repo,l=rf(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return s&&l&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+SC(this._path)}}class as extends Df{constructor(t,s){super(t,s,new df,!1)}get parent(){const t=yv(this._path);return t===null?null:new as(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class or{constructor(t,s,l){this._node=t,this.ref=s,this._index=l}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const s=new He(t),l=Uh(this.ref,t);return new or(this._node.getChild(s),l,Je)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(l,o)=>t(new or(o,Uh(this.ref,l),Je)))}hasChild(t){const s=new He(t);return!this._node.getChild(s).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ae(i,t){return i=Lt(i),i._checkNotDeleted("ref"),t!==void 0?Uh(i._root,t):i._root}function Uh(i,t){return i=Lt(i),pe(i._path)===null?d2("child","path",t):$v("child","path",t),new as(i._repo,$e(i._path,t))}function va(i){return Jv("remove",i._path),ot(i,null)}function ot(i,t){i=Lt(i),Jv("set",i._path),o2("set",t,i._path);const s=new cr;return S2(i._repo,i._path,t,null,s.wrapCallback(()=>{})),s.promise}function M2(i,t){u2("update",t,i._path);const s=new cr;return N2(i._repo,i._path,t,s.wrapCallback(()=>{})),s.promise}function tt(i){i=Lt(i);const t=new lb(()=>{}),s=new Oc(t);return x2(i._repo,i,s).then(l=>new or(l,new as(i._repo,i._path),i._queryParams.getIndex()))}class Oc{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,s){const l=s._queryParams.getIndex();return new I2("value",this,new or(t.snapshotNode,new as(s._repo,s._path),l))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,s){return this.callbackContext.hasCancelCallback?new D2(this,t,s):null}matches(t){return t instanceof Oc?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function k2(i,t,s,l,o){const u=new lb(s,void 0),f=new Oc(u);return T2(i._repo,i,f),()=>tb(i._repo,i,f)}function L2(i,t,s,l){return k2(i,"value",t)}function Z_(i,t,s){tb(i._repo,i,null)}Mw(as);Hw(as);const U2="FIREBASE_DATABASE_EMULATOR_HOST",zh={};let z2=!1;function H2(i,t,s,l){const o=t.lastIndexOf(":"),u=t.substring(0,o),f=Da(u);i.repoInfo_=new ov(t,f,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,s),l&&(i.authTokenProvider_=l)}function B2(i,t,s,l,o){let u=l||i.options.databaseURL;u===void 0&&(i.options.projectId||is("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tt("Using default host for project ",i.options.projectId),u=`${i.options.projectId}-default-rtdb.firebaseio.com`);let f=W_(u,o),m=f.repoInfo,y;typeof process<"u"&&y_&&(y=y_[U2]),y?(u=`http://${y}?ns=${m.namespace}`,f=W_(u,o),m=f.repoInfo):f.repoInfo.secure;const g=new ZT(i.name,i.options,t);h2("Invalid Firebase Database URL",f),ve(f.path)||is("Database URL must point to the root of a Firebase Database (not including a child path).");const x=q2(m,i,g,new WT(i,s));return new G2(x,i)}function P2(i,t){const s=zh[t];(!s||s[i.key]!==i)&&is(`Database ${t}(${i.repoInfo_}) has already been deleted.`),C2(i),delete s[i.key]}function q2(i,t,s,l){let o=zh[t.name];o||(o={},zh[t.name]=o);let u=o[i.toURLString()];return u&&is("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new y2(i,z2,s,l),o[i.toURLString()]=u,u}class G2{constructor(t,s){this._repoInternal=t,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new as(this._repo,Ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(P2(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&is("Cannot call "+t+" on a deleted database.")}}function V2(i=d0(),t){const s=Yh(i,"database").getImmediate({identifier:t});if(!s._instanceStarted){const l=V1("database");l&&Y2(s,...l)}return s}function Y2(i,t,s,l={}){i=Lt(i),i._checkNotDeleted("useEmulator");const o=`${t}:${s}`,u=i._repoInternal;if(i._instanceStarted){if(o===i._repoInternal.repoInfo_.host&&pi(l,u.repoInfo_.emulatorOptions))return;is("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(u.repoInfo_.nodeAdmin)l.mockUserToken&&is('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new Qo(Qo.OWNER);else if(l.mockUserToken){const m=typeof l.mockUserToken=="string"?l.mockUserToken:Y1(l.mockUserToken,i.app.options.projectId);f=new Qo(m)}Da(t)&&(i0(t),a0("Database",!0)),H2(u,o,l,f)}function Q2(i){DT(ka),Ca(new gi("database",(t,{instanceIdentifier:s})=>{const l=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return B2(l,o,u,s)},"PUBLIC").setMultipleInstances(!0)),zs(__,v_,i),zs(__,v_,"esm2020")}ts.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};ts.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};Q2();var K2="firebase",X2="12.9.0";zs(K2,X2,"app");const W2={apiKey:"AIzaSyB8u4N8yPT9VJejYCgfT_v_FSGohCghr1M",authDomain:"livelinks-cf018.firebaseapp.com",databaseURL:"https://livelinks-cf018-default-rtdb.firebaseio.com",projectId:"livelinks-cf018",storageBucket:"livelinks-cf018.firebasestorage.app",messagingSenderId:"658641708649",appId:"1:658641708649:web:620bd1327d75c3678424f8"},rb=u0(W2),le=V2(rb),Ic=OT(rb),Z2=()=>{let i=localStorage.getItem("deviceId");return i||(i="device-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),localStorage.setItem("deviceId",i)),i};function $2({loginEmail:i,setLoginEmail:t,loginPassword:s,setLoginPassword:l,authError:o,setAuthError:u,authLoading2:f,setAuthLoading2:m,setView:y}){const g=async x=>{x.preventDefault(),u(""),m(!0);try{await gE(Ic,i,s)}catch(v){console.error("Login error:",v),v.code==="auth/user-not-found"?u("No account found with this email"):v.code==="auth/wrong-password"?u("Incorrect password"):v.code==="auth/invalid-email"?u("Invalid email address"):u("Login failed. Please try again.")}m(!1)};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6 flex items-center justify-center",children:d.jsxs("div",{className:"max-w-md w-full",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-5xl font-bold text-white mb-2",style:{fontFamily:"Georgia, serif"},children:"LiveLinks"}),d.jsx("p",{className:"text-blue-200",children:"Golf League Management"})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Login"}),o&&d.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-800 p-3 rounded-lg mb-4 text-sm",children:o}),d.jsxs("form",{onSubmit:g,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),d.jsx("input",{type:"email",value:i,onChange:x=>t(x.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"your@email.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),d.jsx("input",{type:"password",value:s,onChange:x=>l(x.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:""})]}),d.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Logging in...":"Login"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx("button",{onClick:()=>{u(""),y("signup")},className:"text-blue-600 hover:text-blue-700 font-semibold text-sm",children:"Don't have an account? Sign up"})})]})]})})}function J2({signupEmail:i,setSignupEmail:t,signupPassword:s,setSignupPassword:l,signupDisplayName:o,setSignupDisplayName:u,signupHandicap:f,setSignupHandicap:m,authError:y,setAuthError:g,authLoading2:x,setAuthLoading2:v,setView:b}){const C=async A=>{A.preventDefault(),g(""),v(!0);try{const I=(await pE(Ic,i,s)).user;await ot(ae(le,`users/${I.uid}`),{email:i,displayName:o,handicap:f?parseFloat(f):null,createdAt:Date.now()})}catch(L){console.error("Signup error:",L),L.code==="auth/email-already-in-use"?g("This email is already registered"):L.code==="auth/invalid-email"?g("Invalid email address"):L.code==="auth/weak-password"?g("Password must be at least 6 characters"):g("Signup failed. Please try again.")}v(!1)};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6 flex items-center justify-center",children:d.jsxs("div",{className:"max-w-md w-full",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-5xl font-bold text-white mb-2",style:{fontFamily:"Georgia, serif"},children:"LiveLinks"}),d.jsx("p",{className:"text-blue-200",children:"Golf League Management"})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Sign Up"}),y&&d.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-800 p-3 rounded-lg mb-4 text-sm",children:y}),d.jsxs("form",{onSubmit:C,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Display Name"}),d.jsx("input",{type:"text",value:o,onChange:A=>u(A.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"How you'll appear in the league"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),d.jsx("input",{type:"email",value:i,onChange:A=>t(A.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"your@email.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),d.jsx("input",{type:"password",value:s,onChange:A=>l(A.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Min 6 characters"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Handicap Index (Optional)"}),d.jsx("input",{type:"number",step:"0.1",value:f,onChange:A=>m(A.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"e.g. 12.4"})]}),d.jsx("button",{type:"submit",disabled:x,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Creating account...":"Sign Up"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx("button",{onClick:()=>{g(""),b("login")},className:"text-blue-600 hover:text-blue-700 font-semibold text-sm",children:"Already have an account? Login"})})]})]})})}function F2({currentUser:i,userProfile:t,userLeagues:s,isAdmin:l,joinCode:o,setJoinCode:u,feedback:f,setFeedback:m,setView:y,setCurrentLeague:g,setCurrentEvent:x}){const v=async()=>{if(!o){m("Please enter an event code"),setTimeout(()=>m(""),2e3);return}try{const b=await tt(ae(le,`eventCodes/${o}`));if(!b.exists()){m("Event not found. Check your code."),setTimeout(()=>m(""),3e3);return}const C=b.val(),A=await tt(ae(le,`events/${C}`));if(!A.exists()){m("Event not found."),setTimeout(()=>m(""),3e3);return}const L=A.val();x({id:C,...L}),u(""),y("event-lobby"),m("")}catch(b){console.error("Error joining event:",b),m("Error joining event. Please try again."),setTimeout(()=>m(""),3e3)}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6 font-sans",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-white",style:{fontFamily:"Georgia, serif"},children:"LiveLinks"}),t&&d.jsxs("p",{className:"text-white/80",children:["Welcome, ",t.displayName]})]}),d.jsx("button",{onClick:async()=>{await bE(Ic),y("login")},className:"text-white/80 hover:text-white text-sm font-medium",children:"Logout"})]}),l()&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-white text-lg font-semibold mb-3",children:" ADMIN"}),d.jsx("button",{onClick:()=>y("manage-courses"),className:"w-full bg-white/95 backdrop-blur-sm p-5 rounded-2xl shadow-xl hover:bg-white transition-all text-left",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xl font-bold text-gray-900",children:"Manage Courses"}),d.jsx("div",{className:"text-sm text-gray-600",children:"Add and edit golf courses"})]}),d.jsx("div",{className:"text-gray-400",children:""})]})})]}),s.length>0&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-white text-lg font-semibold mb-3",children:"MY LEAGUES"}),d.jsx("div",{className:"space-y-3",children:s.map(b=>d.jsx("button",{onClick:()=>{g(b),y("league-dashboard")},className:"w-full bg-white/95 backdrop-blur-sm p-5 rounded-2xl shadow-xl hover:bg-white transition-all text-left",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[b.meta.name,b.userRole==="commissioner"&&d.jsx("span",{className:"text-yellow-500",children:""})]}),d.jsxs("div",{className:"text-sm text-gray-600",children:[b.userRole==="commissioner"?"Commissioner":"Player","  ",Object.keys(b.seasons||{}).length," season",Object.keys(b.seasons||{}).length!==1?"s":""]})]}),d.jsx("div",{className:"text-gray-400",children:""})]})},b.id))})]}),d.jsx("div",{className:"mb-6",children:d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsx("button",{onClick:()=>y("create-league"),className:"bg-white/95 backdrop-blur-sm p-5 rounded-2xl shadow-xl hover:bg-white transition-all",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-3xl mb-2",children:""}),d.jsx("div",{className:"font-bold text-gray-900",children:"Create League"})]})}),d.jsx("button",{onClick:()=>y("join-league"),className:"bg-white/95 backdrop-blur-sm p-5 rounded-2xl shadow-xl hover:bg-white transition-all",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-3xl mb-2",children:""}),d.jsx("div",{className:"font-bold text-gray-900",children:"Join League"})]})})]})}),d.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6",children:[d.jsx("h3",{className:"text-white text-sm font-semibold mb-3 uppercase tracking-wider",children:"Quick Play"}),d.jsx("p",{className:"text-white/70 text-sm mb-4",children:"For one-off events without a league"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("button",{onClick:()=>y("create-event"),className:"w-full bg-white/20 hover:bg-white/30 p-4 rounded-xl transition-all text-white text-left",children:[d.jsx("div",{className:"font-semibold",children:"Create Event"}),d.jsx("div",{className:"text-sm text-white/80",children:"Host a standalone golf event"})]}),d.jsxs("button",{onClick:()=>y("solo-setup"),className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white p-6 rounded-xl text-left shadow-lg transition-all",children:[d.jsx("div",{className:"font-bold text-lg mb-1",children:"Play Solo"}),d.jsx("div",{className:"text-sm text-green-100",children:"Track your personal round"})]}),d.jsxs("div",{className:"bg-white/20 p-4 rounded-xl",children:[d.jsx("div",{className:"font-semibold text-white mb-3",children:"Join Event"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:o,onChange:b=>u(b.target.value.toUpperCase()),onKeyPress:b=>b.key==="Enter"&&v(),placeholder:"WOLF-A3X9",className:"flex-1 px-4 py-2 rounded-lg border-2 border-white/30 bg-white/10 text-white placeholder-white/50 focus:border-white/50 focus:outline-none uppercase"}),d.jsx("button",{onClick:v,className:"bg-white text-blue-900 px-5 py-2 rounded-lg hover:bg-white/90 font-semibold",children:"Join"})]}),f&&d.jsx("div",{className:"mt-2 text-sm text-white/90",children:f})]})]})]})]})})}function eA({currentUser:i,userProfile:t,newLeague:s,setNewLeague:l,feedback:o,setFeedback:u,setView:f,setCurrentLeague:m,setUserLeagues:y,generateLeagueCode:g,loadUserLeagues:x}){const v=async b=>{if(b.preventDefault(),u(""),!s.name){u("Please enter a league name");return}if(!t){u("User profile not loaded. Please try again.");return}try{const C="league-"+Date.now(),A=await g(),L={meta:{name:s.name,code:A,commissionerId:i.uid,description:s.description,createdAt:Date.now()},members:{[i.uid]:{displayName:t.displayName,role:"commissioner",handicap:t.handicap||null,joinedAt:Date.now()}},seasons:{"season-2026":{name:s.seasonName,status:"active",pointSystem:s.pointSystem,events:[],standings:{}}}};await ot(ae(le,`leagues/${C}`),L),await ot(ae(le,`leagueCodes/${A}`),C),await ot(ae(le,`users/${i.uid}/leagues/${C}`),{role:"commissioner",joinedAt:Date.now()});const I=await x(i.uid);y(I),m({id:C,...L,userRole:"commissioner"}),u(`League created! Code: ${A}`),setTimeout(()=>{f("league-dashboard"),u("")},1500)}catch(C){console.error("Error creating league:",C),u("Error creating league. Please try again.")}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsx("button",{onClick:()=>f("home"),className:"text-white mb-6 hover:text-blue-200",children:" Back"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Create League"}),o&&d.jsx("div",{className:`border-2 p-3 rounded-lg mb-4 text-sm ${o.includes("Error")||o.includes("required")?"bg-red-50 border-red-200 text-red-800":"bg-green-50 border-green-200 text-green-800"}`,children:o}),d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"League Name"}),d.jsx("input",{type:"text",value:s.name,onChange:b=>l({...s,name:b.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Sunday Golf League",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),d.jsx("textarea",{value:s.description,onChange:b=>l({...s,description:b.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Weekly competitive league for golfers of all levels",rows:3})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Season Name"}),d.jsx("input",{type:"text",value:s.seasonName,onChange:b=>l({...s,seasonName:b.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"2026 Season"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Point System"}),d.jsx("div",{className:"bg-gray-50 p-4 rounded-xl",children:d.jsx("div",{className:"grid grid-cols-5 gap-3",children:[1,2,3,4,5].map(b=>d.jsxs("div",{children:[d.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:[b,b===1?"st":b===2?"nd":b===3?"rd":"th"]}),d.jsx("input",{type:"number",value:s.pointSystem[b],onChange:C=>l({...s,pointSystem:{...s.pointSystem,[b]:parseInt(C.target.value)||0}}),className:"w-full px-2 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none text-center"})]},b))})})]}),d.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold hover:bg-blue-700 text-lg",children:"Create League"})]})]})]})})}function tA({currentUser:i,userProfile:t,leagueCode:s,setLeagueCode:l,feedback:o,setFeedback:u,setView:f,setCurrentLeague:m,setUserLeagues:y,loadUserLeagues:g}){const x=async v=>{if(v.preventDefault(),u(""),!s){u("Please enter a league code");return}if(!t){u("User profile not loaded. Please try logging out and back in.");return}try{const C=(await tt(ae(le,`leagueCodes/${s}`))).val();if(!C){u("League not found. Check your code.");return}const L=(await tt(ae(le,`leagues/${C}`))).val();if(!L){u("League not found. Check your code.");return}if(L.members&&L.members[i.uid]){u("You are already a member of this league"),setTimeout(()=>{const q={id:C,...L,userRole:L.members[i.uid].role};m(q),f("league-dashboard")},1500);return}await ot(ae(le,`leagues/${C}/members/${i.uid}`),{displayName:t.displayName,role:"player",handicap:t.handicap||null,joinedAt:Date.now()}),await ot(ae(le,`users/${i.uid}/leagues/${C}`),{role:"player",joinedAt:Date.now()});const I=await g(i.uid);y(I);const U=I.find(q=>q.id===C);m(U),u("Successfully joined league!"),setTimeout(()=>{f("league-dashboard"),u("")},1500)}catch(b){console.error("Error joining league:",b),u("Error joining league. Please try again.")}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6 flex items-center justify-center",children:d.jsxs("div",{className:"max-w-md w-full",children:[d.jsx("button",{onClick:()=>f("home"),className:"text-white mb-6 hover:text-blue-200",children:" Back"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Join League"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Enter the code from your league commissioner"}),o&&d.jsx("div",{className:`border-2 p-3 rounded-lg mb-4 text-sm ${o.includes("Error")||o.includes("not found")?"bg-red-50 border-red-200 text-red-800":"bg-green-50 border-green-200 text-green-800"}`,children:o}),d.jsxs("form",{onSubmit:x,children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"League Code"}),d.jsx("input",{type:"text",value:s,onChange:v=>l(v.target.value.toUpperCase()),className:"w-full px-4 py-4 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none uppercase text-center text-2xl font-mono tracking-widest",placeholder:"ABC-1234",maxLength:8})]}),d.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold hover:bg-blue-700 text-lg",children:"Join League"})]})]})]})})}const Mf=()=>d.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),d.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),ob=()=>d.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"9",cy:"7",r:"4"}),d.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),d.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),nA=()=>d.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),kf=()=>d.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("polyline",{points:"3 6 5 6 21 6"}),d.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),sA=()=>d.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),d.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),d.jsx("path",{d:"M4 22h16"}),d.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),d.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),d.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),cb=()=>d.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),d.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),ub=()=>d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("polyline",{points:"15 18 9 12 15 6"})}),db=()=>d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("polyline",{points:"9 18 15 12 9 6"})});function iA({currentUser:i,currentLeague:t,setCurrentLeague:s,leagueEvents:l,feedback:o,setFeedback:u,setView:f,setCreatingEventForLeague:m,setEditingEvent:y}){const g=t.userRole==="commissioner",x=Object.entries(t.members||{}).map(([A,L])=>({uid:A,...L})),v=Object.values(t.seasons||{}).find(A=>A.status==="active"),b=async(A,L)=>{if(confirm(`Remove ${L} from the league?`))try{await va(ae(le,`leagues/${t.id}/members/${A}`)),await va(ae(le,`users/${A}/leagues/${t.id}`));const U=(await tt(ae(le,`leagues/${t.id}`))).val();s({id:t.id,...U,userRole:t.userRole}),u(`${L} removed from league`),setTimeout(()=>u(""),3e3)}catch(I){console.error("Error removing member:",I),u("Error removing member"),setTimeout(()=>u(""),3e3)}},C=async(A,L)=>{if(confirm(`Delete "${L}"? This will remove all scores and registrations.`))try{const I=Object.keys(t.seasons||{}).find(ee=>t.seasons[ee].status==="active");if(I){const Oe=(t.seasons[I].events||[]).filter(V=>V!==A);await ot(ae(le,`leagues/${t.id}/seasons/${I}/events`),Oe)}const U=await tt(ae(le,`events/${A}/meta/eventCode`));U.exists()&&await va(ae(le,`eventCodes/${U.val()}`)),await va(ae(le,`events/${A}`));const Q=(await tt(ae(le,`leagues/${t.id}`))).val();s({id:t.id,...Q,userRole:t.userRole}),u("Event deleted"),setTimeout(()=>u(""),3e3)}catch(I){console.error("Error deleting event:",I),u("Error deleting event"),setTimeout(()=>u(""),3e3)}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsx("button",{onClick:()=>f("home"),className:"text-white mb-6 hover:text-blue-200",children:" Back to Home"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.meta.name}),t.meta.description&&d.jsx("p",{className:"text-gray-600 mb-4",children:t.meta.description}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg",children:[d.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"League Code"}),d.jsx("div",{className:"font-mono font-bold text-blue-600 text-lg",children:t.meta.code})]}),d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.meta.code),u("Code copied!"),setTimeout(()=>u(""),2e3)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm font-semibold",children:"Copy Code"})]}),o&&d.jsx("div",{className:"mt-2 text-sm text-green-600",children:o})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-6",children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Members (",x.length,")"]}),d.jsx("div",{className:"space-y-3",children:x.map(A=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[A.displayName,A.role==="commissioner"&&d.jsx("span",{className:"text-yellow-500",children:""})]}),A.handicap!==null&&A.handicap!==void 0&&d.jsxs("div",{className:"text-sm text-gray-600",children:["Handicap: ",A.handicap]})]}),g&&A.uid!==i.uid&&d.jsx("button",{onClick:()=>b(A.uid,A.displayName),className:"text-red-600 hover:text-red-700 text-sm font-semibold",children:"Remove"})]},A.uid))})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Events"}),g&&d.jsxs("button",{onClick:()=>{m({leagueId:t.id,seasonId:Object.keys(t.seasons||{}).find(A=>t.seasons[A].status==="active")}),f("create-event")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm font-semibold flex items-center gap-2",children:[d.jsx(Mf,{}),"Create Event"]})]}),l.length>0?d.jsx("div",{className:"space-y-3",children:l.map(A=>{const L={scramble:"2-Man Scramble",shamble:"2-Man Shamble",bestball:"2-Man Best Ball",stableford:"Individual Stableford"};return d.jsx("div",{className:"p-4 bg-gray-50 rounded-xl",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-semibold text-gray-900",children:A.meta.name}),d.jsxs("div",{className:"text-sm text-gray-600",children:[A.meta.courseName,"  ",L[A.meta.format]||A.meta.format]}),d.jsxs("div",{className:"text-sm text-gray-600",children:[new Date(A.meta.date).toLocaleDateString(),A.meta.time&&`  ${A.meta.time}`]}),d.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Status: ",A.meta.status==="draft"?" Draft":A.meta.status==="locked"?" Locked":" Active",A.meta.status==="draft"&&"  Registration Open"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[A.meta.status==="draft"&&d.jsx("button",{onClick:()=>{y(A),f("event-details")},className:"text-blue-600 hover:text-blue-700 text-sm font-semibold",children:"View"}),g&&d.jsx("button",{onClick:()=>C(A.id,A.meta.name),className:"text-red-600 hover:text-red-700 text-sm font-semibold",children:"Delete"})]})]})},A.id)})}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(nA,{className:"mx-auto mb-3 text-gray-400"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"No events yet"}),g&&d.jsx("button",{onClick:()=>{m({leagueId:t.id,seasonId:Object.keys(t.seasons||{}).find(A=>t.seasons[A].status==="active")}),f("create-event")},className:"bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 font-semibold",children:"Create First Event"})]})]}),v&&d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6",children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:[v.name||"Season"," Standings"]}),v.standings&&Object.keys(v.standings).length>0?d.jsx("div",{className:"space-y-2",children:Object.entries(v.standings).sort(([,A],[,L])=>(L.points||0)-(A.points||0)).map(([A,L],I)=>{const U=x.find(q=>q.uid===A);return d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"text-lg font-bold text-gray-400 w-8",children:["#",I+1]}),d.jsx("div",{className:"font-semibold text-gray-900",children:U?.displayName||"Unknown"})]}),d.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[L.points||0," pts"]})]},A)})}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(sA,{className:"mx-auto mb-3 text-gray-400"}),d.jsx("p",{className:"text-gray-600",children:"No standings yet"}),d.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Standings will appear after events are completed"})]})]})]})})}function aA({currentUser:i,currentLeague:t,courses:s,globalCourses:l,newEvent:o,setNewEvent:u,selectedBaseCourse:f,setSelectedBaseCourse:m,newTeam:y,setNewTeam:g,creatingEventForLeague:x,setCreatingEventForLeague:v,feedback:b,setFeedback:C,setView:A,setCurrentEvent:L,setCurrentLeague:I,generateEventCode:U,deviceId:q}){const Q=()=>{if(o.format==="stableford"){if(!y.name){C("Please enter player name"),setTimeout(()=>C(""),2e3);return}u({...o,teams:[...o.teams,{name:y.name,player1:y.name,id:Date.now()}]}),g({name:"",player1:"",player2:""})}else{if(!y.name||!y.player1||!y.player2){C("Please fill in all team fields"),setTimeout(()=>C(""),2e3);return}u({...o,teams:[...o.teams,{...y,id:Date.now()}]}),g({name:"",player1:"",player2:""})}},ee=M=>{u({...o,teams:o.teams.filter(te=>te.id!==M)})},Oe=async()=>{const M=x?0:o.format==="stableford"?1:2;if(!o.name||!o.courseId||o.teams.length<M){const te=o.format==="stableford"?"player":"teams",we=M===0?"":` and at least ${M} ${te}`;C(`Please add event name, course${we}`),setTimeout(()=>C(""),3e3);return}try{const te=s.find(me=>me.id===o.courseId),we="event-"+Date.now(),mt=await U(te.id),Ve={meta:{name:o.name,courseId:te.id,courseName:te.name,coursePars:te.holes,format:o.format,date:o.date,time:o.time||null,createdBy:i?.uid||q,status:x?"draft":"active",leagueId:x?.leagueId||null,seasonId:x?.seasonId||null,createdAt:Date.now(),eventCode:mt},teams:{},registrations:{}};if(x||o.teams.forEach((me,ct)=>{const ut=`team-${Date.now()}-${ct}`;Ve.teams[ut]={name:me.name,players:o.format==="stableford"?[me.player1]:[me.player1,me.player2],currentHole:o.startingHole,scores:{}}}),await ot(ae(le,`events/${we}`),Ve),await ot(ae(le,`eventCodes/${mt}`),we),x){const me=ae(le,`leagues/${x.leagueId}/seasons/${x.seasonId}/events`),ut=(await tt(me)).val()||[];ut.push(we),await ot(me,ut)}C(`Event created! Code: ${mt}`),setTimeout(async()=>{if(u({name:"",courseId:"",date:new Date().toISOString().split("T")[0],time:"",format:"scramble",startingHole:1,teams:[]}),m(""),g({name:"",player1:"",player2:""}),C(""),x){const ct=(await tt(ae(le,`leagues/${x.leagueId}`))).val();I({id:x.leagueId,...ct,userRole:t.userRole}),v(null),A("league-dashboard")}else L({id:we,...Ve}),A("event-lobby")},1500)}catch(te){console.error("Error creating event:",te),C("Error creating event. Please try again."),setTimeout(()=>C(""),3e3)}},V={scramble:"Both players hit, pick the best shot, both play from there. One team score per hole.",shamble:"Both players hit, pick the best drive, then each plays their own ball. Best individual score counts.",bestball:"Each player plays their own ball. Lower score of the two counts for the team.",stableford:"Individual scoring. Points awarded based on score vs par. Highest points wins."};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsx("button",{onClick:()=>{x?(v(null),A("league-dashboard")):A("home")},className:"text-white mb-6 hover:text-blue-200",children:" Back"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",style:{fontFamily:"Georgia, serif"},children:"Create Event"}),x&&d.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 p-3 rounded-lg mb-6",children:d.jsxs("div",{className:"text-sm text-blue-800",children:["Creating event for ",d.jsx("strong",{children:t?.meta?.name})]})}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Event Name"}),d.jsx("input",{type:"text",value:o.name,onChange:M=>u({...o,name:M.target.value}),placeholder:"March Scramble",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Course"}),d.jsxs("select",{value:f,onChange:M=>{m(M.target.value),u({...o,courseId:""})},className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",children:[d.jsx("option",{value:"",children:"Select a course"}),l.map(M=>d.jsxs("option",{value:M.id,children:[M.name," ",M.location&&`- ${M.location}`]},M.id))]})]}),f&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tee"}),d.jsxs("select",{value:o.courseId,onChange:M=>u({...o,courseId:M.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",children:[d.jsx("option",{value:"",children:"Select a tee"}),s.filter(M=>M.courseId===f).map(M=>{const te=M.yardages?.reduce((we,mt)=>we+(parseInt(mt)||0),0)||0;return d.jsxs("option",{value:M.id,children:[M.teeName," - Rating: ",M.rating," / Slope: ",M.slope," / ",te," yards"]},M.id)})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Format"}),d.jsxs("select",{value:o.format,onChange:M=>u({...o,format:M.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",children:[d.jsx("option",{value:"scramble",children:"2-Man Scramble"}),d.jsx("option",{value:"shamble",children:"2-Man Shamble"}),d.jsx("option",{value:"bestball",children:"2-Man Best Ball"}),d.jsx("option",{value:"stableford",children:"Individual Stableford"})]}),d.jsx("p",{className:"text-sm text-gray-600 mt-2",children:V[o.format]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date"}),d.jsx("input",{type:"date",value:o.date,onChange:M=>u({...o,date:M.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Time"}),d.jsx("input",{type:"time",value:o.time,onChange:M=>u({...o,time:M.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"})]})]}),!x&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Starting Hole"}),d.jsx("select",{value:o.startingHole,onChange:M=>u({...o,startingHole:parseInt(M.target.value)}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",children:Array.from({length:18},(M,te)=>te+1).map(M=>d.jsxs("option",{value:M,children:["Hole ",M]},M))})]}),!x&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:o.format==="stableford"?"Players":"Teams"}),o.teams.length>0&&d.jsx("div",{className:"space-y-2 mb-3",children:o.teams.map(M=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-gray-900",children:M.name}),o.format!=="stableford"&&d.jsxs("div",{className:"text-sm text-gray-600",children:[M.player1," & ",M.player2]})]}),d.jsx("button",{onClick:()=>ee(M.id),className:"text-red-600 hover:text-red-700",children:d.jsx(kf,{})})]},M.id))}),d.jsx("div",{className:"space-y-3 p-4 bg-blue-50 rounded-xl",children:o.format==="stableford"?d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"text",value:y.name,onChange:M=>g({...y,name:M.target.value}),placeholder:"Player name",className:"w-full px-4 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-500 focus:outline-none"}),d.jsx("button",{onClick:Q,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 font-semibold",children:"Add Player"})]}):d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"text",value:y.name,onChange:M=>g({...y,name:M.target.value}),placeholder:"Team name",className:"w-full px-4 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-500 focus:outline-none"}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",value:y.player1,onChange:M=>g({...y,player1:M.target.value}),placeholder:"Player 1",className:"px-4 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-500 focus:outline-none"}),d.jsx("input",{type:"text",value:y.player2,onChange:M=>g({...y,player2:M.target.value}),placeholder:"Player 2",className:"px-4 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-500 focus:outline-none"})]}),d.jsx("button",{onClick:Q,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 font-semibold",children:"Add Team"})]})})]}),b&&d.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 text-blue-800 px-4 py-3 rounded-xl text-sm",children:b}),d.jsx("button",{onClick:Oe,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-blue-700 shadow-lg",children:"Create Event"})]})]})]})})}function lA({currentEvent:i,feedback:t,setFeedback:s,setView:l,setSelectedTeam:o}){const u=Object.entries(i.teams||{}).map(([y,g])=>({key:y,...g})),f=y=>{o(y),l("scoring")},m={scramble:"2-Man Scramble",shamble:"2-Man Shamble",bestball:"2-Man Best Ball",stableford:"Individual Stableford"};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsx("button",{onClick:()=>l("home"),className:"text-white mb-6 hover:text-blue-200",children:" Back to Home"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:i.meta.name}),d.jsxs("div",{className:"space-y-1 text-gray-600",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold",children:"Course:"}),i.meta.courseName]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold",children:"Format:"}),m[i.meta.format]]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold",children:"Date:"}),new Date(i.meta.date).toLocaleDateString(),i.meta.time&&` at ${i.meta.time}`]})]}),d.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[d.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg",children:[d.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Event Code"}),d.jsx("div",{className:"font-mono font-bold text-blue-600 text-lg",children:i.meta.eventCode})]}),d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(i.meta.eventCode),s("Code copied!"),setTimeout(()=>s(""),2e3)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm font-semibold",children:"Copy Code"})]}),t&&d.jsx("div",{className:"mt-2 text-sm text-green-600",children:t})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:i.meta.format==="stableford"?"Players":"Teams"}),u.length>0?d.jsx("div",{className:"space-y-3",children:u.map(y=>d.jsx("div",{className:"p-4 bg-gray-50 rounded-xl",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-gray-900",children:y.name}),d.jsx("div",{className:"text-sm text-gray-600",children:y.players.join(" & ")}),d.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Currently on hole ",y.currentHole]})]}),d.jsx("button",{onClick:()=>f(y.key),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-semibold",children:"View Scores"})]})},y.key))}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(ob,{className:"mx-auto mb-3 text-gray-400"}),d.jsx("p",{className:"text-gray-600",children:"No teams yet"})]})]})]})})}function rA({currentUser:i,userProfile:t,currentLeague:s,editingEvent:l,setEditingEvent:o,eventRegistrations:u,feedback:f,setFeedback:m,setView:y}){const g=Object.entries(u||{}).map(([L,I])=>({uid:L,...I})),x=async()=>{if(!t){m("User profile not loaded");return}try{await ot(ae(le,`events/${l.id}/registrations/${i.uid}`),{displayName:t.displayName,handicap:t.handicap||null,registeredAt:Date.now()}),m("Successfully registered!"),setTimeout(()=>m(""),2e3)}catch(L){console.error("Error registering:",L),m("Error registering. Please try again."),setTimeout(()=>m(""),3e3)}},v=async()=>{if(confirm("Withdraw from this event?"))try{await va(ae(le,`events/${l.id}/registrations/${i.uid}`)),m("Withdrawn from event"),setTimeout(()=>m(""),2e3)}catch(L){console.error("Error withdrawing:",L),m("Error withdrawing. Please try again."),setTimeout(()=>m(""),3e3)}},b=u&&u[i.uid],C=s&&s.userRole==="commissioner",A={scramble:"2-Man Scramble",shamble:"2-Man Shamble",bestball:"2-Man Best Ball",stableford:"Individual Stableford"};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsx("button",{onClick:()=>{o(null),y("league-dashboard")},className:"text-white mb-6 hover:text-blue-200",children:" Back to League"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-6",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:l.meta.name}),d.jsxs("div",{className:"space-y-1 text-gray-600",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold",children:"Course:"}),l.meta.courseName]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold",children:"Format:"}),A[l.meta.format]]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold",children:"Date:"}),new Date(l.meta.date).toLocaleDateString(),l.meta.time&&` at ${l.meta.time}`]})]})]}),C&&d.jsxs("button",{onClick:()=>{y("edit-event")},className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 text-sm font-semibold flex items-center gap-2",children:[d.jsx(cb,{}),"Edit"]})]}),f&&d.jsx("div",{className:`border-2 p-3 rounded-lg mb-4 text-sm ${f.includes("Error")?"bg-red-50 border-red-200 text-red-800":"bg-green-50 border-green-200 text-green-800"}`,children:f}),l.meta.status==="draft"&&d.jsx("div",{className:"mt-4",children:b?d.jsx("button",{onClick:v,className:"w-full bg-red-600 text-white py-3 rounded-xl font-semibold hover:bg-red-700",children:"Withdraw from Event"}):d.jsx("button",{onClick:x,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700",children:"Register for Event"})}),l.meta.status==="locked"&&d.jsx("div",{className:"mt-4 bg-yellow-50 border-2 border-yellow-200 text-yellow-800 px-4 py-3 rounded-xl text-sm",children:" This event is locked. Registration is closed."})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6",children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Registered Players (",g.length,")"]}),g.length>0?d.jsx("div",{className:"space-y-2",children:g.map(L=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-gray-900",children:L.displayName}),L.handicap!==null&&L.handicap!==void 0&&d.jsxs("div",{className:"text-sm text-gray-600",children:["Handicap: ",L.handicap]})]}),L.uid===i.uid&&d.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-semibold",children:"You"})]},L.uid))}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(ob,{className:"mx-auto mb-3 text-gray-400"}),d.jsx("p",{className:"text-gray-600",children:"No registrations yet"})]})]})]})})}function oA({editingEvent:i,setEditingEvent:t,editForm:s,setEditForm:l,courses:o,globalCourses:u,feedback:f,setFeedback:m,setView:y}){const g=async()=>{try{const v=o.find(C=>C.id===s.courseId);if(!s.name||!s.courseId){m("Please fill in all required fields"),setTimeout(()=>m(""),2e3);return}const b={};b[`events/${i.id}/meta/name`]=s.name,b[`events/${i.id}/meta/courseId`]=v.id,b[`events/${i.id}/meta/courseName`]=v.name,b[`events/${i.id}/meta/coursePars`]=v.holes,b[`events/${i.id}/meta/date`]=s.date,b[`events/${i.id}/meta/time`]=s.time||null,b[`events/${i.id}/meta/format`]=s.format,await M2(ae(le),b),m("Event updated!"),setTimeout(()=>{t(null),y("league-dashboard"),m("")},1500)}catch(v){console.error("Error updating event:",v),m("Error updating event"),setTimeout(()=>m(""),2e3)}},x={scramble:"Both players hit, pick the best shot, both play from there. One team score per hole.",shamble:"Both players hit, pick the best drive, then each plays their own ball. Best individual score counts.",bestball:"Each player plays their own ball. Lower score of the two counts for the team.",stableford:"Individual scoring. Points awarded based on score vs par. Highest points wins."};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsx("button",{onClick:()=>{t(null),y("event-details")},className:"text-white mb-6 hover:text-blue-200",children:" Back"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Edit Event"}),f&&d.jsx("div",{className:`border-2 p-3 rounded-lg mb-4 text-sm ${f.includes("Error")||f.includes("required")?"bg-red-50 border-red-200 text-red-800":"bg-green-50 border-green-200 text-green-800"}`,children:f}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Event Name"}),d.jsx("input",{type:"text",value:s.name,onChange:v=>l({...s,name:v.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Course"}),d.jsxs("select",{value:o.find(b=>b.id===s.courseId)?.courseId||"",onChange:v=>{l({...s,courseId:""})},className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",children:[d.jsx("option",{value:"",children:"Select a course"}),u.map(v=>d.jsxs("option",{value:v.id,children:[v.name," ",v.location&&`- ${v.location}`]},v.id))]})]}),(()=>{const b=o.find(C=>C.id===s.courseId)?.courseId;return b?d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tee"}),d.jsxs("select",{value:s.courseId,onChange:C=>l({...s,courseId:C.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",children:[d.jsx("option",{value:"",children:"Select a tee"}),o.filter(C=>C.courseId===b).map(C=>{const A=C.yardages?.reduce((L,I)=>L+(parseInt(I)||0),0)||0;return d.jsxs("option",{value:C.id,children:[C.teeName," - Rating: ",C.rating," / Slope: ",C.slope," / ",A," yards"]},C.id)})]})]}):null})(),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date"}),d.jsx("input",{type:"date",value:s.date,onChange:v=>l({...s,date:v.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Time"}),d.jsx("input",{type:"time",value:s.time,onChange:v=>l({...s,time:v.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Format"}),d.jsxs("select",{value:s.format,onChange:v=>l({...s,format:v.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",children:[d.jsx("option",{value:"scramble",children:"2-Man Scramble"}),d.jsx("option",{value:"shamble",children:"2-Man Shamble"}),d.jsx("option",{value:"bestball",children:"2-Man Best Ball"}),d.jsx("option",{value:"stableford",children:"Individual Stableford"})]}),d.jsx("p",{className:"text-sm text-gray-600 mt-2",children:x[s.format]})]}),d.jsx("button",{onClick:g,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold hover:bg-blue-700 text-lg",children:"Save Changes"})]})]})]})})}function cA({currentEvent:i,setCurrentEvent:t,selectedTeam:s,setSelectedTeam:l,feedback:o,setFeedback:u,scoreConfirmation:f,setScoreConfirmation:m,setView:y}){const g=i.teams[s],x=i.meta.coursePars,v=i.meta.format;if(!g)return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6 flex items-center justify-center",children:d.jsxs("div",{className:"text-white text-center",children:[d.jsx("p",{className:"text-xl mb-4",children:"Team not found"}),d.jsx("button",{onClick:()=>y("event-lobby"),className:"bg-white text-blue-900 px-6 py-3 rounded-xl font-semibold",children:"Back to Lobby"})]})});const b=g.currentHole,C=x[b-1],A=(V,M)=>{const te=V-M;return te>=2?0:te===1?1:te===0?2:te===-1?3:te===-2?4:te<=-3?5:0},L=V=>g.scores[V]||null,I=async(V,M)=>{if(!M||M<1||M>15){u("Please enter a valid score"),setTimeout(()=>u(""),2e3);return}try{await ot(ae(le,`events/${i.id}/teams/${s}/scores/${V}`),parseInt(M)),m({hole:V,score:parseInt(M)}),setTimeout(async()=>{if(m(null),V<18){await ot(ae(le,`events/${i.id}/teams/${s}/currentHole`),V+1);const we=(await tt(ae(le,`events/${i.id}`))).val();t({id:i.id,...we})}},1e3)}catch(te){console.error("Error saving score:",te),u("Error saving score"),setTimeout(()=>u(""),2e3)}},U=async V=>{if(!(V<1||V>18))try{await ot(ae(le,`events/${i.id}/teams/${s}/currentHole`),V);const te=(await tt(ae(le,`events/${i.id}`))).val();t({id:i.id,...te})}catch(M){console.error("Error changing hole:",M)}},Q=(()=>{let V=0,M=0,te=0;for(let Ve=1;Ve<=18;Ve++){const me=g.scores[Ve];me&&(V+=me,te++,v==="stableford"&&(M+=A(me,x[Ve-1])))}const we=x.reduce((Ve,me)=>Ve+me,0),mt=V-we;return{totalScore:V,totalPoints:M,holesPlayed:te,scoreToPar:mt}})(),ee=[{label:"Eagle",value:C-2},{label:"Birdie",value:C-1},{label:"Par",value:C},{label:"Bogey",value:C+1},{label:"Double",value:C+2}],Oe=(V,M)=>V?V===M-2?"bg-yellow-200":V===M-1?"bg-red-200":V===M+1?"bg-blue-200":V>=M+2?"bg-gray-300":"bg-white":"bg-white";return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-4",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsx("button",{onClick:()=>{l(null),y("event-lobby")},className:"text-white mb-4 hover:text-blue-200",children:" Back to Lobby"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-4",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:g.name}),d.jsx("div",{className:"text-sm text-gray-600 mb-4",children:g.players.join(" & ")}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[d.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Holes"}),d.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Q.holesPlayed,"/18"]})]}),d.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[d.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Score"}),d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Q.totalScore>0?d.jsxs(d.Fragment,{children:[Q.totalScore,d.jsxs("span",{className:"text-sm ml-1",children:["(",Q.scoreToPar>0?"+":"",Q.scoreToPar,")"]})]}):"-"})]}),v==="stableford"&&d.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[d.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Points"}),d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Q.totalPoints})]}),v!=="stableford"&&d.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[d.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Par"}),d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.reduce((V,M)=>V+M,0)})]})]})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("button",{onClick:()=>U(b-1),disabled:b===1,className:"bg-gray-200 hover:bg-gray-300 disabled:opacity-30 disabled:cursor-not-allowed p-3 rounded-xl",children:d.jsx(ub,{})}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Hole"}),d.jsx("div",{className:"text-5xl font-bold text-gray-900",children:b}),d.jsxs("div",{className:"text-lg text-gray-600 mt-1",children:["Par ",C]})]}),d.jsx("button",{onClick:()=>U(b+1),disabled:b===18,className:"bg-gray-200 hover:bg-gray-300 disabled:opacity-30 disabled:cursor-not-allowed p-3 rounded-xl",children:d.jsx(db,{})})]}),f&&f.hole===b&&d.jsxs("div",{className:"bg-green-50 border-2 border-green-200 text-green-800 px-4 py-3 rounded-xl mb-4 text-center font-semibold",children:[" Score saved: ",f.score]}),d.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:ee.map(V=>d.jsxs("button",{onClick:()=>I(b,V.value),className:"bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-semibold text-sm",children:[d.jsx("div",{children:V.label}),d.jsx("div",{className:"text-xs opacity-80",children:V.value})]},V.label))}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Or enter score manually:"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"number",min:"1",max:"15",placeholder:"Score",onKeyPress:V=>{V.key==="Enter"&&(I(b,parseInt(V.target.value)),V.target.value="")},className:"flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none text-center text-2xl font-bold"}),d.jsx("button",{onClick:V=>{const M=V.target.parentElement.querySelector("input");I(b,parseInt(M.value)),M.value=""},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold",children:"Save"})]})]}),o&&d.jsx("div",{className:"mt-4 bg-red-50 border-2 border-red-200 text-red-800 px-4 py-3 rounded-xl text-sm text-center",children:o})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Scorecard"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Front 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"text-left p-2",children:"Hole"}),[1,2,3,4,5,6,7,8,9].map(V=>d.jsx("th",{className:"text-center p-2 min-w-[40px]",children:V},V)),d.jsx("th",{className:"text-center p-2 font-bold",children:"OUT"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Par"}),[1,2,3,4,5,6,7,8,9].map(V=>d.jsx("td",{className:"text-center p-2",children:x[V-1]},V)),d.jsx("td",{className:"text-center p-2 font-bold",children:x.slice(0,9).reduce((V,M)=>V+M,0)})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Score"}),[1,2,3,4,5,6,7,8,9].map(V=>{const M=L(V),te=x[V-1];return d.jsx("td",{className:`text-center p-2 ${Oe(M,te)} font-semibold`,children:M||"-"},V)}),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-100",children:[1,2,3,4,5,6,7,8,9].reduce((V,M)=>V+(L(M)||0),0)||"-"})]})]})]})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Back 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"text-left p-2",children:"Hole"}),[10,11,12,13,14,15,16,17,18].map(V=>d.jsx("th",{className:"text-center p-2 min-w-[40px]",children:V},V)),d.jsx("th",{className:"text-center p-2 font-bold",children:"IN"}),d.jsx("th",{className:"text-center p-2 font-bold",children:"TOT"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Par"}),[10,11,12,13,14,15,16,17,18].map(V=>d.jsx("td",{className:"text-center p-2",children:x[V-1]},V)),d.jsx("td",{className:"text-center p-2 font-bold",children:x.slice(9,18).reduce((V,M)=>V+M,0)}),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-200",children:x.reduce((V,M)=>V+M,0)})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Score"}),[10,11,12,13,14,15,16,17,18].map(V=>{const M=L(V),te=x[V-1];return d.jsx("td",{className:`text-center p-2 ${Oe(M,te)} font-semibold`,children:M||"-"},V)}),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-100",children:[10,11,12,13,14,15,16,17,18].reduce((V,M)=>V+(L(M)||0),0)||"-"}),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-200",children:Q.totalScore||"-"})]})]})]})})]})]})]})})}function uA({globalCourses:i,feedback:t,setFeedback:s,setView:l,setCourseForm:o,setEditingCourse:u,loadCourses:f}){const m=async(g,x)=>{if(confirm(`Delete ${x}? This cannot be undone.`))try{await va(ae(le,`courses/${g}`)),await f(),s("Course deleted"),setTimeout(()=>s(""),2e3)}catch(v){console.error("Error deleting course:",v),s("Error deleting course"),setTimeout(()=>s(""),2e3)}},y={name:"",location:"",strokeIndex:Array(18).fill(""),tees:[{id:"tee-1",name:"",rating:"",slope:"",pars:Array(18).fill(""),yardages:Array(18).fill("")}]};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("button",{onClick:()=>l("home"),className:"text-white mb-6 hover:text-blue-200",children:" Back to Home"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Manage Courses"}),d.jsxs("button",{onClick:()=>{o(y),u(null),l("add-edit-course")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-semibold flex items-center gap-2",children:[d.jsx(Mf,{}),"Add Course"]})]}),t&&d.jsx("div",{className:`border-2 p-3 rounded-lg mb-4 text-sm ${t.includes("Error")?"bg-red-50 border-red-200 text-red-800":"bg-green-50 border-green-200 text-green-800"}`,children:t}),i.length>0?d.jsx("div",{className:"space-y-3",children:i.map(g=>d.jsx("div",{className:"p-4 bg-gray-50 rounded-xl",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:g.name}),g.location&&d.jsx("div",{className:"text-sm text-gray-600 mb-2",children:g.location}),d.jsxs("div",{className:"text-sm text-gray-600",children:[Object.keys(g.tees||{}).length," tee",Object.keys(g.tees||{}).length!==1?"s":""]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>{const x=Object.entries(g.tees||{}).map(([v,b])=>({id:v,...b}));o({name:g.name,location:g.location||"",strokeIndex:g.strokeIndex||Array(18).fill(""),tees:x.length>0?x:[{id:"tee-1",name:"",rating:"",slope:"",pars:Array(18).fill(""),yardages:Array(18).fill("")}]}),u(g),l("add-edit-course")},className:"text-blue-600 hover:text-blue-700 font-semibold",children:d.jsx(cb,{})}),d.jsx("button",{onClick:()=>m(g.id,g.name),className:"text-red-600 hover:text-red-700",children:d.jsx(kf,{})})]})]})},g.id))}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("p",{className:"text-gray-600 mb-4",children:"No courses yet"}),d.jsx("button",{onClick:()=>{o(y),u(null),l("add-edit-course")},className:"bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 font-semibold",children:"Add First Course"})]})]})]})})}function dA({currentUser:i,courseForm:t,setCourseForm:s,editingCourse:l,setEditingCourse:o,feedback:u,setFeedback:f,setView:m,loadCourses:y}){const g=()=>{const I={id:`tee-${Date.now()}`,name:"",rating:"",slope:"",pars:Array(18).fill(""),yardages:Array(18).fill("")};s({...t,tees:[...t.tees,I]})},x=I=>{if(t.tees.length===1){f("Must have at least one tee"),setTimeout(()=>f(""),2e3);return}const U=t.tees.filter((q,Q)=>Q!==I);s({...t,tees:U})},v=(I,U,q)=>{const Q=[...t.tees];Q[I][U]=q,s({...t,tees:Q})},b=(I,U,q,Q)=>{const ee=[...t.tees];ee[I][q][U]=Q,s({...t,tees:ee})},C=(I,U)=>{const q=[...t.strokeIndex];q[I]=U,s({...t,strokeIndex:q})},A=async()=>{if(f(""),!t.name){f("Course name is required"),setTimeout(()=>f(""),3e3);return}for(let U=0;U<t.tees.length;U++){const q=t.tees[U];if(!q.name){f(`Tee ${U+1}: Name is required`),setTimeout(()=>f(""),3e3);return}if(!q.rating||!q.slope){f(`Tee ${U+1}: Rating and slope are required`),setTimeout(()=>f(""),3e3);return}for(let Q=0;Q<18;Q++)if(!q.pars[Q]||parseInt(q.pars[Q])<3||parseInt(q.pars[Q])>6){f(`Tee ${U+1}, Hole ${Q+1}: Par must be between 3 and 6`),setTimeout(()=>f(""),3e3);return}for(let Q=0;Q<18;Q++)if(!q.yardages[Q]||parseInt(q.yardages[Q])<50||parseInt(q.yardages[Q])>700){f(`Tee ${U+1}, Hole ${Q+1}: Yardage must be between 50 and 700`),setTimeout(()=>f(""),3e3);return}}const I=new Set;for(let U=0;U<18;U++){const q=parseInt(t.strokeIndex[U]);if(!q||q<1||q>18){f(`Hole ${U+1}: Stroke index must be between 1 and 18`),setTimeout(()=>f(""),3e3);return}if(I.has(q)){f(`Stroke index ${q} is used more than once. Each value from 1-18 must be used exactly once.`),setTimeout(()=>f(""),4e3);return}I.add(q)}for(let U=1;U<=18;U++)if(!I.has(U)){f(`Stroke index ${U} is missing. Each value from 1-18 must be used exactly once.`),setTimeout(()=>f(""),4e3);return}try{const U=l?.id||`course-${Date.now()}`,q={};t.tees.forEach(ee=>{q[ee.id]={name:ee.name,rating:parseFloat(ee.rating)||0,slope:parseInt(ee.slope)||0,pars:ee.pars.map(Oe=>parseInt(Oe)||0),yardages:ee.yardages.map(Oe=>parseInt(Oe)||0)}});const Q={name:t.name,location:t.location,strokeIndex:t.strokeIndex.map(ee=>parseInt(ee)||0),tees:q,createdBy:i.uid,createdAt:l?.createdAt||Date.now()};await ot(ae(le,`courses/${U}`),Q),f("Course saved!"),setTimeout(async()=>{await y(),m("manage-courses"),f("")},1500)}catch(U){console.error("Error saving course:",U),f("Error saving course: "+U.message)}},L=(I,U,q)=>I.slice(U,q).reduce((Q,ee)=>Q+(parseInt(ee)||0),0);return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-6xl mx-auto",children:[d.jsx("button",{onClick:()=>{m("manage-courses"),o(null)},className:"text-white mb-6 hover:text-blue-200",children:" Back"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:l?"Edit Course":"Add Course"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Basic Information"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Course Name"}),d.jsx("input",{type:"text",value:t.name,onChange:I=>s({...t,name:I.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Glen Eagle Golf Course"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Location"}),d.jsx("input",{type:"text",value:t.location,onChange:I=>s({...t,location:I.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Syracuse, UT"})]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Tees"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"text-left p-2 text-sm font-semibold text-gray-700",children:"Tee Name"}),d.jsx("th",{className:"text-left p-2 text-sm font-semibold text-gray-700",children:"Rating"}),d.jsx("th",{className:"text-left p-2 text-sm font-semibold text-gray-700",children:"Slope"}),d.jsx("th",{className:"w-12"})]})}),d.jsx("tbody",{children:t.tees.map((I,U)=>d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-2",children:d.jsx("input",{type:"text",value:I.name,onChange:q=>v(U,"name",q.target.value),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Black"})}),d.jsx("td",{className:"p-2",children:d.jsx("input",{type:"number",step:"0.1",value:I.rating,onChange:q=>v(U,"rating",q.target.value),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"72.1"})}),d.jsx("td",{className:"p-2",children:d.jsx("input",{type:"number",value:I.slope,onChange:q=>v(U,"slope",q.target.value),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"131"})}),d.jsx("td",{className:"p-2",children:d.jsx("button",{onClick:()=>x(U),className:"text-red-600 hover:text-red-700 p-1",title:"Delete tee",children:d.jsx(kf,{})})})]},I.id))})]})}),d.jsxs("button",{onClick:g,className:"mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm font-semibold flex items-center gap-2",children:[d.jsx(Mf,{}),"Add Tee"]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Stroke Index (Handicap)"}),d.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Assign each hole a handicap stroke value from 1-18 (1 = hardest, 18 = easiest). Each value must be used exactly once."}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Front 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full border-collapse text-xs",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"p-1 text-left min-w-[60px]"}),[1,2,3,4,5,6,7,8,9].map(I=>d.jsx("th",{className:"p-1 text-center w-16",children:I},I))]})}),d.jsx("tbody",{children:d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-1 text-gray-600",children:"SI"}),[...Array(9)].map((I,U)=>d.jsx("td",{className:"p-1",children:d.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:t.strokeIndex[U],onChange:q=>C(U,q.target.value),className:"w-full px-1 py-1 text-center rounded border border-gray-300 focus:border-blue-500 focus:outline-none"})},U))]})})]})})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Back 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full border-collapse text-xs",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"p-1 text-left min-w-[60px]"}),[10,11,12,13,14,15,16,17,18].map(I=>d.jsx("th",{className:"p-1 text-center w-16",children:I},I))]})}),d.jsx("tbody",{children:d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-1 text-gray-600",children:"SI"}),[...Array(9)].map((I,U)=>d.jsx("td",{className:"p-1",children:d.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:t.strokeIndex[U+9],onChange:q=>C(U+9,q.target.value),className:"w-full px-1 py-1 text-center rounded border border-gray-300 focus:border-blue-500 focus:outline-none"})},U))]})})]})})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Pars"}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Front 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full border-collapse text-xs",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"p-1 text-left min-w-[60px]"}),[1,2,3,4,5,6,7,8,9].map(I=>d.jsx("th",{className:"p-1 text-center w-16",children:I},I)),d.jsx("th",{className:"p-1 text-center w-16 font-bold",children:"OUT"})]})}),d.jsx("tbody",{children:d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-1 text-gray-600",children:"Par"}),[...Array(9)].map((I,U)=>d.jsx("td",{className:"p-1",children:d.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:t.tees[0]?.pars[U]||"",onChange:q=>{const Q=t.tees.map(ee=>({...ee,pars:ee.pars.map((Oe,V)=>V===U?q.target.value:Oe)}));s({...t,tees:Q})},className:"w-full px-1 py-1 text-center rounded border border-gray-300 focus:border-blue-500 focus:outline-none"})},U)),d.jsx("td",{className:"p-1 text-center font-bold bg-gray-200",children:L(t.tees[0]?.pars||[],0,9)})]})})]})})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Back 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full border-collapse text-xs",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"p-1 text-left min-w-[60px]"}),[10,11,12,13,14,15,16,17,18].map(I=>d.jsx("th",{className:"p-1 text-center w-16",children:I},I)),d.jsx("th",{className:"p-1 text-center w-16 font-bold",children:"IN"}),d.jsx("th",{className:"p-1 text-center w-16 font-bold",children:"TOT"})]})}),d.jsx("tbody",{children:d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-1 text-gray-600",children:"Par"}),[...Array(9)].map((I,U)=>d.jsxs(w1.Fragment,{children:[d.jsx("td",{className:"p-1",children:d.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:t.tees[0]?.pars[U+9]||"",onChange:q=>{const Q=t.tees.map(ee=>({...ee,pars:ee.pars.map((Oe,V)=>V===U+9?q.target.value:Oe)}));s({...t,tees:Q})},className:"w-full px-1 py-1 text-center rounded border border-gray-300 focus:border-blue-500 focus:outline-none"})}),U===8&&d.jsx("td",{className:"p-1 text-center font-bold bg-gray-200",children:L(t.tees[0]?.pars||[],9,18)})]},U)),d.jsx("td",{className:"p-1 text-center font-bold bg-gray-200",children:L(t.tees[0]?.pars||[],0,18)})]})})]})})]})]}),t.tees.map((I,U)=>d.jsxs("div",{className:"mb-6 border-2 border-gray-200 rounded-xl p-4",children:[d.jsxs("h4",{className:"text-md font-bold text-gray-900 mb-3",children:[I.name||`Tee ${U+1}`," - Yardages"]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Front 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full border-collapse text-xs",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"p-1 text-left min-w-[60px]"}),[1,2,3,4,5,6,7,8,9].map(q=>d.jsx("th",{className:"p-1 text-center w-16",children:q},q)),d.jsx("th",{className:"p-1 text-center w-16 font-bold",children:"OUT"})]})}),d.jsx("tbody",{children:d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-1 text-gray-600",children:"Yds"}),[...Array(9)].map((q,Q)=>d.jsx("td",{className:"p-1",children:d.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:I.yardages[Q],onChange:ee=>b(U,Q,"yardages",ee.target.value),className:"w-full px-1 py-1 text-center rounded border border-gray-300 focus:border-blue-500 focus:outline-none"})},Q)),d.jsx("td",{className:"p-1 text-center font-bold",children:L(I.yardages,0,9)})]})})]})})]}),d.jsxs("div",{children:[d.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Back 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full border-collapse text-xs",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"p-1 text-left min-w-[60px]"}),[10,11,12,13,14,15,16,17,18].map(q=>d.jsx("th",{className:"p-1 text-center w-16",children:q},q)),d.jsx("th",{className:"p-1 text-center w-16 font-bold",children:"IN"}),d.jsx("th",{className:"p-1 text-center w-16 font-bold",children:"TOT"})]})}),d.jsx("tbody",{children:d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-1 text-gray-600",children:"Yds"}),[...Array(9)].map((q,Q)=>d.jsx("td",{className:"p-1",children:d.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:I.yardages[Q+9],onChange:ee=>b(U,Q+9,"yardages",ee.target.value),className:"w-full px-1 py-1 text-center rounded border border-gray-300 focus:border-blue-500 focus:outline-none"})},Q)),d.jsx("td",{className:"p-1 text-center font-bold",children:L(I.yardages,9,18)}),d.jsx("td",{className:"p-1 text-center font-bold",children:L(I.yardages,0,18)})]})})]})})]})]},I.id)),u&&d.jsx("div",{className:`mb-4 p-4 rounded-xl text-center font-semibold ${u.includes("Error")||u.includes("required")||u.includes("must")||u.includes("missing")?"bg-red-50 border-2 border-red-500 text-red-800":"bg-green-50 border-2 border-green-500 text-green-800"}`,children:u}),d.jsx("button",{onClick:A,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold hover:bg-blue-700 text-lg",children:"Save Course"})]})]})})}function hA({setView:i,setCurrentSoloRound:t,user:s}){const[l,o]=$.useState([]),[u,f]=$.useState(null),[m,y]=$.useState(null),[g,x]=$.useState("stroke"),[v,b]=$.useState(!0);$.useEffect(()=>{C()},[]);const C=async()=>{try{const I=await tt(ae(le,"courses"));if(I.exists()){const U=I.val(),q=Object.entries(U).map(([Q,ee])=>({id:Q,...ee}));o(q)}b(!1)}catch(I){console.error("Error loading courses:",I),b(!1)}},A=I=>I?.tees?Object.entries(I.tees).map(([U,q])=>({id:U,...q})):[],L=async()=>{if(!u||!m){alert("Please select a course and tee");return}const I=`solo-${Date.now()}`,U=u.tees[m],q={id:I,userId:s.uid,userName:s.displayName||"Player",courseId:u.id,courseName:u.name,teeId:m,teeName:U.name,format:g,date:Date.now(),status:"in_progress",currentHole:1,holes:{},stats:{totalScore:0,toPar:0,totalPutts:0,fairwaysHit:0,fairwaysPossible:0,greensInRegulation:0,stablefordPoints:0},coursePars:U.pars,courseYardages:U.yardages,courseStrokeIndexes:u.strokeIndex};t(q),i("solo-scoring")};return v?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6 flex items-center justify-center",children:d.jsx("div",{className:"text-white text-xl",children:"Loading courses..."})}):d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsx("button",{onClick:()=>i("home"),className:"text-white mb-6 hover:text-blue-200 flex items-center gap-2",children:" Back"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Play Solo"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Course"}),d.jsxs("select",{value:u?.id||"",onChange:I=>{const U=l.find(q=>q.id===I.target.value);f(U),y(null)},className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none text-gray-900",children:[d.jsx("option",{value:"",children:"Select a course"}),l.map(I=>d.jsx("option",{value:I.id,children:I.name},I.id))]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tee"}),d.jsxs("select",{value:m||"",onChange:I=>y(I.target.value),disabled:!u,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none text-gray-900 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[d.jsx("option",{value:"",children:"Select a tee"}),A(u).map(I=>{const U=I.yardages?.reduce((q,Q)=>q+(parseInt(Q)||0),0)||0;return d.jsxs("option",{value:I.id,children:[I.name," - Rating: ",I.rating," / Slope: ",I.slope," / ",U," yards"]},I.id)})]})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Scoring Format"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("label",{className:"flex items-center p-4 rounded-xl border-2 border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:[d.jsx("input",{type:"radio",name:"format",value:"stroke",checked:g==="stroke",onChange:I=>x(I.target.value),className:"w-5 h-5 text-blue-600"}),d.jsx("span",{className:"ml-3 text-gray-900 font-medium",children:"Stroke Play"})]}),d.jsxs("label",{className:"flex items-center p-4 rounded-xl border-2 border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:[d.jsx("input",{type:"radio",name:"format",value:"stableford",checked:g==="stableford",onChange:I=>x(I.target.value),className:"w-5 h-5 text-blue-600"}),d.jsx("span",{className:"ml-3 text-gray-900 font-medium",children:"Stableford"})]})]})]}),d.jsx("button",{onClick:L,disabled:!u||!m,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-4 rounded-xl font-bold text-lg transition-colors",children:"Start Round"})]})]})})}const mh={SCORE:"ENTERING_SCORE"};function fA({currentSoloRound:i,setCurrentSoloRound:t,setView:s,user:l}){const[o,u]=$.useState(mh.SCORE),[f,m]=$.useState(null),[y,g]=$.useState(null),[x,v]=$.useState(""),b=i.currentHole,C=i.coursePars[b-1],A=i.courseYardages[b-1],L=i.courseStrokeIndexes[b-1],I=i.holes[b];$.useEffect(()=>{I?(m(I.score),g(I.fairway),v(I.notes||""),u(mh.SCORE)):(m(null),g(null),v(""),u(mh.SCORE))},[b]),$.useEffect(()=>{const G=te(i);if(JSON.stringify(G)!==JSON.stringify(i.stats)){const w={...i};w.stats=G,t(w)}},[b,i.holes]);const U=(G,w)=>{const P=G-w;return P>=2?0:P===1?1:P===0?2:P===-1?3:P===-2?4:P<=-3?5:0},q=(G,w)=>G===3&&w===1?[]:w===G-2?[0,1]:w===G-1?[0,1,2]:[0,1,2,"3+"],Q=(G,w,P)=>w===1?!0:w-P<=G-2,ee=G=>{m(G),C<4&&g(null),C===3&&G===1&&(g(null),M(G,null,1))},Oe=G=>{g(G)},V=G=>{M(f,y,G==="3+"?3:G)},M=async(G,w,P)=>{const J=Q(C,G,P),Se={score:G,putts:P,fairway:w,gir:J,notes:x},ce={...i};ce.holes[b]=Se;const N=te(ce);ce.stats=N;try{await ot(ae(le,`soloRounds/${ce.id}`),ce),await ot(ae(le,`users/${l.uid}/soloRounds/${ce.id}`),{date:ce.date,courseName:ce.courseName,score:N.totalScore,toPar:N.toPar}),t(ce),setTimeout(()=>{b<18?we(b+1):(ce.status="complete",ot(ae(le,`soloRounds/${ce.id}/status`),"complete"))},500)}catch(H){console.error("Error saving hole data:",H)}},te=G=>{let w=0,P=0,J=0,Se=0,ce=0,N=0,H=0;for(let oe=1;oe<=18;oe++){const he=G.holes[oe];if(he){H++,w+=he.score,P+=he.putts,ce+=he.gir?1:0;const nt=G.coursePars[oe-1];nt>=4&&(Se++,he.fairway==="hit"&&J++),G.format==="stableford"&&(N+=U(he.score,nt))}}const X=G.coursePars.slice(0,H).reduce((oe,he)=>oe+he,0),re=w-X;return{totalScore:w,toPar:re,totalPutts:P,fairwaysHit:J,fairwaysPossible:Se,greensInRegulation:ce,stablefordPoints:N}},we=G=>{if(G<1||G>18)return;const w={...i};w.currentHole=G,t(w)},mt=[{label:"Eagle",value:C-2,color:"bg-yellow-400 hover:bg-yellow-500"},{label:"Birdie",value:C-1,color:"bg-green-500 hover:bg-green-600"},{label:"Par",value:C,color:"bg-gray-400 hover:bg-gray-500"},{label:"Bogey",value:C+1,color:"bg-orange-400 hover:bg-orange-500"},{label:"Double",value:C+2,color:"bg-red-500 hover:bg-red-600"}],Ve=[{label:"Left",value:"left",color:"bg-orange-400 hover:bg-orange-500"},{label:"Hit",value:"hit",color:"bg-green-500 hover:bg-green-600"},{label:"Short",value:"short",color:"bg-orange-400 hover:bg-orange-500"},{label:"Right",value:"right",color:"bg-orange-400 hover:bg-orange-500"}],me=q(C,f),ct=(G,w)=>G?G<w?"text-green-600 font-bold":G===w?"text-gray-900":"text-red-600 font-bold":"text-gray-400",ut=async()=>{if(confirm("End round and save?")){const G={...i};G.status="complete";try{await ot(ae(le,`soloRounds/${G.id}`),G),s("home")}catch(w){console.error("Error ending round:",w)}}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-4",children:d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("button",{onClick:()=>s("home"),className:"text-white hover:text-blue-200",children:" Back"}),d.jsx("button",{onClick:ut,className:"text-white hover:text-blue-200 font-semibold",children:"End Round"})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:i.courseName}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-sm text-gray-600",children:"Score"}),d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i.stats.totalScore||0}),d.jsxs("div",{className:"text-sm text-gray-600",children:["Thru ",Object.keys(i.holes).length," holes"]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-sm text-gray-600",children:"To Par"}),d.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.stats.toPar>0?"+":"",i.stats.toPar||0]})]}),i.format==="stableford"&&d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-sm text-gray-600",children:"Points"}),d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i.stats.stablefordPoints})]}),i.format!=="stableford"&&d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-sm text-gray-600",children:"Putts"}),d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i.stats.totalPutts})]})]})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("button",{onClick:()=>we(b-1),disabled:b===1,className:"bg-gray-200 hover:bg-gray-300 disabled:opacity-30 disabled:cursor-not-allowed p-3 rounded-xl",children:d.jsx(ub,{})}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-5xl font-bold text-gray-900",children:["Hole ",b]}),d.jsxs("div",{className:"text-xl text-gray-600 mt-1",children:["Par ",C]}),d.jsxs("div",{className:"text-sm text-gray-500",children:[A," yards"]}),d.jsxs("div",{className:"text-sm text-gray-500",children:["SI: ",L]})]}),d.jsx("button",{onClick:()=>we(b+1),disabled:b===18,className:"bg-gray-200 hover:bg-gray-300 disabled:opacity-30 disabled:cursor-not-allowed p-3 rounded-xl",children:d.jsx(db,{})})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-center text-sm font-semibold text-gray-700 mb-3",children:"Score"}),d.jsx("div",{className:"grid grid-cols-5 gap-2",children:mt.map(G=>d.jsxs("button",{onClick:()=>ee(G.value),className:`${f===G.value?"ring-4 ring-blue-400":""} ${G.color} text-white py-4 rounded-xl font-semibold shadow-lg transition-all`,children:[d.jsx("div",{className:"text-sm",children:G.label}),d.jsx("div",{className:"text-2xl font-bold",children:G.value})]},G.label))})]}),f&&C>=4&&d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-center text-sm font-semibold text-gray-700 mb-3",children:"Fairway"}),d.jsx("div",{className:"grid grid-cols-4 gap-3",children:Ve.map(G=>d.jsx("button",{onClick:()=>Oe(G.value),className:`${y===G.value?"ring-4 ring-blue-400":""} ${G.color} text-white py-6 rounded-xl font-semibold text-lg shadow-lg transition-all`,children:G.label},G.label))})]}),f&&(C<4||y)&&me.length>0&&d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-center text-sm font-semibold text-gray-700 mb-3",children:"Putts"}),d.jsx("div",{className:"grid grid-cols-4 gap-3",children:me.map(G=>d.jsx("button",{onClick:()=>V(G),className:"bg-blue-600 hover:bg-blue-700 text-white py-6 rounded-xl font-bold text-2xl shadow-lg transition-all",children:G},G))})]})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-4",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),d.jsx("textarea",{value:x,onChange:G=>v(G.target.value),placeholder:"Add notes about this hole...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none resize-none",rows:"3"})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Scorecard"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Front 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"text-left p-2",children:"Hole"}),[1,2,3,4,5,6,7,8,9].map(G=>d.jsx("th",{className:"text-center p-2 min-w-[40px]",children:G},G))]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Par"}),[1,2,3,4,5,6,7,8,9].map(G=>d.jsx("td",{className:"text-center p-2",children:i.coursePars[G-1]},G))]}),d.jsxs("tr",{children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Score"}),[1,2,3,4,5,6,7,8,9].map(G=>{const w=i.holes[G],P=i.coursePars[G-1];return d.jsxs("td",{className:`text-center p-2 cursor-pointer hover:bg-gray-100 ${ct(w?.score,P)}`,onClick:()=>we(G),children:[w?.score||"-",w?.gir&&d.jsx("span",{className:"text-green-600",children:""})]},G)})]})]})]})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Back 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"text-left p-2",children:"Hole"}),[10,11,12,13,14,15,16,17,18].map(G=>d.jsx("th",{className:"text-center p-2 min-w-[40px]",children:G},G))]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Par"}),[10,11,12,13,14,15,16,17,18].map(G=>d.jsx("td",{className:"text-center p-2",children:i.coursePars[G-1]},G))]}),d.jsxs("tr",{children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Score"}),[10,11,12,13,14,15,16,17,18].map(G=>{const w=i.holes[G],P=i.coursePars[G-1];return d.jsxs("td",{className:`text-center p-2 cursor-pointer hover:bg-gray-100 ${ct(w?.score,P)}`,onClick:()=>we(G),children:[w?.score||"-",w?.gir&&d.jsx("span",{className:"text-green-600",children:""})]},G)})]})]})]})})]}),d.jsx("div",{className:"mt-4 text-sm text-gray-600 text-center",children:" = Green in Regulation  Tap any hole to edit"})]})]})})}function mA({user:i,setView:t,setCurrentSoloRound:s}){const[l,o]=$.useState([]),[u,f]=$.useState(!0);$.useEffect(()=>{m()},[i]);const m=async()=>{if(i)try{const v=ae(le,`users/${i.uid}/soloRounds`),b=await tt(v);if(b.exists()){const C=b.val(),A=await Promise.all(Object.entries(C).map(async([L,I])=>{const U=await tt(ae(le,`soloRounds/${L}`));return{id:L,...I,fullData:U.val()}}));A.sort((L,I)=>I.date-L.date),o(A)}f(!1)}catch(v){console.error("Error loading rounds:",v),f(!1)}},y=v=>{s(v.fullData),t("solo-scorecard")},g=v=>new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),x=v=>v===0?"E":v>0?`+${v}`:`${v}`;return u?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6 flex items-center justify-center",children:d.jsx("div",{className:"text-white text-xl",children:"Loading rounds..."})}):d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("button",{onClick:()=>t("home"),className:"text-white mb-6 hover:text-blue-200 flex items-center gap-2",children:" Back"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"My Rounds"}),l.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("p",{className:"text-gray-600 mb-4",children:"No rounds yet"}),d.jsx("button",{onClick:()=>t("solo-setup"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold",children:"Start Your First Round"})]}):d.jsx("div",{className:"space-y-4",children:l.map(v=>d.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-blue-400 transition-colors",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:g(v.date)}),d.jsx("h3",{className:"text-xl font-bold text-gray-900",children:v.courseName}),d.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v.fullData?.teeName||"White Tees"})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:v.score}),d.jsxs("div",{className:"text-lg text-gray-600",children:["(",x(v.toPar),")"]})]})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[d.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[d.jsx("div",{className:"text-xs text-gray-600",children:"Putts"}),d.jsx("div",{className:"text-lg font-bold text-gray-900",children:v.fullData?.stats?.totalPutts||0})]}),d.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[d.jsx("div",{className:"text-xs text-gray-600",children:"GIR"}),d.jsx("div",{className:"text-lg font-bold text-gray-900",children:v.fullData?.stats?.greensInRegulation||0})]}),d.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[d.jsx("div",{className:"text-xs text-gray-600",children:"Fairways"}),d.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[v.fullData?.stats?.fairwaysHit||0,"/",v.fullData?.stats?.fairwaysPossible||0]})]})]}),d.jsx("button",{onClick:()=>y(v),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold",children:"View Scorecard"})]},v.id))})]})]})})}function pA({currentSoloRound:i,setView:t}){if(!i)return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-6 flex items-center justify-center",children:d.jsxs("div",{className:"text-white text-center",children:[d.jsx("p",{className:"text-xl mb-4",children:"Round not found"}),d.jsx("button",{onClick:()=>t("home"),className:"bg-white text-blue-900 px-6 py-3 rounded-xl font-semibold",children:"Back to Home"})]})});const s=f=>new Date(f).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),l=f=>f===0?"Even":f>0?`+${f}`:`${f}`,o=(f,m)=>f?f<m?"text-green-600 font-bold":f===m?"text-gray-900":"text-red-600 font-bold":"text-gray-400",u=()=>{const{fairwaysHit:f,fairwaysPossible:m}=i.stats;return m===0?"0":(f/m*100).toFixed(0)};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 p-4",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("button",{onClick:()=>t("past-rounds"),className:"text-white mb-4 hover:text-blue-200",children:" Back to Rounds"}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 mb-4",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:i.courseName}),d.jsxs("p",{className:"text-gray-600",children:[i.teeName," Tees"]}),d.jsx("p",{className:"text-sm text-gray-500",children:s(i.date)})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Score"}),d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i.stats.totalScore}),d.jsxs("div",{className:"text-sm text-gray-600",children:["(",l(i.stats.toPar),")"]})]}),d.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Putts"}),d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i.stats.totalPutts}),d.jsxs("div",{className:"text-sm text-gray-600",children:[(i.stats.totalPutts/18).toFixed(1)," avg"]})]}),d.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"GIR"}),d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i.stats.greensInRegulation}),d.jsxs("div",{className:"text-sm text-gray-600",children:[(i.stats.greensInRegulation/18*100).toFixed(0),"%"]})]}),d.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Fairways"}),d.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.stats.fairwaysHit,"/",i.stats.fairwaysPossible]}),d.jsxs("div",{className:"text-sm text-gray-600",children:[u(),"%"]})]})]}),i.format==="stableford"&&d.jsxs("div",{className:"bg-green-50 p-4 rounded-xl text-center",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Stableford Points"}),d.jsx("div",{className:"text-3xl font-bold text-green-700",children:i.stats.stablefordPoints})]})]}),d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Scorecard"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Front 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"text-left p-2",children:"Hole"}),[1,2,3,4,5,6,7,8,9].map(f=>d.jsx("th",{className:"text-center p-2 min-w-[50px]",children:f},f)),d.jsx("th",{className:"text-center p-2 font-bold",children:"OUT"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Par"}),[1,2,3,4,5,6,7,8,9].map(f=>d.jsx("td",{className:"text-center p-2 font-semibold",children:i.coursePars[f-1]},f)),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-100",children:i.coursePars.slice(0,9).reduce((f,m)=>f+m,0)})]}),d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Yards"}),[1,2,3,4,5,6,7,8,9].map(f=>d.jsx("td",{className:"text-center p-2 text-xs text-gray-500",children:i.courseYardages[f-1]},f)),d.jsx("td",{className:"text-center p-2 text-xs text-gray-500 bg-gray-100",children:i.courseYardages.slice(0,9).reduce((f,m)=>f+m,0)})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Score"}),[1,2,3,4,5,6,7,8,9].map(f=>{const m=i.holes[f],y=i.coursePars[f-1];return d.jsx("td",{className:`text-center p-2 ${o(m?.score,y)}`,children:d.jsxs("div",{className:"flex items-center justify-center gap-1",children:[m?.score||"-",m?.gir&&d.jsx("span",{className:"text-green-600 text-xs",children:""})]})},f)}),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-100",children:[1,2,3,4,5,6,7,8,9].reduce((f,m)=>f+(i.holes[m]?.score||0),0)||"-"})]}),d.jsxs("tr",{className:"border-t border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600 text-xs",children:"Putts"}),[1,2,3,4,5,6,7,8,9].map(f=>{const m=i.holes[f];return d.jsx("td",{className:"text-center p-2 text-xs text-gray-600",children:m?.putts??"-"},f)}),d.jsx("td",{className:"text-center p-2 text-xs text-gray-600 bg-gray-100",children:[1,2,3,4,5,6,7,8,9].reduce((f,m)=>f+(i.holes[m]?.putts||0),0)||"-"})]})]})]})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Back 9"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b-2 border-gray-300",children:[d.jsx("th",{className:"text-left p-2",children:"Hole"}),[10,11,12,13,14,15,16,17,18].map(f=>d.jsx("th",{className:"text-center p-2 min-w-[50px]",children:f},f)),d.jsx("th",{className:"text-center p-2 font-bold",children:"IN"}),d.jsx("th",{className:"text-center p-2 font-bold",children:"TOT"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Par"}),[10,11,12,13,14,15,16,17,18].map(f=>d.jsx("td",{className:"text-center p-2 font-semibold",children:i.coursePars[f-1]},f)),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-100",children:i.coursePars.slice(9,18).reduce((f,m)=>f+m,0)}),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-200",children:i.coursePars.reduce((f,m)=>f+m,0)})]}),d.jsxs("tr",{className:"border-b border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Yards"}),[10,11,12,13,14,15,16,17,18].map(f=>d.jsx("td",{className:"text-center p-2 text-xs text-gray-500",children:i.courseYardages[f-1]},f)),d.jsx("td",{className:"text-center p-2 text-xs text-gray-500 bg-gray-100",children:i.courseYardages.slice(9,18).reduce((f,m)=>f+m,0)}),d.jsx("td",{className:"text-center p-2 text-xs text-gray-500 bg-gray-200",children:i.courseYardages.reduce((f,m)=>f+m,0)})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"p-2 text-gray-600",children:"Score"}),[10,11,12,13,14,15,16,17,18].map(f=>{const m=i.holes[f],y=i.coursePars[f-1];return d.jsx("td",{className:`text-center p-2 ${o(m?.score,y)}`,children:d.jsxs("div",{className:"flex items-center justify-center gap-1",children:[m?.score||"-",m?.gir&&d.jsx("span",{className:"text-green-600 text-xs",children:""})]})},f)}),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-100",children:[10,11,12,13,14,15,16,17,18].reduce((f,m)=>f+(i.holes[m]?.score||0),0)||"-"}),d.jsx("td",{className:"text-center p-2 font-bold bg-gray-200",children:i.stats.totalScore||"-"})]}),d.jsxs("tr",{className:"border-t border-gray-200",children:[d.jsx("td",{className:"p-2 text-gray-600 text-xs",children:"Putts"}),[10,11,12,13,14,15,16,17,18].map(f=>{const m=i.holes[f];return d.jsx("td",{className:"text-center p-2 text-xs text-gray-600",children:m?.putts??"-"},f)}),d.jsx("td",{className:"text-center p-2 text-xs text-gray-600 bg-gray-100",children:[10,11,12,13,14,15,16,17,18].reduce((f,m)=>f+(i.holes[m]?.putts||0),0)||"-"}),d.jsx("td",{className:"text-center p-2 text-xs text-gray-600 bg-gray-200",children:i.stats.totalPutts})]})]})]})})]}),d.jsx("div",{className:"mt-4 text-sm text-gray-600 text-center",children:" = Green in Regulation"})]}),Object.entries(i.holes).some(([f,m])=>m.notes)&&d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Notes"}),d.jsx("div",{className:"space-y-3",children:Object.entries(i.holes).filter(([f,m])=>m.notes).map(([f,m])=>d.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[d.jsxs("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:["Hole ",f]}),d.jsx("div",{className:"text-gray-600",children:m.notes})]},f))})]})]})})}function gA(){const i=()=>f&&f.email==="willsmith919@gmail.com",t=async pt=>{const Be=pt.split("-")[0].toUpperCase().substring(0,4),Ae=Math.random().toString(36).substring(2,6).toUpperCase(),Re=`${Be}-${Ae}`;return(await tt(ae(le,`eventCodes/${Re}`))).exists()?t(pt):Re},s=async()=>{const pt="ABCDEFGHJKLMNPQRSTUVWXYZ",Be="0123456789";let Ae,Re=!0;for(;Re;){const Ie=Array(3).fill(0).map(()=>pt[Math.floor(Math.random()*pt.length)]).join(""),st=Array(4).fill(0).map(()=>Be[Math.floor(Math.random()*Be.length)]).join("");Ae=`${Ie}-${st}`,Re=(await tt(ae(le,`leagueCodes/${Ae}`))).exists()}return Ae},l=async pt=>{try{const Ae=(await tt(ae(le,`users/${pt}/leagues`))).val()||{},Re=[];for(const Ie of Object.keys(Ae)){const Ot=(await tt(ae(le,`leagues/${Ie}`))).val();Ot&&Re.push({id:Ie,...Ot,userRole:Ae[Ie].role})}return Re}catch(Be){return console.error("Error loading leagues:",Be),[]}},[o,u]=$.useState("login"),[f,m]=$.useState(null),[y,g]=$.useState(null),[x,v]=$.useState(!0),[b,C]=$.useState([]),[A,L]=$.useState([]),[I,U]=$.useState(null),[q,Q]=$.useState({name:"",location:"",strokeIndex:Array(18).fill(""),tees:[{id:"tee-1",name:"",rating:"",slope:"",pars:Array(18).fill(""),yardages:Array(18).fill("")}]}),[ee,Oe]=$.useState({name:"",courseId:"",date:new Date().toISOString().split("T")[0],time:"",format:"scramble",startingHole:1,teams:[]}),[V,M]=$.useState(""),[te,we]=$.useState({name:"",player1:"",player2:""}),[mt,Ve]=$.useState(""),[me,ct]=$.useState(null),[ut,G]=$.useState(null),[w,P]=$.useState(""),[J,Se]=$.useState(null),[ce,N]=$.useState(""),[H,K]=$.useState(""),[X,re]=$.useState(""),[oe,he]=$.useState(""),[nt,Xe]=$.useState(""),[Ks,Ti]=$.useState(""),[Ci,Ba]=$.useState(""),[Nn,wi]=$.useState(!1),[Pa,Ai]=$.useState([]),[Ft,In]=$.useState(null),[qa,Ga]=$.useState({name:"",description:"",seasonName:"2026 Season",pointSystem:{1:20,2:16,3:13,4:10,5:8}}),[Dc,Mc]=$.useState(""),[jt,xr]=$.useState(null),[Ut,ji]=$.useState(null),[Xs,Va]=$.useState(null),[Sr,Ri]=$.useState([]),[kc,Oi]=$.useState({}),wt=$.useRef(null),mn=$.useRef(null),Rt=Z2(),[Nr,Ya]=$.useState(null),Qa=async()=>{try{const Be=(await tt(ae(le,"courses"))).val()||{},Ae=Object.entries(Be).map(([Ie,st])=>({id:Ie,...st})).sort((Ie,st)=>Ie.name.localeCompare(st.name));L(Ae);const Re=[];Ae.forEach(Ie=>{Object.entries(Ie.tees||{}).forEach(([st,Ot])=>{Re.push({id:`${Ie.id}-${st}`,courseId:Ie.id,teeId:st,name:Ie.name,location:Ie.location,teeName:Ot.name,holes:Ot.pars,pars:Ot.pars,yardages:Ot.yardages,strokeIndex:Ie.strokeIndex,rating:Ot.rating,slope:Ot.slope})})}),C(Re)}catch(pt){console.error("Error loading courses:",pt)}};return $.useEffect(()=>{Qa()},[]),$.useEffect(()=>()=>{wt.current&&Z_(wt.current),mn.current&&clearTimeout(mn.current)},[]),$.useEffect(()=>{const pt=vE(Ic,async Be=>{if(m(Be),Be)try{const Re=(await tt(ae(le,`users/${Be.uid}`))).val();g(Re);const Ie=await l(Be.uid);Ai(Ie),(o==="login"||o==="signup")&&u("home")}catch(Ae){console.error("Error fetching user profile:",Ae)}else g(null),Ai([]),u("login");v(!1)});return()=>pt()},[]),$.useEffect(()=>((async()=>{if(o!=="league-dashboard"||!Ft){Ri([]);return}const Be=Object.values(Ft.seasons||{}).find(Ae=>Ae.status==="active");if(!Be||!Be.events){Ri([]);return}try{const Ae=[];for(const Re of Be.events){const st=(await tt(ae(le,`events/${Re}`))).val();st&&Ae.push({id:Re,...st})}Ae.sort((Re,Ie)=>new Date(Re.meta.date)-new Date(Ie.meta.date)),Ri(Ae),Be.events.forEach(Re=>{const Ie=ae(le,`events/${Re}`);L2(Ie,st=>{const Ot=st.val();Ot&&Ri(Er=>Er.map(En=>En.id===Re?{id:Re,...Ot}:En).sort((En,Lc)=>new Date(En.meta.date)-new Date(Lc.meta.date)))})})}catch(Ae){console.error("Error loading league events:",Ae)}})(),()=>{if(o==="league-dashboard"&&Ft){const Be=Object.values(Ft.seasons||{}).find(Ae=>Ae.status==="active");Be?.events&&Be.events.forEach(Ae=>{Z_(ae(le,`events/${Ae}`))})}}),[o,Ft]),$.useEffect(()=>{Va(Ut&&o==="edit-event"?{name:Ut.meta.name,courseId:Ut.meta.courseId,date:Ut.meta.date,time:Ut.meta.time||"",format:Ut.meta.format}:null)},[Ut,o]),x?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),d.jsx("p",{className:"text-white",children:"Loading..."})]})}):o==="login"?d.jsx($2,{loginEmail:ce,setLoginEmail:N,loginPassword:H,setLoginPassword:K,authError:Ci,setAuthError:Ba,authLoading2:Nn,setAuthLoading2:wi,setView:u}):o==="signup"?d.jsx(J2,{signupEmail:X,setSignupEmail:re,signupPassword:oe,setSignupPassword:he,signupDisplayName:nt,setSignupDisplayName:Xe,signupHandicap:Ks,setSignupHandicap:Ti,authError:Ci,setAuthError:Ba,authLoading2:Nn,setAuthLoading2:wi,setView:u}):o==="home"?d.jsx(F2,{currentUser:f,userProfile:y,userLeagues:Pa,isAdmin:i,joinCode:mt,setJoinCode:Ve,feedback:w,setFeedback:P,setView:u,setCurrentLeague:In,setCurrentEvent:ct}):o==="create-league"?d.jsx(eA,{currentUser:f,userProfile:y,newLeague:qa,setNewLeague:Ga,feedback:w,setFeedback:P,setView:u,setCurrentLeague:In,setUserLeagues:Ai,generateLeagueCode:s,loadUserLeagues:l}):o==="join-league"?d.jsx(tA,{currentUser:f,userProfile:y,leagueCode:Dc,setLeagueCode:Mc,feedback:w,setFeedback:P,setView:u,setCurrentLeague:In,setUserLeagues:Ai,loadUserLeagues:l}):o==="league-dashboard"&&Ft?d.jsx(iA,{currentUser:f,currentLeague:Ft,setCurrentLeague:In,leagueEvents:Sr,feedback:w,setFeedback:P,setView:u,setCreatingEventForLeague:xr,setEditingEvent:ji}):o==="create-event"?d.jsx(aA,{currentUser:f,currentLeague:Ft,courses:b,globalCourses:A,newEvent:ee,setNewEvent:Oe,selectedBaseCourse:V,setSelectedBaseCourse:M,newTeam:te,setNewTeam:we,creatingEventForLeague:jt,setCreatingEventForLeague:xr,feedback:w,setFeedback:P,setView:u,setCurrentEvent:ct,setCurrentLeague:In,generateEventCode:t,deviceId:Rt}):o==="event-lobby"&&me?d.jsx(lA,{currentEvent:me,feedback:w,setFeedback:P,setView:u,setSelectedTeam:G}):o==="event-details"&&Ut?d.jsx(rA,{currentUser:f,userProfile:y,currentLeague:Ft,editingEvent:Ut,setEditingEvent:ji,eventRegistrations:kc,feedback:w,setFeedback:P,setView:u}):o==="scoring"&&me&&ut?d.jsx(cA,{currentEvent:me,setCurrentEvent:ct,selectedTeam:ut,setSelectedTeam:G,feedback:w,setFeedback:P,scoreConfirmation:J,setScoreConfirmation:Se,setView:u}):o==="edit-event"&&Ut&&Xs?d.jsx(oA,{editingEvent:Ut,setEditingEvent:ji,editForm:Xs,setEditForm:Va,courses:b,globalCourses:A,feedback:w,setFeedback:P,setView:u}):o==="manage-courses"?d.jsx(uA,{globalCourses:A,feedback:w,setFeedback:P,setView:u,setCourseForm:Q,setEditingCourse:U,loadCourses:Qa}):o==="add-edit-course"?d.jsx(dA,{currentUser:f,courseForm:q,setCourseForm:Q,editingCourse:I,setEditingCourse:U,feedback:w,setFeedback:P,setView:u,loadCourses:Qa}):o==="solo-setup"?d.jsx(hA,{setView:u,setCurrentSoloRound:Ya,user:f}):o==="solo-scoring"?d.jsx(fA,{currentSoloRound:Nr,setCurrentSoloRound:Ya,setView:u,user:f}):o==="past-rounds"?d.jsx(mA,{user:f,setView:u,setCurrentSoloRound:Ya}):o==="solo-scorecard"?d.jsx(pA,{currentSoloRound:Nr,setView:u}):null}M1.createRoot(document.getElementById("root")).render(d.jsx($.StrictMode,{children:d.jsx(gA,{})}));
